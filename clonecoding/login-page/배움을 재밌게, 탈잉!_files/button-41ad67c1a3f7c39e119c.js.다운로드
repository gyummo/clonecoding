_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{"4Ptm":function(t,e,a){"use strict";a.r(e),a.d(e,"__N_SSP",(function(){return O}));var n=a("o0o1"),c=a.n(n),o=a("HaE+"),r=a("q1tI"),i=a.n(r),d=a("ULN6"),u=a("DTFv"),s=a("M6fp"),p=a("6N+z"),_=a("jcLD"),b=a("nvGk"),f=a("koCe"),l=i.a.createElement,O=!0;function I(t){var e=t.siteId,a=t.siteName,n=t.categoryId,b=t.divisionId,O=t.partnerId,I=t.shopId,v=t.params,m=t.kakaoId,w=t.naverId,E=t.options,y=t.loadFromHeythere,j=Object(d.e)(),k=Object(f.a)(),C=k.getIngRoom,g=k.getLastRoom;Object(p.a)({siteId:e,siteName:a,categoryId:n,divisionId:b,partnerId:O,shopId:I,params:v,kakaoId:m,naverId:w,loadFromHeythere:y});var h=Object(_.a)().happytalkAuth;Object(u.a)(E),Object(s.a)();var N=Object(r.useCallback)(Object(o.a)(c.a.mark((function t(){var e,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=C(),a=g(),!e&&!a){t.next=6;break}return t.next=5,h();case 5:j({type:"SET_SOCKET_CONNECT_READY",payload:!0});case 6:case"end":return t.stop()}}),t)}))),[j,h,C,g]);return Object(r.useEffect)((function(){N()}),[N]),l(i.a.Fragment,null)}I.getLayout=function(t){return l(b.a,null,t)},e.default=I},M6fp:function(t,e,a){"use strict";var n=a("yLiY"),c=a.n(n),o=a("q1tI"),r=a("Z8B4"),i=a("3fiu"),d=a("Em9b"),u=a("c+TM"),s=a("nvOH"),p=a("ULN6"),_=a("nOHt"),b=c()().publicRuntimeConfig.KAKAO_API_URL;e.a=function(){var t=Object(_.useRouter)(),e=Object(s.f)(),a=e.kakaotalkId,n=e.navertalkId,c=Object(u.f)(),f=c.siteId,l=c.categoryId,O=c.divisionId,I=c.params,v=c.kakaoId,m=c.naverId,w=Object(p.e)(),E=Object(u.e)(),y=Object(s.e)(),j=Object(i.a)(),k=j.onClickSend,C=j.onDrop,g=Object(d.a)().onCloseWindow,h=Object(o.useCallback)((function(e){if("OPEN_CHAT_WINDOW"!==e.data.type)if("CLOSE_CHAT_WINDOW"!==e.data.type){if("LINK_TO_KAKAO"===e.data.type){var c="".concat(b,"/api/kakao/chat_open?yid=").concat(v||a,"&site_id=").concat(f,"&category_id=").concat(l,"&division_id=").concat(O).concat(Object(r.g)(I));return window.open(c,"_blank"),void Object(r.b)(c)}if("LINK_TO_NAVER"===e.data.type){var o="https://talk.naver.com/ct/".concat(m||n,"?from=site_id%7C").concat(f,"%7Ccategory_id%7C").concat(l,"%7Cdivision_id%7C").concat(O).concat(Object(r.i)(I));return window.open(o,"_blank"),void Object(r.b)(o)}"SET_PARAMS"===e.data.type&&E({type:"SET_PARAMS",payload:{siteId:null!==f&&void 0!==f?f:"",params:e.data.value}}),"READY_CHAT_ROOM"===e.data.type&&w({type:"OPEN_CHAT_ROOM",payload:!0}),"SEND_TEXT_MESSAGE"===e.data.type&&k(e.data.value),"SEND_IMAGE_MESSAGE"===e.data.type&&C(e.data.value),"END_CHAT"===e.data.type&&g(),"UPDATE_CONFIG"===e.data.type&&y({type:"UPDATE_EDITOR_CONFIG",payload:e.data.value})}else w({type:"OPEN_CHAT_WINDOW",payload:!1});else{if("/button"===t.pathname){var i=t.asPath.split("?"),d="/chatting?".concat(i[1]||"");t.replace(d)}w({type:"OPEN_CHAT_WINDOW",payload:!0})}}),[w,t,v,a,f,l,O,I,m,n,E,k,C,g,y]);Object(o.useEffect)((function(){if(window.self!==window.top)return window.addEventListener("message",h),function(){window.removeEventListener("message",h)}}),[w,h])}},QoM1:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/button",function(){return a("4Ptm")}])},"aC+I":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return c})),a.d(e,"d",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"f",(function(){return i})),a.d(e,"c",(function(){return d}));var n="happytalkio_ingRoomId",c="happytalkio_lastChatListId",o="priorityRoomId",r="priorityUserId",i="priorityUuid",d="priorityCustomerId"},koCe:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var n=a("o0o1"),c=a.n(n),o=a("HaE+"),r=a("q1tI"),i=a("aC+I"),d=a("c+TM"),u=a("er4e"),s=a("YXsr");function p(){var t=Object(d.f)(),e=t.siteId,a=t.userId,n=t.hasSiteUid,p=Object(r.useCallback)((function(t){n?u.a.setItem("".concat(i.a,"_").concat(e,"_").concat(a),t):u.a.setItem("".concat(i.a,"_").concat(e),t)}),[n,e,a]),_=Object(r.useCallback)((function(){return n?u.a.getItem("".concat(i.a,"_").concat(e,"_").concat(a)):u.a.getItem("".concat(i.a,"_").concat(e))}),[n,e,a]),b=Object(r.useCallback)((function(){n?u.a.removeItem("".concat(i.a,"_").concat(e,"_").concat(a)):u.a.removeItem("".concat(i.a,"_").concat(e))}),[n,e,a]),f=Object(r.useCallback)((function(t){n?u.a.setItem("".concat(i.b,"_").concat(e,"_").concat(a),t):u.a.setItem("".concat(i.b,"_").concat(e),t)}),[n,e,a]),l=Object(r.useCallback)((function(){return n?u.a.getItem("".concat(i.b,"_").concat(e,"_").concat(a)):u.a.getItem("".concat(i.b,"_").concat(e))}),[n,e,a]),O=Object(r.useCallback)((function(){n?u.a.removeItem("".concat(i.b,"_").concat(e,"_").concat(a)):u.a.removeItem("".concat(i.b,"_").concat(e))}),[n,e,a]),I=Object(r.useCallback)(Object(o.a)(c.a.mark((function t(){var n,o,r,i,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=_()){t.next=3;break}return t.abrupt("return",Promise.resolve(!1));case 3:return t.prev=3,o=!1,t.next=7,Object(s.i)(n,"".concat(e,"_").concat(a));case 7:return r=t.sent,"F"===(i=r.data.data).isLive&&(i.notReadCount>0&&((d=_())&&f(d),o=!0),b()),t.abrupt("return",Promise.resolve(o));case 13:return t.prev=13,t.t0=t.catch(3),t.abrupt("return",Promise.resolve(!0));case 16:case"end":return t.stop()}}),t,null,[[3,13]])}))),[_,b,f,e,a]);return{setIngRoom:p,getIngRoom:_,removeIngRoom:b,setLastRoom:f,getLastRoom:l,removeLastRoom:O,getNotReadMessageReq:I}}},nvGk:function(t,e,a){"use strict";var n=a("q1tI"),c=a.n(n),o=a("Ckzw"),r=a("nKX1"),i=a("4mV0"),d=a("Z8B4"),u=c.a.createElement;e.a=function(t){var e=t.children,a=Object(o.e)(),c=Object(n.useState)(!0),s=c[0],p=c[1],_=Object(n.useState)(""),b=_[0],f=_[1];Object(n.useEffect)((function(){Object(d.n)()||Object(d.p)()?f("mobile"):f("pc")}),[]),Object(n.useEffect)((function(){var t=window.location.pathname;p(window.self===window.top&&"/chatting"===t)}),[]);var l=Object(n.useCallback)((function(t){if("WINDOW_SIZE"===t.data.type){var e=t.data.value,n=e.windowWidth,c=e.windowHeight;a({type:"SET_WINODW_SIZE",payload:{width:n,height:c}})}}),[a]);return Object(n.useEffect)((function(){return window.self===window.top&&a({type:"SET_WINODW_SIZE",payload:{width:window.parent.innerWidth,height:window.parent.innerHeight}}),window.addEventListener("message",l),function(){window.removeEventListener("message",l)}}),[a,l]),u(r.a,null,e,!s&&u(i.a,{device:b,isLive:!0}))}}},[["QoM1",0,2,5,1,3,6,4,11,15,13]]]);