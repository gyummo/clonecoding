/*! @kakao/jackdaw-js v1.0.5 2021-02-02 10:04:49 | Copyright (c) 2018 Sentry (https://sentry.io) and individual contributors | https://github.com/getsentry/sentry-javascript/blob/v3.27.1/packages/raven-js/LICENSE */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Jackdaw=n():e.Jackdaw=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){"use strict";function r(e){this.name="JackdawError",this.message=e}function o(e,n){function t(e,n){n=n||{};var t=g(e);return T=_(T,{project:t.projectId}),T=_(T,n||{}),T.maxBreadcrumbs=Math.max(0,Math.min(T.maxBreadcrumbs,100)),L=t.endpoint,U=T.transport=n.transport||j,this}function s(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function l(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function f(e,n){T.debug&&console.log(n)}function p(){$=0,z=null}function d(){return $&&A()-z<$}function m(e){if(d())return void f("warn","Should back off");var n=e.status;if(400===n||401===n||429===n){var t;try{t=e.getResponseHeader("Retry-After"),t=1e3*parseInt(t,10)}catch(r){}$=t||(2*$||1e3),z=A()}}function v(e){return!!I&&(e.stacktrace||I.stacktrace?w(e.stacktrace,I.stacktrace):e.exception||I.exception?k(e.exception,I.exception):e.fingerprint||I.fingerprint?Boolean(e.fingerprint&&I.fingerprint)&&D(e.fingerprint)===D(I.fingerprint):S(e.message,I.message))}function x(e,n,t){if(d())return void(n&&n(new r("Should back off")));if(v(e))return f("warn","Jackdaw dropped repeat event: ",e),void(n&&n(new r("Dropped repeat event")));e=_(T,e),e.tag=e.tag||{},e.extra=e.extra||{},e.extra["session:duration"]=A()-H,N&&N.length>0&&(e.breadcrumbs={values:[].slice.call(N,0)}),R=e.event_id=M(),I=e,f("debug","Jackdaw about to send:",e);var o=X=e.exception&&e.exception.values[0];B.addBreadcrumb({category:"sentry",message:o?(o.type?o.type+": ":"")+o.value:e.message,event_id:R,level:e.level||"error"});try{t({url:L,data:e,onSuccess:function(){p(),n&&n()},onError:function(e){f("error","Jackdaw transport failed to send: ",e),e.request&&m(e.request),n&&n(e)}})}catch(a){n&&n(a)}}function g(e){var n,t=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,r=t.exec(e);return r?(n={protocol:r[1],user:r[2],pass:r[3]||"",host:r[4],port:r[5]||"",projectId:r[6]},n.endpoint=n.protocol+"://"+n.host+(n.port?":"+n.port:"")+"/api/"+n.projectId+"/store/?sentry_version=7&sentry_key="+n.user+(n.pass?"&sentry_secret="+n.pass:""),n):""}function h(e,n){function t(){try{return u.location.href}catch(e){}return""}function r(e,n,t,r){var o={url:n,line:t};if(o.url&&o.line){if(e.incomplete=!1,o.func||(o.func="?"),e.stack.length>0&&e.stack[0].url===o.url){if(e.stack[0].line===o.line)return!1;if(!e.stack[0].line&&e.stack[0].func===o.func)return e.stack[0].line=o.line,!1}return e.stack.unshift(o),e.partial=!0,!0}return e.incomplete=!0,!1}function o(e,n){for(var a,i,u=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],s={},l=!1,f=o.caller;f&&!l;f=f.caller)if(f!==h){if(i={url:null,func:"?",line:null,column:null},f.name?i.func=f.name:(a=u.exec(f.toString()))&&(i.func=a[1]),"undefined"==typeof i.func)try{i.func=a.input.substring(0,a.input.indexOf("{"))}catch(d){}s[""+f]?l=!0:s[""+f]=!0,c.push(i)}n&&c.splice(0,n);var p={name:e.name,message:e.message,url:t(),stack:c};return r(p,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),p}var a=null;n=null==n?0:+n;try{if(a=function(e){if("undefined"!=typeof e.stack&&e.stack){for(var n,r,o,a,i=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,u=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,l=/\((\S*)(?::(\d+))(?::(\d+))\)/,f=e.stack.split("\n"),p=[],d=0,m=f.length;d<m;++d){if(r=i.exec(f[d])){var v=r[2]&&0===r[2].indexOf("native");a=r[2]&&0===r[2].indexOf("eval"),a&&(n=l.exec(r[2]))&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),o={url:v?null:r[2],func:r[1]||"?",args:v?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=u.exec(f[d]))o={url:r[2],func:r[1]||"?",args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=c.exec(f[d])))continue;a=r[3]&&r[3].indexOf(" > eval")>-1,a&&(n=s.exec(r[3]))?(r[3]=n[1],r[4]=n[2],r[5]=null):0!==d||r[5]||"undefined"==typeof e.columnNumber||(p[0].column=e.columnNumber+1),o={url:r[3],func:r[1]||"?",args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}!o.func&&o.line&&(o.func="?"),p.push(o)}return p.length?{name:e.name,message:e.message,url:t(),stack:p}:null}}(e))return a}catch(i){}try{if(a=o(e,n+1))return a}catch(i){}return{name:e.name,message:e.message,url:t()}}function y(e,n){function t(e,n){var t={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"};return e.url||(t.filename=n),t}var r=[];if(e.stack&&e.stack.length&&(q(e.stack,function(n,o){var a=t(o,e.url);a&&r.push(a)}),n&&n.trimHeadFrames))for(var o=0;o<n.trimHeadFrames&&o<r.length;o++)r[o].in_app=!1;return r=r.slice(0,50)}function b(e,n,t,r,o,a){var i;o&&o.length?(t=o[0].filename||t,o.reverse(),i={frames:o}):t&&(i={frames:[{filename:t,lineno:r,in_app:!0}]});var u=_({exception:{values:[{type:e,value:n,stacktrace:i}]}},a),c=u.exception.values[0];return null==c.type&&""===c.value&&(c.value="Unrecoverable error caught"),u}function k(e,n){return!E(e,n)&&(e=e.values[0],n=n.values[0],e.type===n.type&&e.value===n.value&&(!O(e.stacktrace,n.stacktrace)&&w(e.stacktrace,n.stacktrace)))}function w(e,n){if(E(e,n))return!1;var t=e.frames,r=n.frames;if(t===undefined||r===undefined)return!1;if(t.length!==r.length)return!1;for(var o,a,i=0;i<t.length;i++)if(o=t[i],a=r[i],o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o["function"]!==a["function"])return!1;return!0}function S(e,n){return!(!e&&!n)&&(!(e&&!n||!e&&n)&&e===n)}function j(e){var n=e.url,t=i.XMLHttpRequest&&new i.XMLHttpRequest;if(!t)return!1;var o="withCredentials"in t;if(!o&&"undefined"==typeof i.XDomainRequest)return!1;o?t.onreadystatechange=function(){if(4!==t.readyState);else if(200===t.status)e.onSuccess&&e.onSuccess();else if(e.onError){var n=new r("Transport error code: "+t.status);n.request=t,e.onError(n)}}:(t=new i.XDomainRequest,n=n.replace(/^https?:/,""),e.onSuccess&&(t.onload=e.onSuccess),e.onError&&(t.onerror=function(){var n=new r("Transport error code: XDomainRequest");n.request=t,e.onError(n)})),t.open("POST",n,!0),t.send(D(e.data))}function E(e,n){return!!(!!e^!!n)}function O(e,n){return F(e)&&F(n)}function F(e){return void 0===e}function M(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0;return("x"===e?n:3&n|8).toString(16)})}function D(e){return(JSON.stringify||function n(e){var t=void 0===e?"undefined":a(e);if("object"!==t||null===e)return"string"===t&&(e='"'+e+'"'),String(e);var r,o,i=[],u=e&&e.constructor===Array;for(r in e)o=e[r],t=void 0===o?"undefined":a(o),"string"===t?o='"'+o+'"':"object"===t&&null!==o&&(o=n(o)),i.push((u?"":'"'+r+'":')+String(o));return(u?"[":"{")+String(i)+(u?"]":"}")})(e)}function _(e,n){return n?(q(n,function(n,t){e[n]=t}),e):e}function q(e,n){var t,r;if("function"==typeof n)if(e.length){if(r=e.length)for(t=0;t<r;t++)n.call(null,t,e[t])}else for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.call(null,t,e[t])}function A(){return+new Date}if(this instanceof o==!1)return new o(e,n);if(!e)throw new r("All I want is a public DSN string");var J=o._instanceMap=o._instanceMap||{};if(J[e])return n&&J[e].config(e,n),J[e];J[e]=this;var B=this,H=A(),N=[],R=null,I=null,X=null,$=0,z=null,L=null,T={logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":c.userAgent},url:u.location.href,referrer:u.referrer},sdk:{name:"@kakao/jackdaw-js",version:"1.0.5"},level:"error",maxBreadcrumbs:100,debug:!1},U=j;this.config=t,this.addBreadcrumb=function(e){var n=_({timestamp:A()/1e3},e);return N.push(n),N.length>T.maxBreadcrumbs&&N.splice(0,N.length-T.maxBreadcrumbs),this},this.captureMessage=function(e,n,t){var o=U;if(!e)throw new r("Need something to send message");return n&&"function"==typeof n.transport&&(o=n.transport,delete n.transport),x(_({message:e+""},n||{}),t,o),this},this.captureException=function(e,n,t){var o=U;if(!e)throw new r("Need something to send exception or error");if(n&&"function"==typeof n.transport&&(o=n.transport,delete n.transport),e.error&&(e=e.error),s(e)||l(e)){var a=e.name||(s(e)?"DOMError":"DOMException"),i=e.message?a+": "+e.message:a;return this.captureMessage(i,_(n,{stacktrace:!0,trimHeadFrames:n.trimHeadFrames+1}))}X=e,n=_({trimHeadFrames:0},n||{}),n.level=n.level||"error";var u=h(e),c=y(u);return x(b(u.name,u.message,u.url,u.lineno,c,n),t,o),this},this.lastException=function(){return X},this.lastData=function(){return I},this.lastEventId=function(){return R},t(e,n)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},u=i.document,c=i.navigator;i.Jackdaw||(i.Jackdaw=o),r.prototype=new Error,r.prototype.constructor=r,e.exports=o}])});
//# sourceMappingURL=jackdaw.min.js.map
