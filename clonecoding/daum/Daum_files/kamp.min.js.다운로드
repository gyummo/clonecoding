var Kamp=function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=function(t){return t&&t.Math===Math&&t},n=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||r("object"==typeof e&&e)||function(){return this}()||Function("return this")(),i={},o=function(t){try{return!!t()}catch(t){return!0}},a=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),s=!o((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),u=s,l=Function.prototype.call,c=u?l.bind(l):function(){return l.apply(l,arguments)},h={},f={}.propertyIsEnumerable,d=Object.getOwnPropertyDescriptor,p=d&&!f.call({1:2},1);h.f=p?function(t){var e=d(this,t);return!!e&&e.enumerable}:f;var g,m,y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v=s,E=Function.prototype,w=E.call,T=v&&E.bind.bind(w,w),b=v?T:function(t){return function(){return w.apply(t,arguments)}},S=b,A=S({}.toString),O=S("".slice),R=function(t){return O(A(t),8,-1)},P=o,D=R,L=Object,_=b("".split),I=P((function(){return!L("z").propertyIsEnumerable(0)}))?function(t){return"String"===D(t)?_(t,""):L(t)}:L,k=function(t){return null==t},x=k,C=TypeError,M=function(t){if(x(t))throw new C("Can't call method on "+t);return t},U=I,N=M,B=function(t){return U(N(t))},V="object"==typeof document&&document.all,j={all:V,IS_HTMLDDA:void 0===V&&void 0!==V},F=j.all,H=j.IS_HTMLDDA?function(t){return"function"==typeof t||t===F}:function(t){return"function"==typeof t},K=H,Y=j.all,q=j.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:K(t)||t===Y}:function(t){return"object"==typeof t?null!==t:K(t)},G=n,W=H,z=function(t,e){return arguments.length<2?(r=G[t],W(r)?r:void 0):G[t]&&G[t][e];var r},X=b({}.isPrototypeOf),J="undefined"!=typeof navigator&&String(navigator.userAgent)||"",$=n,Q=J,Z=$.process,tt=$.Deno,et=Z&&Z.versions||tt&&tt.version,rt=et&&et.v8;rt&&(m=(g=rt.split("."))[0]>0&&g[0]<4?1:+(g[0]+g[1])),!m&&Q&&(!(g=Q.match(/Edge\/(\d+)/))||g[1]>=74)&&(g=Q.match(/Chrome\/(\d+)/))&&(m=+g[1]);var nt=m,it=nt,ot=o,at=n.String,st=!!Object.getOwnPropertySymbols&&!ot((function(){var t=Symbol("symbol detection");return!at(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&it&&it<41})),ut=st&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,lt=z,ct=H,ht=X,ft=Object,dt=ut?function(t){return"symbol"==typeof t}:function(t){var e=lt("Symbol");return ct(e)&&ht(e.prototype,ft(t))},pt=String,gt=function(t){try{return pt(t)}catch(t){return"Object"}},mt=H,yt=gt,vt=TypeError,Et=function(t){if(mt(t))return t;throw new vt(yt(t)+" is not a function")},wt=Et,Tt=k,bt=function(t,e){var r=t[e];return Tt(r)?void 0:wt(r)},St=c,At=H,Ot=q,Rt=TypeError,Pt={exports:{}},Dt=n,Lt=Object.defineProperty,_t=function(t,e){try{Lt(Dt,t,{value:e,configurable:!0,writable:!0})}catch(r){Dt[t]=e}return e},It=_t,kt="__core-js_shared__",xt=n[kt]||It(kt,{}),Ct=xt;(Pt.exports=function(t,e){return Ct[t]||(Ct[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.34.0",mode:"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.34.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Mt=Pt.exports,Ut=M,Nt=Object,Bt=function(t){return Nt(Ut(t))},Vt=Bt,jt=b({}.hasOwnProperty),Ft=Object.hasOwn||function(t,e){return jt(Vt(t),e)},Ht=b,Kt=0,Yt=Math.random(),qt=Ht(1..toString),Gt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+qt(++Kt+Yt,36)},Wt=Mt,zt=Ft,Xt=Gt,Jt=st,$t=ut,Qt=n.Symbol,Zt=Wt("wks"),te=$t?Qt.for||Qt:Qt&&Qt.withoutSetter||Xt,ee=function(t){return zt(Zt,t)||(Zt[t]=Jt&&zt(Qt,t)?Qt[t]:te("Symbol."+t)),Zt[t]},re=c,ne=q,ie=dt,oe=bt,ae=function(t,e){var r,n;if("string"===e&&At(r=t.toString)&&!Ot(n=St(r,t)))return n;if(At(r=t.valueOf)&&!Ot(n=St(r,t)))return n;if("string"!==e&&At(r=t.toString)&&!Ot(n=St(r,t)))return n;throw new Rt("Can't convert object to primitive value")},se=TypeError,ue=ee("toPrimitive"),le=function(t,e){if(!ne(t)||ie(t))return t;var r,n=oe(t,ue);if(n){if(void 0===e&&(e="default"),r=re(n,t,e),!ne(r)||ie(r))return r;throw new se("Can't convert object to primitive value")}return void 0===e&&(e="number"),ae(t,e)},ce=le,he=dt,fe=function(t){var e=ce(t,"string");return he(e)?e:e+""},de=q,pe=n.document,ge=de(pe)&&de(pe.createElement),me=function(t){return ge?pe.createElement(t):{}},ye=me,ve=!a&&!o((function(){return 7!==Object.defineProperty(ye("div"),"a",{get:function(){return 7}}).a})),Ee=a,we=c,Te=h,be=y,Se=B,Ae=fe,Oe=Ft,Re=ve,Pe=Object.getOwnPropertyDescriptor;i.f=Ee?Pe:function(t,e){if(t=Se(t),e=Ae(e),Re)try{return Pe(t,e)}catch(t){}if(Oe(t,e))return be(!we(Te.f,t,e),t[e])};var De={},Le=a&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),_e=q,Ie=String,ke=TypeError,xe=function(t){if(_e(t))return t;throw new ke(Ie(t)+" is not an object")},Ce=a,Me=ve,Ue=Le,Ne=xe,Be=fe,Ve=TypeError,je=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor,He="enumerable",Ke="configurable",Ye="writable";De.f=Ce?Ue?function(t,e,r){if(Ne(t),e=Be(e),Ne(r),"function"==typeof t&&"prototype"===e&&"value"in r&&Ye in r&&!r[Ye]){var n=Fe(t,e);n&&n[Ye]&&(t[e]=r.value,r={configurable:Ke in r?r[Ke]:n[Ke],enumerable:He in r?r[He]:n[He],writable:!1})}return je(t,e,r)}:je:function(t,e,r){if(Ne(t),e=Be(e),Ne(r),Me)try{return je(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new Ve("Accessors not supported");return"value"in r&&(t[e]=r.value),t};var qe=De,Ge=y,We=a?function(t,e,r){return qe.f(t,e,Ge(1,r))}:function(t,e,r){return t[e]=r,t},ze={exports:{}},Xe=a,Je=Ft,$e=Function.prototype,Qe=Xe&&Object.getOwnPropertyDescriptor,Ze=Je($e,"name"),tr={EXISTS:Ze,PROPER:Ze&&"something"===function(){}.name,CONFIGURABLE:Ze&&(!Xe||Xe&&Qe($e,"name").configurable)},er=H,rr=xt,nr=b(Function.toString);er(rr.inspectSource)||(rr.inspectSource=function(t){return nr(t)});var ir,or,ar,sr=rr.inspectSource,ur=H,lr=n.WeakMap,cr=ur(lr)&&/native code/.test(String(lr)),hr=Gt,fr=Mt("keys"),dr=function(t){return fr[t]||(fr[t]=hr(t))},pr={},gr=cr,mr=n,yr=q,vr=We,Er=Ft,wr=xt,Tr=dr,br=pr,Sr="Object already initialized",Ar=mr.TypeError,Or=mr.WeakMap;if(gr||wr.state){var Rr=wr.state||(wr.state=new Or);Rr.get=Rr.get,Rr.has=Rr.has,Rr.set=Rr.set,ir=function(t,e){if(Rr.has(t))throw new Ar(Sr);return e.facade=t,Rr.set(t,e),e},or=function(t){return Rr.get(t)||{}},ar=function(t){return Rr.has(t)}}else{var Pr=Tr("state");br[Pr]=!0,ir=function(t,e){if(Er(t,Pr))throw new Ar(Sr);return e.facade=t,vr(t,Pr,e),e},or=function(t){return Er(t,Pr)?t[Pr]:{}},ar=function(t){return Er(t,Pr)}}var Dr={set:ir,get:or,has:ar,enforce:function(t){return ar(t)?or(t):ir(t,{})},getterFor:function(t){return function(e){var r;if(!yr(e)||(r=or(e)).type!==t)throw new Ar("Incompatible receiver, "+t+" required");return r}}},Lr=b,_r=o,Ir=H,kr=Ft,xr=a,Cr=tr.CONFIGURABLE,Mr=sr,Ur=Dr.enforce,Nr=Dr.get,Br=String,Vr=Object.defineProperty,jr=Lr("".slice),Fr=Lr("".replace),Hr=Lr([].join),Kr=xr&&!_r((function(){return 8!==Vr((function(){}),"length",{value:8}).length})),Yr=String(String).split("String"),qr=ze.exports=function(t,e,r){"Symbol("===jr(Br(e),0,7)&&(e="["+Fr(Br(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!kr(t,"name")||Cr&&t.name!==e)&&(xr?Vr(t,"name",{value:e,configurable:!0}):t.name=e),Kr&&r&&kr(r,"arity")&&t.length!==r.arity&&Vr(t,"length",{value:r.arity});try{r&&kr(r,"constructor")&&r.constructor?xr&&Vr(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=Ur(t);return kr(n,"source")||(n.source=Hr(Yr,"string"==typeof e?e:"")),t};Function.prototype.toString=qr((function(){return Ir(this)&&Nr(this).source||Mr(this)}),"toString");var Gr=ze.exports,Wr=H,zr=De,Xr=Gr,Jr=_t,$r=function(t,e,r,n){n||(n={});var i=n.enumerable,o=void 0!==n.name?n.name:e;if(Wr(r)&&Xr(r,o,n),n.global)i?t[e]=r:Jr(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=r:zr.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t},Qr={},Zr=Math.ceil,tn=Math.floor,en=Math.trunc||function(t){var e=+t;return(e>0?tn:Zr)(e)},rn=function(t){var e=+t;return e!=e||0===e?0:en(e)},nn=rn,on=Math.max,an=Math.min,sn=function(t,e){var r=nn(t);return r<0?on(r+e,0):an(r,e)},un=rn,ln=Math.min,cn=function(t){return t>0?ln(un(t),9007199254740991):0},hn=cn,fn=function(t){return hn(t.length)},dn=B,pn=sn,gn=fn,mn=function(t){return function(e,r,n){var i,o=dn(e),a=gn(o),s=pn(n,a);if(t&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===r)return t||s||0;return!t&&-1}},yn={includes:mn(!0),indexOf:mn(!1)},vn=Ft,En=B,wn=yn.indexOf,Tn=pr,bn=b([].push),Sn=function(t,e){var r,n=En(t),i=0,o=[];for(r in n)!vn(Tn,r)&&vn(n,r)&&bn(o,r);for(;e.length>i;)vn(n,r=e[i++])&&(~wn(o,r)||bn(o,r));return o},An=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],On=Sn,Rn=An.concat("length","prototype");Qr.f=Object.getOwnPropertyNames||function(t){return On(t,Rn)};var Pn={};Pn.f=Object.getOwnPropertySymbols;var Dn=z,Ln=Qr,_n=Pn,In=xe,kn=b([].concat),xn=Dn("Reflect","ownKeys")||function(t){var e=Ln.f(In(t)),r=_n.f;return r?kn(e,r(t)):e},Cn=Ft,Mn=xn,Un=i,Nn=De,Bn=o,Vn=H,jn=/#|\.prototype\./,Fn=function(t,e){var r=Kn[Hn(t)];return r===qn||r!==Yn&&(Vn(e)?Bn(e):!!e)},Hn=Fn.normalize=function(t){return String(t).replace(jn,".").toLowerCase()},Kn=Fn.data={},Yn=Fn.NATIVE="N",qn=Fn.POLYFILL="P",Gn=Fn,Wn=n,zn=i.f,Xn=We,Jn=$r,$n=_t,Qn=function(t,e,r){for(var n=Mn(e),i=Nn.f,o=Un.f,a=0;a<n.length;a++){var s=n[a];Cn(t,s)||r&&Cn(r,s)||i(t,s,o(e,s))}},Zn=Gn,ti=function(t,e){var r,n,i,o,a,s=t.target,u=t.global,l=t.stat;if(r=u?Wn:l?Wn[s]||$n(s,{}):(Wn[s]||{}).prototype)for(n in e){if(o=e[n],i=t.dontCallGetSet?(a=zn(r,n))&&a.value:r[n],!Zn(u?n:s+(l?".":"#")+n,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Qn(o,i)}(t.sham||i&&i.sham)&&Xn(o,"sham",!0),Jn(r,n,o,t)}},ei={};ei[ee("toStringTag")]="z";var ri="[object z]"===String(ei),ni=H,ii=R,oi=ee("toStringTag"),ai=Object,si="Arguments"===ii(function(){return arguments}()),ui=ri?ii:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=ai(t),oi))?r:si?ii(e):"Object"===(n=ii(e))&&ni(e.callee)?"Arguments":n},li=ui,ci=String,hi=function(t){if("Symbol"===li(t))throw new TypeError("Cannot convert a Symbol value to a string");return ci(t)},fi=xe,di=o,pi=n.RegExp,gi=di((function(){var t=pi("a","y");return t.lastIndex=2,null!==t.exec("abcd")})),mi=gi||di((function(){return!pi("a","y").sticky})),yi={BROKEN_CARET:gi||di((function(){var t=pi("^r","gy");return t.lastIndex=2,null!==t.exec("str")})),MISSED_STICKY:mi,UNSUPPORTED_Y:gi},vi={},Ei=Sn,wi=An,Ti=Object.keys||function(t){return Ei(t,wi)},bi=a,Si=Le,Ai=De,Oi=xe,Ri=B,Pi=Ti;vi.f=bi&&!Si?Object.defineProperties:function(t,e){Oi(t);for(var r,n=Ri(e),i=Pi(e),o=i.length,a=0;o>a;)Ai.f(t,r=i[a++],n[r]);return t};var Di,Li=z("document","documentElement"),_i=xe,Ii=vi,ki=An,xi=pr,Ci=Li,Mi=me,Ui="prototype",Ni="script",Bi=dr("IE_PROTO"),Vi=function(){},ji=function(t){return"<"+Ni+">"+t+"</"+Ni+">"},Fi=function(t){t.write(ji("")),t.close();var e=t.parentWindow.Object;return t=null,e},Hi=function(){try{Di=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;Hi="undefined"!=typeof document?document.domain&&Di?Fi(Di):(e=Mi("iframe"),r="java"+Ni+":",e.style.display="none",Ci.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(ji("document.F=Object")),t.close(),t.F):Fi(Di);for(var n=ki.length;n--;)delete Hi[Ui][ki[n]];return Hi()};xi[Bi]=!0;var Ki,Yi,qi=Object.create||function(t,e){var r;return null!==t?(Vi[Ui]=_i(t),r=new Vi,Vi[Ui]=null,r[Bi]=t):r=Hi(),void 0===e?r:Ii.f(r,e)},Gi=o,Wi=n.RegExp,zi=Gi((function(){var t=Wi(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)})),Xi=o,Ji=n.RegExp,$i=Xi((function(){var t=Ji("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Qi=c,Zi=b,to=hi,eo=function(){var t=fi(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},ro=yi,no=qi,io=Dr.get,oo=zi,ao=$i,so=Mt("native-string-replace",String.prototype.replace),uo=RegExp.prototype.exec,lo=uo,co=Zi("".charAt),ho=Zi("".indexOf),fo=Zi("".replace),po=Zi("".slice),go=(Yi=/b*/g,Qi(uo,Ki=/a/,"a"),Qi(uo,Yi,"a"),0!==Ki.lastIndex||0!==Yi.lastIndex),mo=ro.BROKEN_CARET,yo=void 0!==/()??/.exec("")[1];(go||yo||mo||oo||ao)&&(lo=function(t){var e,r,n,i,o,a,s,u=this,l=io(u),c=to(t),h=l.raw;if(h)return h.lastIndex=u.lastIndex,e=Qi(lo,h,c),u.lastIndex=h.lastIndex,e;var f=l.groups,d=mo&&u.sticky,p=Qi(eo,u),g=u.source,m=0,y=c;if(d&&(p=fo(p,"y",""),-1===ho(p,"g")&&(p+="g"),y=po(c,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==co(c,u.lastIndex-1))&&(g="(?: "+g+")",y=" "+y,m++),r=new RegExp("^(?:"+g+")",p)),yo&&(r=new RegExp("^"+g+"$(?!\\s)",p)),go&&(n=u.lastIndex),i=Qi(uo,d?r:u,y),d?i?(i.input=po(i.input,m),i[0]=po(i[0],m),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:go&&i&&(u.lastIndex=u.global?i.index+i[0].length:n),yo&&i&&i.length>1&&Qi(so,i[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&f)for(i.groups=a=no(null),o=0;o<f.length;o++)a[(s=f[o])[0]]=i[s[1]];return i});var vo=lo;ti({target:"RegExp",proto:!0,forced:/./.exec!==vo},{exec:vo});var Eo=s,wo=Function.prototype,To=wo.apply,bo=wo.call,So="object"==typeof Reflect&&Reflect.apply||(Eo?bo.bind(To):function(){return bo.apply(To,arguments)}),Ao=R,Oo=b,Ro=function(t){if("Function"===Ao(t))return Oo(t)},Po=Ro,Do=$r,Lo=vo,_o=o,Io=ee,ko=We,xo=Io("species"),Co=RegExp.prototype,Mo=function(t,e,r,n){var i=Io(t),o=!_o((function(){var e={};return e[i]=function(){return 7},7!==""[t](e)})),a=o&&!_o((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[xo]=function(){return r},r.flags="",r[i]=/./[i]),r.exec=function(){return e=!0,null},r[i](""),!e}));if(!o||!a||r){var s=Po(/./[i]),u=e(i,""[t],(function(t,e,r,n,i){var a=Po(t),u=e.exec;return u===Lo||u===Co.exec?o&&!i?{done:!0,value:s(e,r,n)}:{done:!0,value:a(r,e,n)}:{done:!1}}));Do(String.prototype,t,u[0]),Do(Co,i,u[1])}n&&ko(Co[i],"sham",!0)},Uo=q,No=R,Bo=ee("match"),Vo=b,jo=o,Fo=H,Ho=ui,Ko=sr,Yo=function(){},qo=[],Go=z("Reflect","construct"),Wo=/^\s*(?:class|function)\b/,zo=Vo(Wo.exec),Xo=!Wo.test(Yo),Jo=function(t){if(!Fo(t))return!1;try{return Go(Yo,qo,t),!0}catch(t){return!1}},$o=function(t){if(!Fo(t))return!1;switch(Ho(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Xo||!!zo(Wo,Ko(t))}catch(t){return!0}};$o.sham=!0;var Qo=!Go||jo((function(){var t;return Jo(Jo.call)||!Jo(Object)||!Jo((function(){t=!0}))||t}))?$o:Jo,Zo=Qo,ta=gt,ea=TypeError,ra=function(t){if(Zo(t))return t;throw new ea(ta(t)+" is not a constructor")},na=xe,ia=ra,oa=k,aa=ee("species"),sa=function(t,e){var r,n=na(t).constructor;return void 0===n||oa(r=na(n)[aa])?e:ia(r)},ua=b,la=rn,ca=hi,ha=M,fa=ua("".charAt),da=ua("".charCodeAt),pa=ua("".slice),ga=function(t){return function(e,r){var n,i,o=ca(ha(e)),a=la(r),s=o.length;return a<0||a>=s?t?"":void 0:(n=da(o,a))<55296||n>56319||a+1===s||(i=da(o,a+1))<56320||i>57343?t?fa(o,a):n:t?pa(o,a,a+2):i-56320+(n-55296<<10)+65536}},ma={codeAt:ga(!1),charAt:ga(!0)},ya=ma.charAt,va=function(t,e,r){return e+(r?ya(t,e).length:1)},Ea=fe,wa=De,Ta=y,ba=function(t,e,r){var n=Ea(e);n in t?wa.f(t,n,Ta(0,r)):t[n]=r},Sa=sn,Aa=fn,Oa=ba,Ra=Array,Pa=Math.max,Da=function(t,e,r){for(var n=Aa(t),i=Sa(e,n),o=Sa(void 0===r?n:r,n),a=Ra(Pa(o-i,0)),s=0;i<o;i++,s++)Oa(a,s,t[i]);return a.length=s,a},La=c,_a=xe,Ia=H,ka=R,xa=vo,Ca=TypeError,Ma=function(t,e){var r=t.exec;if(Ia(r)){var n=La(r,t,e);return null!==n&&_a(n),n}if("RegExp"===ka(t))return La(xa,t,e);throw new Ca("RegExp#exec called on incompatible receiver")},Ua=So,Na=c,Ba=b,Va=Mo,ja=xe,Fa=k,Ha=function(t){var e;return Uo(t)&&(void 0!==(e=t[Bo])?!!e:"RegExp"===No(t))},Ka=M,Ya=sa,qa=va,Ga=cn,Wa=hi,za=bt,Xa=Da,Ja=Ma,$a=vo,Qa=o,Za=yi.UNSUPPORTED_Y,ts=4294967295,es=Math.min,rs=[].push,ns=Ba(/./.exec),is=Ba(rs),os=Ba("".slice),as=!Qa((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));function ss(t){let e=/(dolfin)[ /]([\w.]+)/.exec(t)||/(edge)[ /]([\w.]+)/.exec(t)||/(chrome)[ /]([\w.]+)/.exec(t)||/(tizen)[ /]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ /]([\w.]+)/.exec(t)||/(webkit)(?:.*version)?[ /]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(t)||["","unknown"];return"webkit"===e[1]?e=/(iphone|ipad|ipod)[\S\s]*os ([\w._-]+) like/.exec(t)||/(android)[ /]([\w._-]+);/.exec(t)||[e[0],"safari",e[2]]:"mozilla"===e[1]&&(/trident/.test(t)?e[1]="msie":e[1]="firefox"),{name:e[1],version:us(e[2])}}function us(t){var e=t?t.split(/\.|-|_/):["0","0","0"];return{info:e.join("."),major:e[0]||"0",minor:e[1]||"0",patch:e[2]||"0"}}function ls(t){return!cs(t)&&hs(t)}Va("split",(function(t,e,r){var n;return n="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=Wa(Ka(this)),i=void 0===r?ts:r>>>0;if(0===i)return[];if(void 0===t)return[n];if(!Ha(t))return Na(e,n,t,i);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,l+"g");(o=Na($a,h,n))&&!((a=h.lastIndex)>c&&(is(u,os(n,c,o.index)),o.length>1&&o.index<n.length&&Ua(rs,u,Xa(o,1)),s=o[0].length,c=a,u.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===n.length?!s&&ns(h,"")||is(u,""):is(u,os(n,c)),u.length>i?Xa(u,0,i):u}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:Na(e,this,t,r)}:e,[function(e,r){var i=Ka(this),o=Fa(e)?void 0:za(e,t);return o?Na(o,e,i,r):Na(n,Wa(i),e,r)},function(t,i){var o=ja(this),a=Wa(t),s=r(n,o,a,i,n!==e);if(s.done)return s.value;var u=Ya(o,RegExp),l=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Za?"g":"y"),h=new u(Za?"^(?:"+o.source+")":o,c),f=void 0===i?ts:i>>>0;if(0===f)return[];if(0===a.length)return null===Ja(h,a)?[a]:[];for(var d=0,p=0,g=[];p<a.length;){h.lastIndex=Za?0:p;var m,y=Ja(h,Za?os(a,p):a);if(null===y||(m=es(Ga(h.lastIndex+(Za?p:0)),a.length))===d)p=qa(a,p,l);else{if(is(g,os(a,d,p)),g.length===f)return g;for(var v=1;v<=y.length-1;v++)if(is(g,y[v]),g.length===f)return g;p=d=m}}return is(g,os(a,d)),g}]}),!as,Za);const cs=t=>/linux|windows (nt|98)|macintosh|cros/.test(t)&&!/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/.test(t),hs=t=>/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/.test(t);function fs(t){var e=/(iphone|ipad|ipod)[\S\s]*os ([\w._-]+) like/.exec(t)||/(windows)(?: nt | phone(?: os){0,1} | )([\w._-]+)/.exec(t)||/(android)[ /]([\w._-]+);/.exec(t)||!!/android/.test(t)&&["","android","0.0.0"]||!!/(windows)/.test(t)&&["","windows","0.0.0"]||/(mac) os x ([\w._-]+)/.exec(t)||/(tizen)[ /]([\w._-]+);/.exec(t)||!!/(linux)/.test(t)&&["","linux","0.0.0"]||!!/webos/.test(t)&&["","webos","0.0.0"]||/(cros)(?:\s[\w]+\s)([\d._-]+)/.exec(t)||["","unknown","0.0.0"];return"iphone"===e[1]||"ipod"===e[1]?e[1]="ios":"ipad"===e[1]?e[1]="ipados":"mac"===e[1]?e[1]="macos":"windows"===e[1]&&"98"===e[2]&&(e[2]="0.98.0"),{name:e[1],version:us(e[2])}}const ds=[{keyward:"Microsoft Edge",name:"chrome"},{keyward:"Google Chrome",name:"chrome"},{keyward:"Chromium",name:"chrome"}],ps=function(t){for(let e=0,r=ds.length;e<r;e+=1){let r=ds[e];for(let e=0,n=t.length;e<n;e+=1)if(t[e].brand.indexOf(r.keyward)>-1)return{name:r.name,version:us(t[e].version)}}return{name:"unknown",version:us("0")}},gs=function(t){var e=function(t){return t?t.toLowerCase():"undefined"!=typeof window&&window.navigator&&"string"==typeof window.navigator.userAgent?window.navigator.userAgent.toLowerCase():""}(t);return{fromUAHint:!1,ua:e,browser:ss(e),isMobile:ls(e),os:fs(e)}},ms=function(t){if(!(t||window&&window.navigator))throw new Error;return t?gs(t):window.navigator.userAgentData&&window.navigator.userAgentData.platform?function(){const t=window.navigator.userAgentData;return{fromUAHint:!0,ua:"",browser:ps(t.brands),isMobile:t.mobile,os:(e=t.platform,{name:e.toLowerCase(),version:us("0.0.0")})};var e}():gs()}();var ys=ee,vs=qi,Es=De.f,ws=ys("unscopables"),Ts=Array.prototype;void 0===Ts[ws]&&Es(Ts,ws,{configurable:!0,value:vs(null)});var bs,Ss,As,Os=function(t){Ts[ws][t]=!0},Rs={},Ps=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Ds=Ft,Ls=H,_s=Bt,Is=Ps,ks=dr("IE_PROTO"),xs=Object,Cs=xs.prototype,Ms=Is?xs.getPrototypeOf:function(t){var e=_s(t);if(Ds(e,ks))return e[ks];var r=e.constructor;return Ls(r)&&e instanceof r?r.prototype:e instanceof xs?Cs:null},Us=o,Ns=H,Bs=q,Vs=Ms,js=$r,Fs=ee("iterator"),Hs=!1;[].keys&&("next"in(As=[].keys())?(Ss=Vs(Vs(As)))!==Object.prototype&&(bs=Ss):Hs=!0);var Ks=!Bs(bs)||Us((function(){var t={};return bs[Fs].call(t)!==t}));Ks&&(bs={}),Ns(bs[Fs])||js(bs,Fs,(function(){return this}));var Ys={IteratorPrototype:bs,BUGGY_SAFARI_ITERATORS:Hs},qs=De.f,Gs=Ft,Ws=ee("toStringTag"),zs=function(t,e,r){t&&!r&&(t=t.prototype),t&&!Gs(t,Ws)&&qs(t,Ws,{configurable:!0,value:e})},Xs=Ys.IteratorPrototype,Js=qi,$s=y,Qs=zs,Zs=Rs,tu=function(){return this},eu=function(t,e,r,n){var i=e+" Iterator";return t.prototype=Js(Xs,{next:$s(+!n,r)}),Qs(t,i,!1),Zs[i]=tu,t},ru=b,nu=Et,iu=H,ou=String,au=TypeError,su=function(t,e,r){try{return ru(nu(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}},uu=xe,lu=function(t){if("object"==typeof t||iu(t))return t;throw new au("Can't set "+ou(t)+" as a prototype")},cu=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=su(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return uu(r),lu(n),e?t(r,n):r.__proto__=n,r}}():void 0),hu=ti,fu=c,du=H,pu=eu,gu=Ms,mu=cu,yu=zs,vu=We,Eu=$r,wu=Rs,Tu=tr.PROPER,bu=tr.CONFIGURABLE,Su=Ys.IteratorPrototype,Au=Ys.BUGGY_SAFARI_ITERATORS,Ou=ee("iterator"),Ru="keys",Pu="values",Du="entries",Lu=function(){return this},_u=function(t,e,r,n,i,o,a){pu(r,e,n);var s,u,l,c=function(t){if(t===i&&g)return g;if(!Au&&t&&t in d)return d[t];switch(t){case Ru:case Pu:case Du:return function(){return new r(this,t)}}return function(){return new r(this)}},h=e+" Iterator",f=!1,d=t.prototype,p=d[Ou]||d["@@iterator"]||i&&d[i],g=!Au&&p||c(i),m="Array"===e&&d.entries||p;if(m&&(s=gu(m.call(new t)))!==Object.prototype&&s.next&&(gu(s)!==Su&&(mu?mu(s,Su):du(s[Ou])||Eu(s,Ou,Lu)),yu(s,h,!0)),Tu&&i===Pu&&p&&p.name!==Pu&&(bu?vu(d,"name",Pu):(f=!0,g=function(){return fu(p,this)})),i)if(u={values:c(Pu),keys:o?g:c(Ru),entries:c(Du)},a)for(l in u)(Au||f||!(l in d))&&Eu(d,l,u[l]);else hu({target:e,proto:!0,forced:Au||f},u);return d[Ou]!==g&&Eu(d,Ou,g,{name:i}),wu[e]=g,u},Iu=function(t,e){return{value:t,done:e}},ku=B,xu=Os,Cu=Rs,Mu=Dr,Uu=De.f,Nu=_u,Bu=Iu,Vu=a,ju="Array Iterator",Fu=Mu.set,Hu=Mu.getterFor(ju),Ku=Nu(Array,"Array",(function(t,e){Fu(this,{type:ju,target:ku(t),index:0,kind:e})}),(function(){var t=Hu(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=void 0,Bu(void 0,!0);switch(t.kind){case"keys":return Bu(r,!1);case"values":return Bu(e[r],!1)}return Bu([r,e[r]],!1)}),"values"),Yu=Cu.Arguments=Cu.Array;if(xu("keys"),xu("values"),xu("entries"),Vu&&"values"!==Yu.name)try{Uu(Yu,"name",{value:"values"})}catch(t){}var qu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Gu=me("span").classList,Wu=Gu&&Gu.constructor&&Gu.constructor.prototype,zu=Wu===Object.prototype?void 0:Wu,Xu=n,Ju=qu,$u=zu,Qu=Ku,Zu=We,tl=zs,el=ee("iterator"),rl=Qu.values,nl=function(t,e){if(t){if(t[el]!==rl)try{Zu(t,el,rl)}catch(e){t[el]=rl}if(tl(t,e,!0),Ju[e])for(var r in Qu)if(t[r]!==Qu[r])try{Zu(t,r,Qu[r])}catch(e){t[r]=Qu[r]}}};for(var il in Ju)nl(Xu[il]&&Xu[il].prototype,il);nl($u,"DOMTokenList");var ol;!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warn=2]="warn",t[t.info=3]="info",t[t.log=4]="log"}(ol||(ol={}));const al=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.muteMode=!1,this.level=ol.warn,this.legacy=!1,window.console||(this.muteMode=!0),this.level=t,"msie"===ms.browser.name&&(this.legacy=!0)}setLevel(t){if(t<ol.off||t>ol.log)throw new Error("level is only allowed 0 to 4.");this.level=t}error(t){if(!(this.muteMode||this.level<1)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.legacy?console.error(t,...r):console.error("%c"+t,"color:#e30425;",...r)}}warn(t){if(!(this.muteMode||this.level<2)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.legacy?console.warn(t,...r):console.warn("%c"+t,"color:#f9a825;",...r)}}info(t){if(!(this.muteMode||this.level<3)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.legacy?console.info(t,...r):console.info("%c"+t,"color:#99caeb;font-size:15px;background-color:#333;",...r)}}log(t){if(!(this.muteMode||this.level<4)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.legacy?console.log(t,...r):console.log("%c"+t,"color:#51dc89;font-size:15px;background-color:#333;",...r)}}};var sl,ul,ll=a,cl=o,hl=b,fl=Ms,dl=Ti,pl=B,gl=hl(h.f),ml=hl([].push),yl=ll&&cl((function(){var t=Object.create(null);return t[2]=2,!gl(t,2)})),vl=function(t){return function(e){for(var r,n=pl(e),i=dl(n),o=yl&&null===fl(n),a=i.length,s=0,u=[];a>s;)r=i[s++],ll&&!(o?r in n:gl(n,r))||ml(u,t?[r,n[r]]:n[r]);return u}},El={entries:vl(!0),values:vl(!1)}.values;ti({target:"Object",stat:!0},{values:function(t){return El(t)}}),function(t){t.Real="real",t.Cbt="cbt",t.Sandbox="sandbox",t.Dev="dev"}(sl||(sl={})),function(t){t.QUERY="query",t.COOKIE="cookie",t.AUTO="auto"}(ul||(ul={}));const wl={liveDelay:4,maxBufferTime:4,backBufferTime:20,lowLatencyMode:!1,autoplay:!0,currentTime:0,useNativeOnHls:!1,customAbrMode:!1,debug:!1},Tl={video:"#video",autoFiltering:!0,phase:sl.Real,authType:ul.AUTO,streaming:wl};var bl;!function(t){t.LIVE="live",t.VOD="vod"}(bl||(bl={}));const Sl={VIDEO_ABORT:"abort",VIDEO_CANPLAY:"canplay",VIDEO_CANPLAYTHROUGH:"canplaythrough",VIDEO_DURATIONCAHNGE:"durationchange",VIDEO_EMPTIED:"emptied",VIDEO_ENDED:"ended",VIDEO_ERROR:"error",VIDEO_LOADEDDATA:"loadeddata",VIDEO_LOADEDMETADATA:"loadedmetadata",VIDEO_LOADSTART:"loadstart",VIDEO_PAUSE:"pause",VIDEO_PLAY:"play",VIDEO_PLAYING:"playing",VIDEO_PROGRESS:"progress",VIDEO_RATECHANGE:"ratechange",VIDEO_SEEKED:"seeked",VIDEO_SEEKING:"seeking",VIDEO_STALLED:"stalled",VIDEO_SUSPEND:"suspend",VIDEO_TIMEUPDATE:"timeupdate",VIDEO_VOLUMECHANGE:"volumechange",VIDEO_WAITING:"waiting",VIDEO_ENTER_PIP:"enterpictureinpicture",VIDEO_LEAVE_PIP:"leavepictureinpicture"},Al=Object.assign(Object.assign(Object.assign({},Sl),{ERROR_NOTALLOWED:"NotAllowedError",ERROR_NOTSUPPORTED:"NotSupportedError",ERROR_NOTACCESS:"NotAccessError"}),{PLAY_STOP:"stop",PLAY_CLOSED:"closed",PLAY_MAYBECLOSED:"maybeclosed",PLAY_TIMEDMETADATA:"timedmetadata",PLAY_TIMEDKAMPDATA:"timedkampdata",PLAY_CHANGEDPROFILE:"changedprofile",PLAY_LOADEDKAMPDATA:"loadedkampdata",PLAY_CHANGERATIO:"changeratio"}),Ol=Object.assign(Object.assign({},Al),{KAMPSTATS:"kampstats",KAMPSTATS_DELAY:"kampdelaystats"}),Rl=Object.values(Sl),Pl="__",Dl="https://aomedia.org/emsg/ID3";var Ll=Et,_l=s,Il=Ro(Ro.bind),kl=function(t,e){return Ll(t),void 0===e?t:_l?Il(t,e):function(){return t.apply(e,arguments)}},xl=R,Cl=Array.isArray||function(t){return"Array"===xl(t)},Ml=Qo,Ul=q,Nl=ee("species"),Bl=Array,Vl=function(t){var e;return Cl(t)&&(e=t.constructor,(Ml(e)&&(e===Bl||Cl(e.prototype))||Ul(e)&&null===(e=e[Nl]))&&(e=void 0)),void 0===e?Bl:e},jl=kl,Fl=I,Hl=Bt,Kl=fn,Yl=function(t,e){return new(Vl(t))(0===e?0:e)},ql=b([].push),Gl=function(t){var e=1===t,r=2===t,n=3===t,i=4===t,o=6===t,a=7===t,s=5===t||o;return function(u,l,c,h){for(var f,d,p=Hl(u),g=Fl(p),m=Kl(g),y=jl(l,c),v=0,E=h||Yl,w=e?E(u,m):r||a?E(u,0):void 0;m>v;v++)if((s||v in g)&&(d=y(f=g[v],v,p),t))if(e)w[v]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return v;case 2:ql(w,f)}else switch(t){case 4:return!1;case 7:ql(w,f)}return o?-1:n||i?i:w}},Wl={forEach:Gl(0),map:Gl(1),filter:Gl(2),some:Gl(3),every:Gl(4),find:Gl(5),findIndex:Gl(6),filterReject:Gl(7)},zl=o,Xl=function(t,e){var r=[][t];return!!r&&zl((function(){r.call(null,e||function(){return 1},1)}))},Jl=Wl.forEach,$l=Xl("forEach")?[].forEach:function(t){return Jl(this,t,arguments.length>1?arguments[1]:void 0)},Ql=n,Zl=qu,tc=zu,ec=$l,rc=We,nc=function(t){if(t&&t.forEach!==ec)try{rc(t,"forEach",ec)}catch(e){t.forEach=ec}};for(var ic in Zl)Zl[ic]&&nc(Ql[ic]&&Ql[ic].prototype);nc(tc);var oc,ac,sc,uc,lc="process"===R(n.process),cc=Gr,hc=De,fc=function(t,e,r){return r.get&&cc(r.get,e,{getter:!0}),r.set&&cc(r.set,e,{setter:!0}),hc.f(t,e,r)},dc=z,pc=fc,gc=a,mc=ee("species"),yc=function(t){var e=dc(t);gc&&e&&!e[mc]&&pc(e,mc,{configurable:!0,get:function(){return this}})},vc=X,Ec=TypeError,wc=function(t,e){if(vc(e,t))return t;throw new Ec("Incorrect invocation")},Tc=b([].slice),bc=TypeError,Sc=function(t,e){if(t<e)throw new bc("Not enough arguments");return t},Ac=/(?:ipad|iphone|ipod).*applewebkit/i.test(J),Oc=n,Rc=So,Pc=kl,Dc=H,Lc=Ft,_c=o,Ic=Li,kc=Tc,xc=me,Cc=Sc,Mc=Ac,Uc=lc,Nc=Oc.setImmediate,Bc=Oc.clearImmediate,Vc=Oc.process,jc=Oc.Dispatch,Fc=Oc.Function,Hc=Oc.MessageChannel,Kc=Oc.String,Yc=0,qc={},Gc="onreadystatechange";_c((function(){oc=Oc.location}));var Wc=function(t){if(Lc(qc,t)){var e=qc[t];delete qc[t],e()}},zc=function(t){return function(){Wc(t)}},Xc=function(t){Wc(t.data)},Jc=function(t){Oc.postMessage(Kc(t),oc.protocol+"//"+oc.host)};Nc&&Bc||(Nc=function(t){Cc(arguments.length,1);var e=Dc(t)?t:Fc(t),r=kc(arguments,1);return qc[++Yc]=function(){Rc(e,void 0,r)},ac(Yc),Yc},Bc=function(t){delete qc[t]},Uc?ac=function(t){Vc.nextTick(zc(t))}:jc&&jc.now?ac=function(t){jc.now(zc(t))}:Hc&&!Mc?(uc=(sc=new Hc).port2,sc.port1.onmessage=Xc,ac=Pc(uc.postMessage,uc)):Oc.addEventListener&&Dc(Oc.postMessage)&&!Oc.importScripts&&oc&&"file:"!==oc.protocol&&!_c(Jc)?(ac=Jc,Oc.addEventListener("message",Xc,!1)):ac=Gc in xc("script")?function(t){Ic.appendChild(xc("script"))[Gc]=function(){Ic.removeChild(this),Wc(t)}}:function(t){setTimeout(zc(t),0)});var $c={set:Nc,clear:Bc},Qc=function(){this.head=null,this.tail=null};Qc.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var Zc,th,eh,rh,nh,ih=Qc,oh=/ipad|iphone|ipod/i.test(J)&&"undefined"!=typeof Pebble,ah=/web0s(?!.*chrome)/i.test(J),sh=n,uh=kl,lh=i.f,ch=$c.set,hh=ih,fh=Ac,dh=oh,ph=ah,gh=lc,mh=sh.MutationObserver||sh.WebKitMutationObserver,yh=sh.document,vh=sh.process,Eh=sh.Promise,wh=lh(sh,"queueMicrotask"),Th=wh&&wh.value;if(!Th){var bh=new hh,Sh=function(){var t,e;for(gh&&(t=vh.domain)&&t.exit();e=bh.get();)try{e()}catch(t){throw bh.head&&Zc(),t}t&&t.enter()};fh||gh||ph||!mh||!yh?!dh&&Eh&&Eh.resolve?((rh=Eh.resolve(void 0)).constructor=Eh,nh=uh(rh.then,rh),Zc=function(){nh(Sh)}):gh?Zc=function(){vh.nextTick(Sh)}:(ch=uh(ch,sh),Zc=function(){ch(Sh)}):(th=!0,eh=yh.createTextNode(""),new mh(Sh).observe(eh,{characterData:!0}),Zc=function(){eh.data=th=!th}),Th=function(t){bh.head||Zc(),bh.add(t)}}var Ah=Th,Oh=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Rh=n.Promise,Ph="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,Dh=!Ph&&!lc&&"object"==typeof window&&"object"==typeof document,Lh=n,_h=Rh,Ih=H,kh=Gn,xh=sr,Ch=ee,Mh=Dh,Uh=Ph,Nh=nt;_h&&_h.prototype;var Bh=Ch("species"),Vh=!1,jh=Ih(Lh.PromiseRejectionEvent),Fh=kh("Promise",(function(){var t=xh(_h),e=t!==String(_h);if(!e&&66===Nh)return!0;if(!Nh||Nh<51||!/native code/.test(t)){var r=new _h((function(t){t(1)})),n=function(t){t((function(){}),(function(){}))};if((r.constructor={})[Bh]=n,!(Vh=r.then((function(){}))instanceof n))return!0}return!e&&(Mh||Uh)&&!jh})),Hh={CONSTRUCTOR:Fh,REJECTION_EVENT:jh,SUBCLASSING:Vh},Kh={},Yh=Et,qh=TypeError,Gh=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw new qh("Bad Promise constructor");e=t,r=n})),this.resolve=Yh(e),this.reject=Yh(r)};Kh.f=function(t){return new Gh(t)};var Wh,zh,Xh,Jh=ti,$h=lc,Qh=n,Zh=c,tf=$r,ef=cu,rf=zs,nf=yc,of=Et,af=H,sf=q,uf=wc,lf=sa,cf=$c.set,hf=Ah,ff=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}},df=Oh,pf=ih,gf=Dr,mf=Rh,yf=Kh,vf="Promise",Ef=Hh.CONSTRUCTOR,wf=Hh.REJECTION_EVENT,Tf=Hh.SUBCLASSING,bf=gf.getterFor(vf),Sf=gf.set,Af=mf&&mf.prototype,Of=mf,Rf=Af,Pf=Qh.TypeError,Df=Qh.document,Lf=Qh.process,_f=yf.f,If=_f,kf=!!(Df&&Df.createEvent&&Qh.dispatchEvent),xf="unhandledrejection",Cf=function(t){var e;return!(!sf(t)||!af(e=t.then))&&e},Mf=function(t,e){var r,n,i,o=e.value,a=1===e.state,s=a?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{s?(a||(2===e.rejection&&jf(e),e.rejection=1),!0===s?r=o:(c&&c.enter(),r=s(o),c&&(c.exit(),i=!0)),r===t.promise?l(new Pf("Promise-chain cycle")):(n=Cf(r))?Zh(n,r,u,l):u(r)):l(o)}catch(t){c&&!i&&c.exit(),l(t)}},Uf=function(t,e){t.notified||(t.notified=!0,hf((function(){for(var r,n=t.reactions;r=n.get();)Mf(r,t);t.notified=!1,e&&!t.rejection&&Bf(t)})))},Nf=function(t,e,r){var n,i;kf?((n=Df.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),Qh.dispatchEvent(n)):n={promise:e,reason:r},!wf&&(i=Qh["on"+t])?i(n):t===xf&&ff("Unhandled promise rejection",r)},Bf=function(t){Zh(cf,Qh,(function(){var e,r=t.facade,n=t.value;if(Vf(t)&&(e=df((function(){$h?Lf.emit("unhandledRejection",n,r):Nf(xf,r,n)})),t.rejection=$h||Vf(t)?2:1,e.error))throw e.value}))},Vf=function(t){return 1!==t.rejection&&!t.parent},jf=function(t){Zh(cf,Qh,(function(){var e=t.facade;$h?Lf.emit("rejectionHandled",e):Nf("rejectionhandled",e,t.value)}))},Ff=function(t,e,r){return function(n){t(e,n,r)}},Hf=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,Uf(t,!0))},Kf=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new Pf("Promise can't be resolved itself");var n=Cf(e);n?hf((function(){var r={done:!1};try{Zh(n,e,Ff(Kf,r,t),Ff(Hf,r,t))}catch(e){Hf(r,e,t)}})):(t.value=e,t.state=1,Uf(t,!1))}catch(e){Hf({done:!1},e,t)}}};if(Ef&&(Rf=(Of=function(t){uf(this,Rf),of(t),Zh(Wh,this);var e=bf(this);try{t(Ff(Kf,e),Ff(Hf,e))}catch(t){Hf(e,t)}}).prototype,(Wh=function(t){Sf(this,{type:vf,done:!1,notified:!1,parent:!1,reactions:new pf,rejection:!1,state:0,value:void 0})}).prototype=tf(Rf,"then",(function(t,e){var r=bf(this),n=_f(lf(this,Of));return r.parent=!0,n.ok=!af(t)||t,n.fail=af(e)&&e,n.domain=$h?Lf.domain:void 0,0===r.state?r.reactions.add(n):hf((function(){Mf(n,r)})),n.promise})),zh=function(){var t=new Wh,e=bf(t);this.promise=t,this.resolve=Ff(Kf,e),this.reject=Ff(Hf,e)},yf.f=_f=function(t){return t===Of||undefined===t?new zh(t):If(t)},af(mf)&&Af!==Object.prototype)){Xh=Af.then,Tf||tf(Af,"then",(function(t,e){var r=this;return new Of((function(t,e){Zh(Xh,r,t,e)})).then(t,e)}),{unsafe:!0});try{delete Af.constructor}catch(t){}ef&&ef(Af,Rf)}Jh({global:!0,constructor:!0,wrap:!0,forced:Ef},{Promise:Of}),rf(Of,vf,!1),nf(vf);var Yf=Rs,qf=ee("iterator"),Gf=Array.prototype,Wf=function(t){return void 0!==t&&(Yf.Array===t||Gf[qf]===t)},zf=ui,Xf=bt,Jf=k,$f=Rs,Qf=ee("iterator"),Zf=function(t){if(!Jf(t))return Xf(t,Qf)||Xf(t,"@@iterator")||$f[zf(t)]},td=c,ed=Et,rd=xe,nd=gt,id=Zf,od=TypeError,ad=function(t,e){var r=arguments.length<2?id(t):e;if(ed(r))return rd(td(r,t));throw new od(nd(t)+" is not iterable")},sd=c,ud=xe,ld=bt,cd=function(t,e,r){var n,i;ud(t);try{if(!(n=ld(t,"return"))){if("throw"===e)throw r;return r}n=sd(n,t)}catch(t){i=!0,n=t}if("throw"===e)throw r;if(i)throw n;return ud(n),r},hd=kl,fd=c,dd=xe,pd=gt,gd=Wf,md=fn,yd=X,vd=ad,Ed=Zf,wd=cd,Td=TypeError,bd=function(t,e){this.stopped=t,this.result=e},Sd=bd.prototype,Ad=function(t,e,r){var n,i,o,a,s,u,l,c=r&&r.that,h=!(!r||!r.AS_ENTRIES),f=!(!r||!r.IS_RECORD),d=!(!r||!r.IS_ITERATOR),p=!(!r||!r.INTERRUPTED),g=hd(e,c),m=function(t){return n&&wd(n,"normal",t),new bd(!0,t)},y=function(t){return h?(dd(t),p?g(t[0],t[1],m):g(t[0],t[1])):p?g(t,m):g(t)};if(f)n=t.iterator;else if(d)n=t;else{if(!(i=Ed(t)))throw new Td(pd(t)+" is not iterable");if(gd(i)){for(o=0,a=md(t);a>o;o++)if((s=y(t[o]))&&yd(Sd,s))return s;return new bd(!1)}n=vd(t,i)}for(u=f?t.next:n.next;!(l=fd(u,n)).done;){try{s=y(l.value)}catch(t){wd(n,"throw",t)}if("object"==typeof s&&s&&yd(Sd,s))return s}return new bd(!1)},Od=ee("iterator"),Rd=!1;try{var Pd=0,Dd={next:function(){return{done:!!Pd++}},return:function(){Rd=!0}};Dd[Od]=function(){return this},Array.from(Dd,(function(){throw 2}))}catch(t){}var Ld=function(t,e){try{if(!e&&!Rd)return!1}catch(t){return!1}var r=!1;try{var n={};n[Od]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r},_d=Rh,Id=Hh.CONSTRUCTOR||!Ld((function(t){_d.all(t).then(void 0,(function(){}))})),kd=c,xd=Et,Cd=Kh,Md=Oh,Ud=Ad;ti({target:"Promise",stat:!0,forced:Id},{all:function(t){var e=this,r=Cd.f(e),n=r.resolve,i=r.reject,o=Md((function(){var r=xd(e.resolve),o=[],a=0,s=1;Ud(t,(function(t){var u=a++,l=!1;s++,kd(r,e,t).then((function(t){l||(l=!0,o[u]=t,--s||n(o))}),i)})),--s||n(o)}));return o.error&&i(o.value),r.promise}});var Nd=ti,Bd=Hh.CONSTRUCTOR,Vd=Rh,jd=z,Fd=H,Hd=$r,Kd=Vd&&Vd.prototype;if(Nd({target:"Promise",proto:!0,forced:Bd,real:!0},{catch:function(t){return this.then(void 0,t)}}),Fd(Vd)){var Yd=jd("Promise").prototype.catch;Kd.catch!==Yd&&Hd(Kd,"catch",Yd,{unsafe:!0})}var qd=c,Gd=Et,Wd=Kh,zd=Oh,Xd=Ad;ti({target:"Promise",stat:!0,forced:Id},{race:function(t){var e=this,r=Wd.f(e),n=r.reject,i=zd((function(){var i=Gd(e.resolve);Xd(t,(function(t){qd(i,e,t).then(r.resolve,n)}))}));return i.error&&n(i.value),r.promise}});var Jd=c,$d=Kh;ti({target:"Promise",stat:!0,forced:Hh.CONSTRUCTOR},{reject:function(t){var e=$d.f(this);return Jd(e.reject,void 0,t),e.promise}});var Qd=xe,Zd=q,tp=Kh,ep=ti,rp=Hh.CONSTRUCTOR,np=function(t,e){if(Qd(t),Zd(e)&&e.constructor===t)return e;var r=tp.f(t);return(0,r.resolve)(e),r.promise};function ip(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))}function op(t,e){const r=new Error(e);return r.name=t,r}z("Promise"),ep({target:"Promise",stat:!0,forced:rp},{resolve:function(t){return np(this,t)}}),"function"==typeof SuppressedError&&SuppressedError;const ap={stringify:function(t){if("string"==typeof t)return t;let e=[];for(let r in t)e.push(r+"="+encodeURIComponent(t[r]));return e.join("&")},parse:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"=";if("object"==typeof t)return t;e=e||"&",r=r||"=";let n={};return t.split(e).forEach((t=>{let[e,i]=t.split(r);n[e]=i})),n}};function sp(){}function up(t){return new Promise(((e,r)=>{!function(t){let e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sp,n=!1;"string"==typeof t&&(t={url:t});const i=function(t,i){window.clearTimeout(e),n||(n=!0,r(t,i))};if("string"!=typeof t.url)return i(op("InvalidURLError","Invalid url"));let o="string"==typeof t.method?t.method.toUpperCase():"GET",a=!1!==t.async;t.header="object"==typeof t.header?t.header:{};let s=t.data;"GET"!==o&&"application/x-www-form-urlencoded"!==t.header["Content-Type"]||(s=ap.stringify(t.data));let u=t.url;"GET"===o&&s&&(u+=(u.indexOf("?")>-1?"&":"?")+s);let l=new XMLHttpRequest;l.open(o,u,a),function(t,e){for(let r in e)"url"!==r&&"method"!==r&&"async"!==r&&"before"!==r&&"header"!==r&&(t[r]=e[r]);for(let r in e.header)t.setRequestHeader(r,e.header[r])}(l,t),t.timeout&&(e=window.setTimeout((function(){return i(op("TimeoutError","Timeout"))}),t.timeout)),l.onreadystatechange=function(){if(4===l.readyState)return l.status>=200&&l.status<300?i(null,l):i(op("fail","fail"),l)},l.onabort=function(){return i(op("FailOnabortError","fail onabort"),l)},l.onerror=function(){return i(op("FailOnerrorError","fail onerror"),l)},"GET"!==t.method&&s?l.send(s):l.send()}(t,((t,n)=>{if(t)return r({err:t,xhr:n});e(n)}))}))}function lp(t){let e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sp,n=!1;"string"==typeof t&&(t={url:t});let i=function(t,i){window.clearTimeout(e),n||(n=!0,r(t,i))};function o(){let t=1===a.width&&1===a.height;document.body.contains(a)&&document.body.removeChild(a),t?i(null,{type:"fallback"}):i(op("FailError","fail"))}t.timeout&&(e=window.setTimeout((function(){return i(op("TimeoutError","Timeout"))}),t.timeout));var a=function(t){var e=document.createElement("img");return e.setAttribute("id","pingImg"),e.style.position="absolute",e.style.bottom="0px",e.style.left="0px",e.style.width="auto",e.style.height="auto",e.style.visibility="hidden",e.onload=o,e.onerror=o,e.src=t,document.body.appendChild(e),e}(t.url);a.complete&&o()}var cp="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",hp=M,fp=hi,dp=cp,pp=b("".replace),gp=RegExp("^["+dp+"]+"),mp=RegExp("(^|[^"+dp+"])["+dp+"]+$"),yp=function(t){return function(e){var r=fp(hp(e));return 1&t&&(r=pp(r,gp,"")),2&t&&(r=pp(r,mp,"$1")),r}},vp={start:yp(1),end:yp(2),trim:yp(3)},Ep=tr.PROPER,wp=o,Tp=cp,bp=vp.trim;ti({target:"String",proto:!0,forced:function(t){return wp((function(){return!!Tp[t]()||"âÂá "!=="âÂá "[t]()||Ep&&Tp[t].name!==t}))}("trim")},{trim:function(){return bp(this)}});const Sp=["application/x-nppURL"],Ap=()=>"macos"===ms.os.name,Op=()=>!ms.isMobile&&(!Ap()||!(navigator.maxTouchPoints>0)),Rp=()=>Ap()&&"safari"===ms.browser.name,Pp=function(){return Op()&&(()=>{const{browser:t}=ms,{name:e,version:r}=t,n=parseInt(r.major,10);return"chrome"===e&&n>=53||"firefox"===e&&n>=55||"safari"===e&&n>=11||"msie"===e&&n>=11})()},Dp=t=>{let e=(new Date).getTime();return"?rprgmid="+t.rprgmid+"&pprgmid="+t.pprgmid+"&prgmid="+t.prgmid+"&uniqid="+t.uniqid+"&profileid="+t.profileid+"&ip="+t.ip+"&deploy="+(t.phase||"")+"&t="+e},Lp=t=>Cp()?"http://127.0.0.1:9091/"+t+"/index.mpd":"http://127.0.0.1:9091/"+t+"/index.m3u8",_p=Rp()?(t,e)=>{al.info("[createHlsServerGIF]",t);let r=t.pprgmid;lp("http://127.0.0.1:7283/hls/create.gif"+Dp(t),(t=>{if(t)return al.info("[createHlsServerGIF]","error",t),e(t);((t,e)=>{let r="http://127.0.0.1:9091/isstart.gif?pprgmid="+t,n=0,i=setTimeout((function t(){if(clearTimeout(i),n>40)return void e(new Error("Timeout create hls server"));n+=1;let o=(new Date).getTime();lp(r+"&t="+o,(r=>{r?i=setTimeout(t,500):setTimeout(e,50)}))}),500)})(r,(t=>(t?al.info("[createHlsServerGIF]","complete error",t):al.info("[createHlsServerGIF]","complete"),e(t,Lp(r)))))}))}:(t,e)=>{al.info("[createHlsServerXHR]",t);let r=t.pprgmid;up({url:"http://127.0.0.1:7283/hls/create"+Dp(t)}).then((()=>{((t,e)=>{let r="http://127.0.0.1:9091/isstart?pprgmid="+t,n=0,i=setTimeout((function t(){if(clearTimeout(i),n>40)return void e(new Error("Timeout create hls server"));n+=1;let o=(new Date).getTime();up({url:r+"&t="+o}).then((r=>{"true"===r.responseText.trim()?setTimeout(e,50):i=setTimeout(t,500)})).catch((r=>{n<10?i=setTimeout(t,500):e(new Error("Do not create hls server"))}))}),500)})(r,(t=>(t?al.info("[createHlsServerXHR]","complete error",t):al.info("[createHlsServerXHR]","complete"),e(t,Lp(r)))))})).catch((t=>(al.info("[createHlsServerXHR]","error",t),e(t))))},Ip=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"real";const r=(t=>{if("string"!=typeof t)throw new TypeError("source is not string");let e=t.split("?")[1];if(!e)throw new TypeError("source is not valid url");return ap.parse(e)})(t);return r.phase=e,new Promise(((t,e)=>{_p(r,(function(r,n){return r?e(r):t(n)}))}))};function kp(){return(new Date).getTime()}let xp=!1;const Cp=()=>xp,Mp=()=>Rp()?new Promise(((t,e)=>{lp({url:"http://127.0.0.1:7283/v4/hls/check.gif?t="+kp(),timeout:5e3},(function(e){return t(!e)}))})):up({url:"http://127.0.0.1:7283/version?t="+kp(),timeout:5e3}).then((t=>(xp=!0,!0))).catch((t=>up({url:"http://127.0.0.1:7283/v4/hls/check?t="+kp(),timeout:5e3}).then((t=>!0)))).catch((t=>!1));function Up(t){return new Promise(((e,r)=>setTimeout(e,t)))}var Np,Bp=gt,Vp=TypeError,jp=Da,Fp=Math.floor,Hp=function(t,e){var r=t.length,n=Fp(r/2);return r<8?Kp(t,e):Yp(t,Hp(jp(t,0,n),e),Hp(jp(t,n),e),e)},Kp=function(t,e){for(var r,n,i=t.length,o=1;o<i;){for(n=o,r=t[o];n&&e(t[n-1],r)>0;)t[n]=t[--n];n!==o++&&(t[n]=r)}return t},Yp=function(t,e,r,n){for(var i=e.length,o=r.length,a=0,s=0;a<i||s<o;)t[a+s]=a<i&&s<o?n(e[a],r[s])<=0?e[a++]:r[s++]:a<i?e[a++]:r[s++];return t},qp=Hp,Gp=J.match(/firefox\/(\d+)/i),Wp=!!Gp&&+Gp[1],zp=/MSIE|Trident/.test(J),Xp=J.match(/AppleWebKit\/(\d+)\./),Jp=!!Xp&&+Xp[1],$p=ti,Qp=b,Zp=Et,tg=Bt,eg=fn,rg=function(t,e){if(!delete t[e])throw new Vp("Cannot delete property "+Bp(e)+" of "+Bp(t))},ng=hi,ig=o,og=qp,ag=Xl,sg=Wp,ug=zp,lg=nt,cg=Jp,hg=[],fg=Qp(hg.sort),dg=Qp(hg.push),pg=ig((function(){hg.sort(void 0)})),gg=ig((function(){hg.sort(null)})),mg=ag("sort"),yg=!ig((function(){if(lg)return lg<70;if(!(sg&&sg>3)){if(ug)return!0;if(cg)return cg<603;var t,e,r,n,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)hg.push({k:e+n,v:r})}for(hg.sort((function(t,e){return e.v-t.v})),n=0;n<hg.length;n++)e=hg[n].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}}));$p({target:"Array",proto:!0,forced:pg||!gg||!mg||!yg},{sort:function(t){void 0!==t&&Zp(t);var e=tg(this);if(yg)return void 0===t?fg(e):fg(e,t);var r,n,i=[],o=eg(e);for(n=0;n<o;n++)n in e&&dg(i,e[n]);for(og(i,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:ng(e)>ng(r)?1:-1}}(t)),r=eg(i),n=0;n<r;)e[n]=i[n++];for(;n<o;)rg(e,n++);return e}});class vg{constructor(t,e,r){this.id="",this.event="",this.timestamp=0,this.data=null,Np.set(this,!1),this.id=t,this.event=e,this.timestamp=Date.now(),this.data=r}stopPropagation(){!function(t,e,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?i.call(t,r):i?i.value=r:e.set(t,r)}(this,Np,!0,"f")}isStopped(){return function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)}(this,Np,"f")}}Np=new WeakMap;let Eg=0;class wg{constructor(t){this.instanceID=t||(Eg++).toString(),this.listeners={},al.log("[instance created]",this.instanceID)}makeOptions(t){const e={once:!1,priority:0};return t&&(e.once=t.once||!1,e.priority=t.priority||0),e}on(t,e,r){let n="string"==typeof t?[t]:t;const i=this.makeOptions(r);for(let t=0,r=n.length;t<r;t++)this._addListener(n[t],e,i);return this}_addListener(t,e,r){let n=this.getListeners(t);n.push({priority:r.priority,once:r.once,listener:e}),n.sort(((t,e)=>e.priority-t.priority))}one(t,e,r){return(r=r||{}).once=!0,this.on(t,e,r)}emit(t,e){for(let r=0,n=(t="string"==typeof t?[t]:t).length;r<n;r++)this._emit(t[r],e);return this}_emit(t,e){let r=this.getListeners(t).slice(0);if(void 0!==r)for(let n=0,i=r.length;n<i;n++)try{r[n].once&&this.off(t,r[n].listener);const i=new vg(this.instanceID,t,e);if(r[n].listener(i),i.isStopped())break}catch(e){throw al.error('failed on while "'+t+'" event, caused by\r\n > '+e),e}}getListeners(t){return this.listeners=this.listeners||{},this.listeners[t]=this.listeners[t]||[],this.listeners[t]}off(t,e){if(t="string"==typeof t?[t]:t,!e){this.listeners=this.listeners||{};for(let e=0,r=t.length;e<r;e++)this.listeners[t[e]]=[];return this}for(let r=0,n=t.length;r<n;r++)this._removeListener.apply(this,[t[r],e]);return this}_removeListener(t,e){let r=this.getListeners(t);if(void 0!==r)for(let t=0,n=r.length;t<n;t++)if(r[t].listener===e){r.splice(t,1);break}return this}removeAll(){this.listeners={}}destroy(){this.removeAll(),this.instanceID=""}}var Tg=ma.charAt,bg=hi,Sg=Dr,Ag=_u,Og=Iu,Rg="String Iterator",Pg=Sg.set,Dg=Sg.getterFor(Rg);Ag(String,"String",(function(t){Pg(this,{type:Rg,string:bg(t),index:0})}),(function(){var t,e=Dg(this),r=e.string,n=e.index;return n>=r.length?Og(void 0,!0):(t=Tg(r,n),e.index+=t.length,Og(t,!1))}));var Lg=o,_g=a,Ig=ee("iterator"),kg=!Lg((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach((function(t,r){e.delete("b"),n+=r+t})),r.delete("a",2),r.delete("b",void 0),!e.size&&!_g||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[Ig]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),xg=a,Cg=b,Mg=c,Ug=o,Ng=Ti,Bg=Pn,Vg=h,jg=Bt,Fg=I,Hg=Object.assign,Kg=Object.defineProperty,Yg=Cg([].concat),qg=!Hg||Ug((function(){if(xg&&1!==Hg({b:1},Hg(Kg({},"a",{enumerable:!0,get:function(){Kg(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!==Hg({},t)[r]||Ng(Hg({},e)).join("")!==n}))?function(t,e){for(var r=jg(t),n=arguments.length,i=1,o=Bg.f,a=Vg.f;n>i;)for(var s,u=Fg(arguments[i++]),l=o?Yg(Ng(u),o(u)):Ng(u),c=l.length,h=0;c>h;)s=l[h++],xg&&!Mg(a,u,s)||(r[s]=u[s]);return r}:Hg,Gg=xe,Wg=cd,zg=kl,Xg=c,Jg=Bt,$g=function(t,e,r,n){try{return n?e(Gg(r)[0],r[1]):e(r)}catch(e){Wg(t,"throw",e)}},Qg=Wf,Zg=Qo,tm=fn,em=ba,rm=ad,nm=Zf,im=Array,om=b,am=2147483647,sm=/[^\0-\u007E]/,um=/[.\u3002\uFF0E\uFF61]/g,lm="Overflow: input needs wider integers to process",cm=RangeError,hm=om(um.exec),fm=Math.floor,dm=String.fromCharCode,pm=om("".charCodeAt),gm=om([].join),mm=om([].push),ym=om("".replace),vm=om("".split),Em=om("".toLowerCase),wm=function(t){return t+22+75*(t<26)},Tm=function(t,e,r){var n=0;for(t=r?fm(t/700):t>>1,t+=fm(t/e);t>455;)t=fm(t/35),n+=36;return fm(n+36*t/(t+38))},bm=function(t){var e=[];t=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=pm(t,r++);if(i>=55296&&i<=56319&&r<n){var o=pm(t,r++);56320==(64512&o)?mm(e,((1023&i)<<10)+(1023&o)+65536):(mm(e,i),r--)}else mm(e,i)}return e}(t);var r,n,i=t.length,o=128,a=0,s=72;for(r=0;r<t.length;r++)(n=t[r])<128&&mm(e,dm(n));var u=e.length,l=u;for(u&&mm(e,"-");l<i;){var c=am;for(r=0;r<t.length;r++)(n=t[r])>=o&&n<c&&(c=n);var h=l+1;if(c-o>fm((am-a)/h))throw new cm(lm);for(a+=(c-o)*h,o=c,r=0;r<t.length;r++){if((n=t[r])<o&&++a>am)throw new cm(lm);if(n===o){for(var f=a,d=36;;){var p=d<=s?1:d>=s+26?26:d-s;if(f<p)break;var g=f-p,m=36-p;mm(e,dm(wm(p+g%m))),f=fm(g/m),d+=36}mm(e,dm(wm(f))),s=Tm(a,h,l===u),a=0,l++}}a++,o++}return gm(e,"")},Sm=$r,Am=function(t,e,r){for(var n in e)Sm(t,n,e[n],r);return t},Om=ti,Rm=n,Pm=c,Dm=b,Lm=a,_m=kg,Im=$r,km=fc,xm=Am,Cm=zs,Mm=eu,Um=Dr,Nm=wc,Bm=H,Vm=Ft,jm=kl,Fm=ui,Hm=xe,Km=q,Ym=hi,qm=qi,Gm=y,Wm=ad,zm=Zf,Xm=Iu,Jm=Sc,$m=qp,Qm=ee("iterator"),Zm="URLSearchParams",ty=Zm+"Iterator",ey=Um.set,ry=Um.getterFor(Zm),ny=Um.getterFor(ty),iy=Object.getOwnPropertyDescriptor,oy=function(t){if(!Lm)return Rm[t];var e=iy(Rm,t);return e&&e.value},ay=oy("fetch"),sy=oy("Request"),uy=oy("Headers"),ly=sy&&sy.prototype,cy=uy&&uy.prototype,hy=Rm.RegExp,fy=Rm.TypeError,dy=Rm.decodeURIComponent,py=Rm.encodeURIComponent,gy=Dm("".charAt),my=Dm([].join),yy=Dm([].push),vy=Dm("".replace),Ey=Dm([].shift),wy=Dm([].splice),Ty=Dm("".split),by=Dm("".slice),Sy=/\+/g,Ay=Array(4),Oy=function(t){return Ay[t-1]||(Ay[t-1]=hy("((?:%[\\da-f]{2}){"+t+"})","gi"))},Ry=function(t){try{return dy(t)}catch(e){return t}},Py=function(t){var e=vy(t,Sy," "),r=4;try{return dy(e)}catch(t){for(;r;)e=vy(e,Oy(r--),Ry);return e}},Dy=/[!'()~]|%20/g,Ly={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_y=function(t){return Ly[t]},Iy=function(t){return vy(py(t),Dy,_y)},ky=Mm((function(t,e){ey(this,{type:ty,target:ry(t).entries,index:0,kind:e})}),Zm,(function(){var t=ny(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=void 0,Xm(void 0,!0);var n=e[r];switch(t.kind){case"keys":return Xm(n.key,!1);case"values":return Xm(n.value,!1)}return Xm([n.key,n.value],!1)}),!0),xy=function(t){this.entries=[],this.url=null,void 0!==t&&(Km(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===gy(t,0)?by(t,1):t:Ym(t)))};xy.prototype={type:Zm,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,i,o,a,s,u=this.entries,l=zm(t);if(l)for(r=(e=Wm(t,l)).next;!(n=Pm(r,e)).done;){if(o=(i=Wm(Hm(n.value))).next,(a=Pm(o,i)).done||(s=Pm(o,i)).done||!Pm(o,i).done)throw new fy("Expected sequence with length 2");yy(u,{key:Ym(a.value),value:Ym(s.value)})}else for(var c in t)Vm(t,c)&&yy(u,{key:c,value:Ym(t[c])})},parseQuery:function(t){if(t)for(var e,r,n=this.entries,i=Ty(t,"&"),o=0;o<i.length;)(e=i[o++]).length&&(r=Ty(e,"="),yy(n,{key:Py(Ey(r)),value:Py(my(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],yy(r,Iy(t.key)+"="+Iy(t.value));return my(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Cy=function(){Nm(this,My);var t=ey(this,new xy(arguments.length>0?arguments[0]:void 0));Lm||(this.size=t.entries.length)},My=Cy.prototype;if(xm(My,{append:function(t,e){var r=ry(this);Jm(arguments.length,2),yy(r.entries,{key:Ym(t),value:Ym(e)}),Lm||this.length++,r.updateURL()},delete:function(t){for(var e=ry(this),r=Jm(arguments.length,1),n=e.entries,i=Ym(t),o=r<2?void 0:arguments[1],a=void 0===o?o:Ym(o),s=0;s<n.length;){var u=n[s];if(u.key!==i||void 0!==a&&u.value!==a)s++;else if(wy(n,s,1),void 0!==a)break}Lm||(this.size=n.length),e.updateURL()},get:function(t){var e=ry(this).entries;Jm(arguments.length,1);for(var r=Ym(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){var e=ry(this).entries;Jm(arguments.length,1);for(var r=Ym(t),n=[],i=0;i<e.length;i++)e[i].key===r&&yy(n,e[i].value);return n},has:function(t){for(var e=ry(this).entries,r=Jm(arguments.length,1),n=Ym(t),i=r<2?void 0:arguments[1],o=void 0===i?i:Ym(i),a=0;a<e.length;){var s=e[a++];if(s.key===n&&(void 0===o||s.value===o))return!0}return!1},set:function(t,e){var r=ry(this);Jm(arguments.length,1);for(var n,i=r.entries,o=!1,a=Ym(t),s=Ym(e),u=0;u<i.length;u++)(n=i[u]).key===a&&(o?wy(i,u--,1):(o=!0,n.value=s));o||yy(i,{key:a,value:s}),Lm||(this.size=i.length),r.updateURL()},sort:function(){var t=ry(this);$m(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){for(var e,r=ry(this).entries,n=jm(t,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((e=r[i++]).value,e.key,this)},keys:function(){return new ky(this,"keys")},values:function(){return new ky(this,"values")},entries:function(){return new ky(this,"entries")}},{enumerable:!0}),Im(My,Qm,My.entries,{name:"entries"}),Im(My,"toString",(function(){return ry(this).serialize()}),{enumerable:!0}),Lm&&km(My,"size",{get:function(){return ry(this).entries.length},configurable:!0,enumerable:!0}),Cm(Cy,Zm),Om({global:!0,constructor:!0,forced:!_m},{URLSearchParams:Cy}),!_m&&Bm(uy)){var Uy=Dm(cy.has),Ny=Dm(cy.set),By=function(t){if(Km(t)){var e,r=t.body;if(Fm(r)===Zm)return e=t.headers?new uy(t.headers):new uy,Uy(e,"content-type")||Ny(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),qm(t,{body:Gm(0,Ym(r)),headers:Gm(0,e)})}return t};if(Bm(ay)&&Om({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return ay(t,arguments.length>1?By(arguments[1]):{})}}),Bm(sy)){var Vy=function(t){return Nm(this,ly),new sy(t,arguments.length>1?By(arguments[1]):{})};ly.constructor=Vy,Vy.prototype=ly,Om({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Vy})}}var jy,Fy=ti,Hy=a,Ky=kg,Yy=n,qy=kl,Gy=b,Wy=$r,zy=fc,Xy=wc,Jy=Ft,$y=qg,Qy=function(t){var e=Jg(t),r=Zg(this),n=arguments.length,i=n>1?arguments[1]:void 0,o=void 0!==i;o&&(i=zg(i,n>2?arguments[2]:void 0));var a,s,u,l,c,h,f=nm(e),d=0;if(!f||this===im&&Qg(f))for(a=tm(e),s=r?new this(a):im(a);a>d;d++)h=o?i(e[d],d):e[d],em(s,d,h);else for(c=(l=rm(e,f)).next,s=r?new this:[];!(u=Xg(c,l)).done;d++)h=o?$g(l,i,[u.value,d],!0):u.value,em(s,d,h);return s.length=d,s},Zy=Da,tv=ma.codeAt,ev=function(t){var e,r,n=[],i=vm(ym(Em(t),um,"."),".");for(e=0;e<i.length;e++)r=i[e],mm(n,hm(sm,r)?"xn--"+bm(r):r);return gm(n,".")},rv=hi,nv=zs,iv=Sc,ov={URLSearchParams:Cy,getState:ry},av=Dr,sv=av.set,uv=av.getterFor("URL"),lv=ov.URLSearchParams,cv=ov.getState,hv=Yy.URL,fv=Yy.TypeError,dv=Yy.parseInt,pv=Math.floor,gv=Math.pow,mv=Gy("".charAt),yv=Gy(/./.exec),vv=Gy([].join),Ev=Gy(1..toString),wv=Gy([].pop),Tv=Gy([].push),bv=Gy("".replace),Sv=Gy([].shift),Av=Gy("".split),Ov=Gy("".slice),Rv=Gy("".toLowerCase),Pv=Gy([].unshift),Dv="Invalid scheme",Lv="Invalid host",_v="Invalid port",Iv=/[a-z]/i,kv=/[\d+-.a-z]/i,xv=/\d/,Cv=/^0x/i,Mv=/^[0-7]+$/,Uv=/^\d+$/,Nv=/^[\da-f]+$/i,Bv=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Vv=/[\0\t\n\r #/:<>?@[\\\]^|]/,jv=/^[\u0000-\u0020]+/,Fv=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Hv=/[\t\n\r]/g,Kv=function(t){var e,r,n,i;if("number"==typeof t){for(e=[],r=0;r<4;r++)Pv(e,t%256),t=pv(t/256);return vv(e,".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,r=1,n=null,i=0,o=0;o<8;o++)0!==t[o]?(i>r&&(e=n,r=i),n=null,i=0):(null===n&&(n=o),++i);return i>r&&(e=n,r=i),e}(t),r=0;r<8;r++)i&&0===t[r]||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=Ev(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},Yv={},qv=$y({},Yv,{" ":1,'"':1,"<":1,">":1,"`":1}),Gv=$y({},qv,{"#":1,"?":1,"{":1,"}":1}),Wv=$y({},Gv,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),zv=function(t,e){var r=tv(t,0);return r>32&&r<127&&!Jy(e,t)?t:encodeURIComponent(t)},Xv={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Jv=function(t,e){var r;return 2===t.length&&yv(Iv,mv(t,0))&&(":"===(r=mv(t,1))||!e&&"|"===r)},$v=function(t){var e;return t.length>1&&Jv(Ov(t,0,2))&&(2===t.length||"/"===(e=mv(t,2))||"\\"===e||"?"===e||"#"===e)},Qv=function(t){return"."===t||"%2e"===Rv(t)},Zv={},tE={},eE={},rE={},nE={},iE={},oE={},aE={},sE={},uE={},lE={},cE={},hE={},fE={},dE={},pE={},gE={},mE={},yE={},vE={},EE={},wE=function(t,e,r){var n,i,o,a=rv(t);if(e){if(i=this.parse(a))throw new fv(i);this.searchParams=null}else{if(void 0!==r&&(n=new wE(r,!0)),i=this.parse(a,null,n))throw new fv(i);(o=cv(new lv)).bindURL(this),this.searchParams=o}};wE.prototype={type:"URL",parse:function(t,e,r){var n,i,o,a,s,u=this,l=e||Zv,c=0,h="",f=!1,d=!1,p=!1;for(t=rv(t),e||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,t=bv(t,jv,""),t=bv(t,Fv,"$1")),t=bv(t,Hv,""),n=Qy(t);c<=n.length;){switch(i=n[c],l){case Zv:if(!i||!yv(Iv,i)){if(e)return Dv;l=eE;continue}h+=Rv(i),l=tE;break;case tE:if(i&&(yv(kv,i)||"+"===i||"-"===i||"."===i))h+=Rv(i);else{if(":"!==i){if(e)return Dv;h="",l=eE,c=0;continue}if(e&&(u.isSpecial()!==Jy(Xv,h)||"file"===h&&(u.includesCredentials()||null!==u.port)||"file"===u.scheme&&!u.host))return;if(u.scheme=h,e)return void(u.isSpecial()&&Xv[u.scheme]===u.port&&(u.port=null));h="","file"===u.scheme?l=fE:u.isSpecial()&&r&&r.scheme===u.scheme?l=rE:u.isSpecial()?l=aE:"/"===n[c+1]?(l=nE,c++):(u.cannotBeABaseURL=!0,Tv(u.path,""),l=yE)}break;case eE:if(!r||r.cannotBeABaseURL&&"#"!==i)return Dv;if(r.cannotBeABaseURL&&"#"===i){u.scheme=r.scheme,u.path=Zy(r.path),u.query=r.query,u.fragment="",u.cannotBeABaseURL=!0,l=EE;break}l="file"===r.scheme?fE:iE;continue;case rE:if("/"!==i||"/"!==n[c+1]){l=iE;continue}l=sE,c++;break;case nE:if("/"===i){l=uE;break}l=mE;continue;case iE:if(u.scheme=r.scheme,i===jy)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=Zy(r.path),u.query=r.query;else if("/"===i||"\\"===i&&u.isSpecial())l=oE;else if("?"===i)u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=Zy(r.path),u.query="",l=vE;else{if("#"!==i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=Zy(r.path),u.path.length--,l=mE;continue}u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,u.path=Zy(r.path),u.query=r.query,u.fragment="",l=EE}break;case oE:if(!u.isSpecial()||"/"!==i&&"\\"!==i){if("/"!==i){u.username=r.username,u.password=r.password,u.host=r.host,u.port=r.port,l=mE;continue}l=uE}else l=sE;break;case aE:if(l=sE,"/"!==i||"/"!==mv(h,c+1))continue;c++;break;case sE:if("/"!==i&&"\\"!==i){l=uE;continue}break;case uE:if("@"===i){f&&(h="%40"+h),f=!0,o=Qy(h);for(var g=0;g<o.length;g++){var m=o[g];if(":"!==m||p){var y=zv(m,Wv);p?u.password+=y:u.username+=y}else p=!0}h=""}else if(i===jy||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()){if(f&&""===h)return"Invalid authority";c-=Qy(h).length+1,h="",l=lE}else h+=i;break;case lE:case cE:if(e&&"file"===u.scheme){l=pE;continue}if(":"!==i||d){if(i===jy||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()){if(u.isSpecial()&&""===h)return Lv;if(e&&""===h&&(u.includesCredentials()||null!==u.port))return;if(a=u.parseHost(h))return a;if(h="",l=gE,e)return;continue}"["===i?d=!0:"]"===i&&(d=!1),h+=i}else{if(""===h)return Lv;if(a=u.parseHost(h))return a;if(h="",l=hE,e===cE)return}break;case hE:if(!yv(xv,i)){if(i===jy||"/"===i||"?"===i||"#"===i||"\\"===i&&u.isSpecial()||e){if(""!==h){var v=dv(h,10);if(v>65535)return _v;u.port=u.isSpecial()&&v===Xv[u.scheme]?null:v,h=""}if(e)return;l=gE;continue}return _v}h+=i;break;case fE:if(u.scheme="file","/"===i||"\\"===i)l=dE;else{if(!r||"file"!==r.scheme){l=mE;continue}switch(i){case jy:u.host=r.host,u.path=Zy(r.path),u.query=r.query;break;case"?":u.host=r.host,u.path=Zy(r.path),u.query="",l=vE;break;case"#":u.host=r.host,u.path=Zy(r.path),u.query=r.query,u.fragment="",l=EE;break;default:$v(vv(Zy(n,c),""))||(u.host=r.host,u.path=Zy(r.path),u.shortenPath()),l=mE;continue}}break;case dE:if("/"===i||"\\"===i){l=pE;break}r&&"file"===r.scheme&&!$v(vv(Zy(n,c),""))&&(Jv(r.path[0],!0)?Tv(u.path,r.path[0]):u.host=r.host),l=mE;continue;case pE:if(i===jy||"/"===i||"\\"===i||"?"===i||"#"===i){if(!e&&Jv(h))l=mE;else if(""===h){if(u.host="",e)return;l=gE}else{if(a=u.parseHost(h))return a;if("localhost"===u.host&&(u.host=""),e)return;h="",l=gE}continue}h+=i;break;case gE:if(u.isSpecial()){if(l=mE,"/"!==i&&"\\"!==i)continue}else if(e||"?"!==i)if(e||"#"!==i){if(i!==jy&&(l=mE,"/"!==i))continue}else u.fragment="",l=EE;else u.query="",l=vE;break;case mE:if(i===jy||"/"===i||"\\"===i&&u.isSpecial()||!e&&("?"===i||"#"===i)){if(".."===(s=Rv(s=h))||"%2e."===s||".%2e"===s||"%2e%2e"===s?(u.shortenPath(),"/"===i||"\\"===i&&u.isSpecial()||Tv(u.path,"")):Qv(h)?"/"===i||"\\"===i&&u.isSpecial()||Tv(u.path,""):("file"===u.scheme&&!u.path.length&&Jv(h)&&(u.host&&(u.host=""),h=mv(h,0)+":"),Tv(u.path,h)),h="","file"===u.scheme&&(i===jy||"?"===i||"#"===i))for(;u.path.length>1&&""===u.path[0];)Sv(u.path);"?"===i?(u.query="",l=vE):"#"===i&&(u.fragment="",l=EE)}else h+=zv(i,Gv);break;case yE:"?"===i?(u.query="",l=vE):"#"===i?(u.fragment="",l=EE):i!==jy&&(u.path[0]+=zv(i,Yv));break;case vE:e||"#"!==i?i!==jy&&("'"===i&&u.isSpecial()?u.query+="%27":u.query+="#"===i?"%23":zv(i,Yv)):(u.fragment="",l=EE);break;case EE:i!==jy&&(u.fragment+=zv(i,qv))}c++}},parseHost:function(t){var e,r,n;if("["===mv(t,0)){if("]"!==mv(t,t.length-1))return Lv;if(e=function(t){var e,r,n,i,o,a,s,u=[0,0,0,0,0,0,0,0],l=0,c=null,h=0,f=function(){return mv(t,h)};if(":"===f()){if(":"!==mv(t,1))return;h+=2,c=++l}for(;f();){if(8===l)return;if(":"!==f()){for(e=r=0;r<4&&yv(Nv,f());)e=16*e+dv(f(),16),h++,r++;if("."===f()){if(0===r)return;if(h-=r,l>6)return;for(n=0;f();){if(i=null,n>0){if(!("."===f()&&n<4))return;h++}if(!yv(xv,f()))return;for(;yv(xv,f());){if(o=dv(f(),10),null===i)i=o;else{if(0===i)return;i=10*i+o}if(i>255)return;h++}u[l]=256*u[l]+i,2!=++n&&4!==n||l++}if(4!==n)return;break}if(":"===f()){if(h++,!f())return}else if(f())return;u[l++]=e}else{if(null!==c)return;h++,c=++l}}if(null!==c)for(a=l-c,l=7;0!==l&&a>0;)s=u[l],u[l--]=u[c+a-1],u[c+--a]=s;else if(8!==l)return;return u}(Ov(t,1,-1)),!e)return Lv;this.host=e}else if(this.isSpecial()){if(t=ev(t),yv(Bv,t))return Lv;if(e=function(t){var e,r,n,i,o,a,s,u=Av(t,".");if(u.length&&""===u[u.length-1]&&u.length--,(e=u.length)>4)return t;for(r=[],n=0;n<e;n++){if(""===(i=u[n]))return t;if(o=10,i.length>1&&"0"===mv(i,0)&&(o=yv(Cv,i)?16:8,i=Ov(i,8===o?1:2)),""===i)a=0;else{if(!yv(10===o?Uv:8===o?Mv:Nv,i))return t;a=dv(i,o)}Tv(r,a)}for(n=0;n<e;n++)if(a=r[n],n===e-1){if(a>=gv(256,5-e))return null}else if(a>255)return null;for(s=wv(r),n=0;n<r.length;n++)s+=r[n]*gv(256,3-n);return s}(t),null===e)return Lv;this.host=e}else{if(yv(Vv,t))return Lv;for(e="",r=Qy(t),n=0;n<r.length;n++)e+=zv(r[n],Yv);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return Jy(Xv,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&Jv(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,a=t.path,s=t.query,u=t.fragment,l=e+":";return null!==i?(l+="//",t.includesCredentials()&&(l+=r+(n?":"+n:"")+"@"),l+=Kv(i),null!==o&&(l+=":"+o)):"file"===e&&(l+="//"),l+=t.cannotBeABaseURL?a[0]:a.length?"/"+vv(a,"/"):"",null!==s&&(l+="?"+s),null!==u&&(l+="#"+u),l},setHref:function(t){var e=this.parse(t);if(e)throw new fv(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new TE(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+Kv(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(rv(t)+":",Zv)},getUsername:function(){return this.username},setUsername:function(t){var e=Qy(rv(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=zv(e[r],Wv)}},getPassword:function(){return this.password},setPassword:function(t){var e=Qy(rv(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=zv(e[r],Wv)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?Kv(t):Kv(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,lE)},getHostname:function(){var t=this.host;return null===t?"":Kv(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,cE)},getPort:function(){var t=this.port;return null===t?"":rv(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=rv(t))?this.port=null:this.parse(t,hE))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+vv(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,gE))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=rv(t))?this.query=null:("?"===mv(t,0)&&(t=Ov(t,1)),this.query="",this.parse(t,vE)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=rv(t))?("#"===mv(t,0)&&(t=Ov(t,1)),this.fragment="",this.parse(t,EE)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var TE=function(t){var e=Xy(this,bE),r=iv(arguments.length,1)>1?arguments[1]:void 0,n=sv(e,new wE(t,!1,r));Hy||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},bE=TE.prototype,SE=function(t,e){return{get:function(){return uv(this)[t]()},set:e&&function(t){return uv(this)[e](t)},configurable:!0,enumerable:!0}};if(Hy&&(zy(bE,"href",SE("serialize","setHref")),zy(bE,"origin",SE("getOrigin")),zy(bE,"protocol",SE("getProtocol","setProtocol")),zy(bE,"username",SE("getUsername","setUsername")),zy(bE,"password",SE("getPassword","setPassword")),zy(bE,"host",SE("getHost","setHost")),zy(bE,"hostname",SE("getHostname","setHostname")),zy(bE,"port",SE("getPort","setPort")),zy(bE,"pathname",SE("getPathname","setPathname")),zy(bE,"search",SE("getSearch","setSearch")),zy(bE,"searchParams",SE("getSearchParams")),zy(bE,"hash",SE("getHash","setHash"))),Wy(bE,"toJSON",(function(){return uv(this).serialize()}),{enumerable:!0}),Wy(bE,"toString",(function(){return uv(this).serialize()}),{enumerable:!0}),hv){var AE=hv.createObjectURL,OE=hv.revokeObjectURL;AE&&Wy(TE,"createObjectURL",qy(AE,hv)),OE&&Wy(TE,"revokeObjectURL",qy(OE,hv))}nv(TE,"URL"),Fy({global:!0,constructor:!0,forced:!Ky,sham:!Hy},{URL:TE});var RE="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,PE=rn,DE=cn,LE=RangeError,_E=function(t){if(void 0===t)return 0;var e=PE(t),r=DE(e);if(e!==r)throw new LE("Wrong length or index");return r},IE=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1},kE=Math.abs,xE=2220446049250313e-31,CE=1/xE,ME=function(t,e,r,n){var i=+t,o=kE(i),a=IE(i);if(o<n)return a*function(t){return t+CE-CE}(o/n/e)*n*e;var s=(1+e/xE)*o,u=s-(s-o);return u>r||u!=u?a*(1/0):a*u},UE=Math.fround||function(t){return ME(t,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)},NE=Array,BE=Math.abs,VE=Math.pow,jE=Math.floor,FE=Math.log,HE=Math.LN2,KE={pack:function(t,e,r){var n,i,o,a=NE(r),s=8*r-e-1,u=(1<<s)-1,l=u>>1,c=23===e?VE(2,-24)-VE(2,-77):0,h=t<0||0===t&&1/t<0?1:0,f=0;for((t=BE(t))!=t||t===1/0?(i=t!=t?1:0,n=u):(n=jE(FE(t)/HE),t*(o=VE(2,-n))<1&&(n--,o*=2),(t+=n+l>=1?c/o:c*VE(2,1-l))*o>=2&&(n++,o/=2),n+l>=u?(i=0,n=u):n+l>=1?(i=(t*o-1)*VE(2,e),n+=l):(i=t*VE(2,l-1)*VE(2,e),n=0));e>=8;)a[f++]=255&i,i/=256,e-=8;for(n=n<<e|i,s+=e;s>0;)a[f++]=255&n,n/=256,s-=8;return a[--f]|=128*h,a},unpack:function(t,e){var r,n=t.length,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;s>0;)c=256*c+t[u--],s-=8;for(r=c&(1<<-s)-1,c>>=-s,s+=e;s>0;)r=256*r+t[u--],s-=8;if(0===c)c=1-a;else{if(c===o)return r?NaN:l?-1/0:1/0;r+=VE(2,e),c-=a}return(l?-1:1)*r*VE(2,c-e)}},YE=Bt,qE=sn,GE=fn,WE=function(t){for(var e=YE(this),r=GE(e),n=arguments.length,i=qE(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:qE(o,r);a>i;)e[i++]=t;return e},zE=n,XE=b,JE=a,$E=RE,QE=tr,ZE=We,tw=fc,ew=Am,rw=o,nw=wc,iw=rn,ow=cn,aw=_E,sw=UE,uw=KE,lw=Ms,cw=cu,hw=Qr.f,fw=WE,dw=Da,pw=zs,gw=Dr,mw=QE.PROPER,yw=QE.CONFIGURABLE,vw="ArrayBuffer",Ew="DataView",ww="prototype",Tw="Wrong index",bw=gw.getterFor(vw),Sw=gw.getterFor(Ew),Aw=gw.set,Ow=zE[vw],Rw=Ow,Pw=Rw&&Rw[ww],Dw=zE[Ew],Lw=Dw&&Dw[ww],_w=Object.prototype,Iw=zE.Array,kw=zE.RangeError,xw=XE(fw),Cw=XE([].reverse),Mw=uw.pack,Uw=uw.unpack,Nw=function(t){return[255&t]},Bw=function(t){return[255&t,t>>8&255]},Vw=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},jw=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},Fw=function(t){return Mw(sw(t),23,4)},Hw=function(t){return Mw(t,52,8)},Kw=function(t,e,r){tw(t[ww],e,{configurable:!0,get:function(){return r(this)[e]}})},Yw=function(t,e,r,n){var i=Sw(t),o=aw(r),a=!!n;if(o+e>i.byteLength)throw new kw(Tw);var s=i.bytes,u=o+i.byteOffset,l=dw(s,u,u+e);return a?l:Cw(l)},qw=function(t,e,r,n,i,o){var a=Sw(t),s=aw(r),u=n(+i),l=!!o;if(s+e>a.byteLength)throw new kw(Tw);for(var c=a.bytes,h=s+a.byteOffset,f=0;f<e;f++)c[h+f]=u[l?f:e-f-1]};if($E){var Gw=mw&&Ow.name!==vw;if(rw((function(){Ow(1)}))&&rw((function(){new Ow(-1)}))&&!rw((function(){return new Ow,new Ow(1.5),new Ow(NaN),1!==Ow.length||Gw&&!yw})))Gw&&yw&&ZE(Ow,"name",vw);else{(Rw=function(t){return nw(this,Pw),new Ow(aw(t))})[ww]=Pw;for(var Ww,zw=hw(Ow),Xw=0;zw.length>Xw;)(Ww=zw[Xw++])in Rw||ZE(Rw,Ww,Ow[Ww]);Pw.constructor=Rw}cw&&lw(Lw)!==_w&&cw(Lw,_w);var Jw=new Dw(new Rw(2)),$w=XE(Lw.setInt8);Jw.setInt8(0,2147483648),Jw.setInt8(1,2147483649),!Jw.getInt8(0)&&Jw.getInt8(1)||ew(Lw,{setInt8:function(t,e){$w(this,t,e<<24>>24)},setUint8:function(t,e){$w(this,t,e<<24>>24)}},{unsafe:!0})}else Pw=(Rw=function(t){nw(this,Pw);var e=aw(t);Aw(this,{type:vw,bytes:xw(Iw(e),0),byteLength:e}),JE||(this.byteLength=e,this.detached=!1)})[ww],Lw=(Dw=function(t,e,r){nw(this,Lw),nw(t,Pw);var n=bw(t),i=n.byteLength,o=iw(e);if(o<0||o>i)throw new kw("Wrong offset");if(o+(r=void 0===r?i-o:ow(r))>i)throw new kw("Wrong length");Aw(this,{type:Ew,buffer:t,byteLength:r,byteOffset:o,bytes:n.bytes}),JE||(this.buffer=t,this.byteLength=r,this.byteOffset=o)})[ww],JE&&(Kw(Rw,"byteLength",bw),Kw(Dw,"buffer",Sw),Kw(Dw,"byteLength",Sw),Kw(Dw,"byteOffset",Sw)),ew(Lw,{getInt8:function(t){return Yw(this,1,t)[0]<<24>>24},getUint8:function(t){return Yw(this,1,t)[0]},getInt16:function(t){var e=Yw(this,2,t,arguments.length>1&&arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=Yw(this,2,t,arguments.length>1&&arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return jw(Yw(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return jw(Yw(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return Uw(Yw(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return Uw(Yw(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,e){qw(this,1,t,Nw,e)},setUint8:function(t,e){qw(this,1,t,Nw,e)},setInt16:function(t,e){qw(this,2,t,Bw,e,arguments.length>2&&arguments[2])},setUint16:function(t,e){qw(this,2,t,Bw,e,arguments.length>2&&arguments[2])},setInt32:function(t,e){qw(this,4,t,Vw,e,arguments.length>2&&arguments[2])},setUint32:function(t,e){qw(this,4,t,Vw,e,arguments.length>2&&arguments[2])},setFloat32:function(t,e){qw(this,4,t,Fw,e,arguments.length>2&&arguments[2])},setFloat64:function(t,e){qw(this,8,t,Hw,e,arguments.length>2&&arguments[2])}});pw(Rw,vw),pw(Dw,Ew);var Qw={ArrayBuffer:Rw,DataView:Dw},Zw=ti,tT=Ro,eT=o,rT=xe,nT=sn,iT=cn,oT=sa,aT=Qw.ArrayBuffer,sT=Qw.DataView,uT=sT.prototype,lT=tT(aT.prototype.slice),cT=tT(uT.getUint8),hT=tT(uT.setUint8);Zw({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:eT((function(){return!new aT(2).slice(1,void 0).byteLength}))},{slice:function(t,e){if(lT&&void 0===e)return lT(rT(this),t);for(var r=rT(this).byteLength,n=nT(t,r),i=nT(void 0===e?r:e,r),o=new(oT(this,aT))(iT(i-n)),a=new sT(this),s=new sT(o),u=0;n<i;)hT(s,u++,cT(a,n++));return o}});var fT,dT,pT,gT={exports:{}},mT=RE,yT=a,vT=n,ET=H,wT=q,TT=Ft,bT=ui,ST=gt,AT=We,OT=$r,RT=fc,PT=X,DT=Ms,LT=cu,_T=ee,IT=Gt,kT=Dr.enforce,xT=Dr.get,CT=vT.Int8Array,MT=CT&&CT.prototype,UT=vT.Uint8ClampedArray,NT=UT&&UT.prototype,BT=CT&&DT(CT),VT=MT&&DT(MT),jT=Object.prototype,FT=vT.TypeError,HT=_T("toStringTag"),KT=IT("TYPED_ARRAY_TAG"),YT="TypedArrayConstructor",qT=mT&&!!LT&&"Opera"!==bT(vT.opera),GT=!1,WT={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},zT={BigInt64Array:8,BigUint64Array:8},XT=function(t){var e=DT(t);if(wT(e)){var r=xT(e);return r&&TT(r,YT)?r[YT]:XT(e)}},JT=function(t){if(!wT(t))return!1;var e=bT(t);return TT(WT,e)||TT(zT,e)};for(fT in WT)(pT=(dT=vT[fT])&&dT.prototype)?kT(pT)[YT]=dT:qT=!1;for(fT in zT)(pT=(dT=vT[fT])&&dT.prototype)&&(kT(pT)[YT]=dT);if((!qT||!ET(BT)||BT===Function.prototype)&&(BT=function(){throw new FT("Incorrect invocation")},qT))for(fT in WT)vT[fT]&&LT(vT[fT],BT);if((!qT||!VT||VT===jT)&&(VT=BT.prototype,qT))for(fT in WT)vT[fT]&&LT(vT[fT].prototype,VT);if(qT&&DT(NT)!==VT&&LT(NT,VT),yT&&!TT(VT,HT))for(fT in GT=!0,RT(VT,HT,{configurable:!0,get:function(){return wT(this)?this[KT]:void 0}}),WT)vT[fT]&&AT(vT[fT],KT,fT);var $T={NATIVE_ARRAY_BUFFER_VIEWS:qT,TYPED_ARRAY_TAG:GT&&KT,aTypedArray:function(t){if(JT(t))return t;throw new FT("Target is not a typed array")},aTypedArrayConstructor:function(t){if(ET(t)&&(!LT||PT(BT,t)))return t;throw new FT(ST(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(yT){if(r)for(var i in WT){var o=vT[i];if(o&&TT(o.prototype,t))try{delete o.prototype[t]}catch(r){try{o.prototype[t]=e}catch(t){}}}VT[t]&&!r||OT(VT,t,r?e:qT&&MT[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,i;if(yT){if(LT){if(r)for(n in WT)if((i=vT[n])&&TT(i,t))try{delete i[t]}catch(t){}if(BT[t]&&!r)return;try{return OT(BT,t,r?e:qT&&BT[t]||e)}catch(t){}}for(n in WT)!(i=vT[n])||i[t]&&!r||OT(i,t,e)}},getTypedArrayConstructor:XT,isView:function(t){if(!wT(t))return!1;var e=bT(t);return"DataView"===e||TT(WT,e)||TT(zT,e)},isTypedArray:JT,TypedArray:BT,TypedArrayPrototype:VT},QT=n,ZT=o,tb=Ld,eb=$T.NATIVE_ARRAY_BUFFER_VIEWS,rb=QT.ArrayBuffer,nb=QT.Int8Array,ib=!eb||!ZT((function(){nb(1)}))||!ZT((function(){new nb(-1)}))||!tb((function(t){new nb,new nb(null),new nb(1.5),new nb(t)}),!0)||ZT((function(){return 1!==new nb(new rb(2),1,void 0).length})),ob=q,ab=Math.floor,sb=Number.isInteger||function(t){return!ob(t)&&isFinite(t)&&ab(t)===t},ub=rn,lb=RangeError,cb=function(t){var e=ub(t);if(e<0)throw new lb("The argument can't be less than 0");return e},hb=RangeError,fb=function(t,e){var r=cb(t);if(r%e)throw new hb("Wrong offset");return r},db=Math.round,pb=ui,gb=le,mb=TypeError,yb=function(t){var e=gb(t,"number");if("number"==typeof e)throw new mb("Can't convert number to bigint");return BigInt(e)},vb=kl,Eb=c,wb=ra,Tb=Bt,bb=fn,Sb=ad,Ab=Zf,Ob=Wf,Rb=function(t){var e=pb(t);return"BigInt64Array"===e||"BigUint64Array"===e},Pb=$T.aTypedArrayConstructor,Db=yb,Lb=H,_b=q,Ib=cu,kb=ti,xb=n,Cb=c,Mb=a,Ub=ib,Nb=$T,Bb=Qw,Vb=wc,jb=y,Fb=We,Hb=sb,Kb=cn,Yb=_E,qb=fb,Gb=function(t){var e=db(t);return e<0?0:e>255?255:255&e},Wb=fe,zb=Ft,Xb=ui,Jb=q,$b=dt,Qb=qi,Zb=X,tS=cu,eS=Qr.f,rS=function(t){var e,r,n,i,o,a,s,u,l=wb(this),c=Tb(t),h=arguments.length,f=h>1?arguments[1]:void 0,d=void 0!==f,p=Ab(c);if(p&&!Ob(p))for(u=(s=Sb(c,p)).next,c=[];!(a=Eb(u,s)).done;)c.push(a.value);for(d&&h>2&&(f=vb(f,arguments[2])),r=bb(c),n=new(Pb(l))(r),i=Rb(n),e=0;r>e;e++)o=d?f(c[e],e):c[e],n[e]=i?Db(o):+o;return n},nS=Wl.forEach,iS=yc,oS=fc,aS=De,sS=i,uS=function(t,e,r){var n,i;return Ib&&Lb(n=e.constructor)&&n!==r&&_b(i=n.prototype)&&i!==r.prototype&&Ib(t,i),t},lS=Dr.get,cS=Dr.set,hS=Dr.enforce,fS=aS.f,dS=sS.f,pS=xb.RangeError,gS=Bb.ArrayBuffer,mS=gS.prototype,yS=Bb.DataView,vS=Nb.NATIVE_ARRAY_BUFFER_VIEWS,ES=Nb.TYPED_ARRAY_TAG,wS=Nb.TypedArray,TS=Nb.TypedArrayPrototype,bS=Nb.aTypedArrayConstructor,SS=Nb.isTypedArray,AS="BYTES_PER_ELEMENT",OS="Wrong length",RS=function(t,e){bS(t);for(var r=0,n=e.length,i=new t(n);n>r;)i[r]=e[r++];return i},PS=function(t,e){oS(t,e,{configurable:!0,get:function(){return lS(this)[e]}})},DS=function(t){var e;return Zb(mS,t)||"ArrayBuffer"===(e=Xb(t))||"SharedArrayBuffer"===e},LS=function(t,e){return SS(t)&&!$b(e)&&e in t&&Hb(+e)&&e>=0},_S=function(t,e){return e=Wb(e),LS(t,e)?jb(2,t[e]):dS(t,e)},IS=function(t,e,r){return e=Wb(e),!(LS(t,e)&&Jb(r)&&zb(r,"value"))||zb(r,"get")||zb(r,"set")||r.configurable||zb(r,"writable")&&!r.writable||zb(r,"enumerable")&&!r.enumerable?fS(t,e,r):(t[e]=r.value,t)};Mb?(vS||(sS.f=_S,aS.f=IS,PS(TS,"buffer"),PS(TS,"byteOffset"),PS(TS,"byteLength"),PS(TS,"length")),kb({target:"Object",stat:!0,forced:!vS},{getOwnPropertyDescriptor:_S,defineProperty:IS}),gT.exports=function(t,e,r){var n=t.match(/\d+/)[0]/8,i=t+(r?"Clamped":"")+"Array",o="get"+t,a="set"+t,s=xb[i],u=s,l=u&&u.prototype,c={},h=function(t,e){fS(t,e,{get:function(){return function(t,e){var r=lS(t);return r.view[o](e*n+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,i){var o=lS(t);o.view[a](e*n+o.byteOffset,r?Gb(i):i,!0)}(this,e,t)},enumerable:!0})};vS?Ub&&(u=e((function(t,e,r,i){return Vb(t,l),uS(Jb(e)?DS(e)?void 0!==i?new s(e,qb(r,n),i):void 0!==r?new s(e,qb(r,n)):new s(e):SS(e)?RS(u,e):Cb(rS,u,e):new s(Yb(e)),t,u)})),tS&&tS(u,wS),nS(eS(s),(function(t){t in u||Fb(u,t,s[t])})),u.prototype=l):(u=e((function(t,e,r,i){Vb(t,l);var o,a,s,c=0,f=0;if(Jb(e)){if(!DS(e))return SS(e)?RS(u,e):Cb(rS,u,e);o=e,f=qb(r,n);var d=e.byteLength;if(void 0===i){if(d%n)throw new pS(OS);if((a=d-f)<0)throw new pS(OS)}else if((a=Kb(i)*n)+f>d)throw new pS(OS);s=a/n}else s=Yb(e),o=new gS(a=s*n);for(cS(t,{buffer:o,byteOffset:f,byteLength:a,length:s,view:new yS(o)});c<s;)h(t,c++)})),tS&&tS(u,wS),l=u.prototype=Qb(TS)),l.constructor!==u&&Fb(l,"constructor",u),hS(l).TypedArrayConstructor=u,ES&&Fb(l,ES,i);var f=u!==s;c[i]=u,kb({global:!0,constructor:!0,forced:f,sham:!vS},c),AS in u||Fb(u,AS,n),AS in l||Fb(l,AS,n),iS(i)}):gT.exports=function(){};var kS=gT.exports;kS("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}));var xS=WE,CS=yb,MS=ui,US=c,NS=o,BS=$T.aTypedArray,VS=$T.exportTypedArrayMethod,jS=b("".slice);VS("fill",(function(t){var e=arguments.length;BS(this);var r="Big"===jS(MS(this),0,3)?CS(t):+t;return US(xS,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)}),NS((function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t})));var FS=n,HS=c,KS=$T,YS=fn,qS=fb,GS=Bt,WS=o,zS=FS.RangeError,XS=FS.Int8Array,JS=XS&&XS.prototype,$S=JS&&JS.set,QS=KS.aTypedArray,ZS=KS.exportTypedArrayMethod,tA=!WS((function(){var t=new Uint8ClampedArray(2);return HS($S,t,{length:1,0:3},1),3!==t[1]})),eA=tA&&KS.NATIVE_ARRAY_BUFFER_VIEWS&&WS((function(){var t=new XS(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));ZS("set",(function(t){QS(this);var e=qS(arguments.length>1?arguments[1]:void 0,1),r=GS(t);if(tA)return HS($S,this,r,e);var n=this.length,i=YS(r),o=0;if(i+e>n)throw new zS("Wrong length");for(;o<i;)this[e+o]=r[o++]}),!tA||eA);var rA=Ro,nA=o,iA=Et,oA=qp,aA=Wp,sA=zp,uA=nt,lA=Jp,cA=$T.aTypedArray,hA=$T.exportTypedArrayMethod,fA=n.Uint16Array,dA=fA&&rA(fA.prototype.sort),pA=!(!dA||nA((function(){dA(new fA(2),null)}))&&nA((function(){dA(new fA(2),{})}))),gA=!!dA&&!nA((function(){if(uA)return uA<74;if(aA)return aA<67;if(sA)return!0;if(lA)return lA<602;var t,e,r=new fA(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(dA(r,(function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0}));hA("sort",(function(t){return void 0!==t&&iA(t),gA?dA(this,t):oA(cA(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))}),!gA||pA);var mA=yn.includes,yA=Os;ti({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return mA(this,t,arguments.length>1?arguments[1]:void 0)}}),yA("includes");var vA=b,EA=Bt,wA=Math.floor,TA=vA("".charAt),bA=vA("".replace),SA=vA("".slice),AA=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,OA=/\$([$&'`]|\d{1,2})/g,RA=So,PA=c,DA=b,LA=Mo,_A=o,IA=xe,kA=H,xA=k,CA=rn,MA=cn,UA=hi,NA=M,BA=va,VA=bt,jA=function(t,e,r,n,i,o){var a=r+t.length,s=n.length,u=OA;return void 0!==i&&(i=EA(i),u=AA),bA(o,u,(function(o,u){var l;switch(TA(u,0)){case"$":return"$";case"&":return t;case"`":return SA(e,0,r);case"'":return SA(e,a);case"<":l=i[SA(u,1,-1)];break;default:var c=+u;if(0===c)return o;if(c>s){var h=wA(c/10);return 0===h?o:h<=s?void 0===n[h-1]?TA(u,1):n[h-1]+TA(u,1):o}l=n[c-1]}return void 0===l?"":l}))},FA=Ma,HA=ee("replace"),KA=Math.max,YA=Math.min,qA=DA([].concat),GA=DA([].push),WA=DA("".indexOf),zA=DA("".slice),XA="$0"==="a".replace(/./,"$0"),JA=!!/./[HA]&&""===/./[HA]("a","$0");LA("replace",(function(t,e,r){var n=JA?"$":"$0";return[function(t,r){var n=NA(this),i=xA(t)?void 0:VA(t,HA);return i?PA(i,t,n,r):PA(e,UA(n),t,r)},function(t,i){var o=IA(this),a=UA(t);if("string"==typeof i&&-1===WA(i,n)&&-1===WA(i,"$<")){var s=r(e,o,a,i);if(s.done)return s.value}var u=kA(i);u||(i=UA(i));var l,c=o.global;c&&(l=o.unicode,o.lastIndex=0);for(var h,f=[];null!==(h=FA(o,a))&&(GA(f,h),c);){""===UA(h[0])&&(o.lastIndex=BA(a,MA(o.lastIndex),l))}for(var d,p="",g=0,m=0;m<f.length;m++){for(var y,v=UA((h=f[m])[0]),E=KA(YA(CA(h.index),a.length),0),w=[],T=1;T<h.length;T++)GA(w,void 0===(d=h[T])?d:String(d));var b=h.groups;if(u){var S=qA([v],w,E,a);void 0!==b&&GA(S,b),y=UA(RA(i,void 0,S))}else y=jA(v,a,E,w,b,i);E>=g&&(p+=zA(a,g,E)+y,g=E+v.length)}return p+zA(a,g)}]}),!!_A((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!XA||JA);class $A{get(t){return window.localStorage.getItem(t)}set(t,e){return window.localStorage.setItem(t,e)}del(t){const e=this.get(t);return window.localStorage.removeItem(t),e}}class QA{get(t){const e=document.cookie?document.cookie.split("; "):[];for(let r=0,n=e.length;r<n;r++){const n=e[r].split("="),i=decodeURIComponent(n.shift()||"");if(t&&t===i){return decodeURIComponent(n.join("="))}}return null}set(t,e){const r=new Date;r.setDate(r.getDate()+2592e6),this._set(t,e,r)}_set(t,e,r){document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(e),"; expires="+r.toUTCString()].join("")}del(t){const e=this.get(t);return this._set(t,"",new Date(-1)),e}}class ZA{constructor(){this.store={}}get(t){return this.store[t]||null}set(t,e){this.store[t]=e}del(t){const e=this.get(t);return delete this.store[t],e}}const tO={real:"https://kamp.kakao.com",cbt:"https://kamp.kakao.com",sandbox:"https://sbox-kamp.devel.kakao.com",dev:"https://dev-kamp.devel.kakao.com"},eO={real:"https://kamp.daum.net",cbt:"https://kamp.daum.net",sandbox:"https://sbox-kamp.dev.daum.net",dev:"https://dev-kamp.dev.daum.net"},rO=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sl.Real,e=arguments.length>1?arguments[1]:void 0,r=!1;if(e){const t=nO(e);r=iO(t)}return(r?eO:tO)[t]},nO=function(t){try{const e=new URL(t).hostname;return e.split(".")}catch(t){}return[]},iO=function(t){const e=t.length;if(e<2)return!1;const r=t[e-1],n=t[e-2];return"net"===r&&"daum"===n},oO=function(t){const e=t.length;if(e<2)return!1;const r=t[e-1],n=t[e-2];return"com"===r&&"kakao"===n},aO=t=>t.split("?")[0].split(".").pop()||"",sO=t=>16===t.length?bl.LIVE:bl.VOD;function uO(t){for(var e,r,n,i,o,a,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<t.length;)i=(e=t[c++])>>2,o=(3&e)<<4|(r=c<t.length?t[c++]:Number.NaN)>>4,a=(15&r)<<2|(n=c<t.length?t[c++]:Number.NaN)>>6,s=63&n,isNaN(r)?a=s=64:isNaN(n)&&(s=64),l+=u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(s);return l}const lO=t=>{if(!t)return"";let e=(t=>{const e=t instanceof ArrayBuffer?t:t.buffer;return new Uint8Array(e,0,t.byteLength)})(t);if(239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),window.TextDecoder){const t=(new TextDecoder).decode(e);if(t.includes("ï¿½"))throw new Error("That probably means the UTF8 encoding was incorrect!");return t}{let t="";for(let r=0;r<e.length;++r){let n=65533;if(0==(128&e[r])?n=e[r]:e.length>=r+2&&192==(224&e[r])&&128==(192&e[r+1])?(n=(31&e[r])<<6|63&e[r+1],r+=1):e.length>=r+3&&224==(240&e[r])&&128==(192&e[r+1])&&128==(192&e[r+2])?(n=(15&e[r])<<12|(63&e[r+1])<<6|63&e[r+2],r+=2):e.length>=r+4&&240==(241&e[r])&&128==(192&e[r+1])&&128==(192&e[r+2])&&128==(192&e[r+3])&&(n=(7&e[r])<<18|(63&e[r+1])<<12|(63&e[r+2])<<6|63&e[r+3],r+=3),n<=65535)t+=String.fromCharCode(n);else{const e=n-65536,r=e>>10,i=1023&e;t+=String.fromCharCode(55296+r),t+=String.fromCharCode(56320+i)}}return t}},cO=t=>{if(window.TextEncoder){const e=new TextEncoder;return fO(e.encode(t))}{const e=encodeURIComponent(t),r=window.unescape(e),n=new Uint8Array(r.length);for(let t=0;t<r.length;t++){const e=r[t];n[t]=e.charCodeAt(0)}return fO(n)}},hO=t=>{const e=window.atob(t.replace(/-/g,"+").replace(/_/g,"/")),r=new Uint8Array(e.length);for(let t=0,n=e.length;t<n;t+=1)r[t]=e[t].charCodeAt(0);return r},fO=t=>t instanceof ArrayBuffer?t:0==t.byteOffset&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;function dO(t,e){if(!e||t.indexOf(e)>-1)return t;let r=t.split("?"),n=r.shift(),i=r.join("?");return n+"?"+e+(i?"&"+i:"")}const pO=function(){let t;try{t=window.localStorage;var e="__testcanuse__";return t.setItem(e,e),e===t.getItem(e)&&(t.removeItem(e),!0)}catch(t){return!1}}()?new $A:function(){let t;try{t=window.localStorage;var e="__testcanuse__";return t.setItem(e,e),e===t.getItem(e)&&(t.removeItem(e),!0)}catch(t){return!1}}()?new QA:new ZA;function gO(){let t=pO.get("__kamp_uuid__");var e;return t&&function(t){const e=t.split(":");return 2===e.length&&parseInt(e[1])>Date.now()}(t)||(e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)}))+":"+(Date.now()+2592e6),pO.set("__kamp_uuid__",t)),t.split(":")[0]}function mO(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.tag&&!e)return t.tag;if(0===t.width&&0===t.height){if(0===t.video_bps&&0===t.audio_bps)return"adaptive";let e=Math.floor(t.audio_bps/1e3);return e=e>200?320:e>150?192:e>100?128:96,e+"k"}const r=Math.max(t.width,t.height);return r>3840?"4320p":r>2560?"2160p":r>1920?"1440p":r>1280?"1080p":r>854?"720p":r>640?"480p":r>462?"360p":"240p"}const yO=(t,e)=>{const r=t?JSON.parse(JSON.stringify(t)):{};if(!e)return r;for(let t in e)"object"!=typeof e[t]||Array.isArray(e[t])?r[t]=e[t]:r[t]=yO(r[t],e[t]);return r},vO=t=>JSON.parse(JSON.stringify(t)),EO=()=>"MediaSource"in window,wO=()=>({length:0,start:t=>{if(void 0===t)throw new TypeError("TimeRanges.start: At least 1 argument required, but only 0 passed");throw new DOMException("Index or size is negative or greater than the allowed amount","IndexSizeError")},end:t=>{if(void 0===t)throw new TypeError("TimeRanges.end: At least 1 argument required, but only 0 passed");throw new DOMException("Index or size is negative or greater than the allowed amount","IndexSizeError")}});let TO=0,bO=0;var SO=Object.freeze({__proto__:null,appendParam:dO,base64EncodeUint8Array:uO,calculateBitrate:(t,e)=>{if(!t.webkitVideoDecodedByteCount)return 0;var r=(t.webkitVideoDecodedByteCount-TO)/1e3*8/e,n=(t.webkitAudioDecodedByteCount-bO)/1e3*8/e;return TO=t.webkitVideoDecodedByteCount,bO=t.webkitAudioDecodedByteCount,r+n},createEmptyTimeRange:wO,deepAssign:yO,deepCopy:vO,delay:function(t){return new Promise((e=>{setTimeout(e,t)}))},fromBase64:hO,fromUTF8:lO,getExtension:aO,getHost:rO,getProfileTag:mO,getTypeOfID:sO,getUUID:gO,isDaumNet:iO,isEmptyValue:t=>null==t||""===t,isKakaoCom:oO,isKakaoDomain:function(t){try{const e=nO(t);return oO(e)||iO(e)}catch(t){}return!1},isSupportedMSE:EO,removeID3Tag:function(t){const e=lO(t),r=e.substring(10,14),n=e.indexOf("{"),i=e.lastIndexOf("}");return{type:r,value:e.substring(n,i+1)}},toUTF8:cO});let AO=0;class OO extends wg{constructor(t,e){super("player:"+(++AO).toString()),this.bindedMediaEvent=!1,this.videoListeners={},this.stat={},this.initPTS=0,this.name=t,this.videoEl=e.video,this.src=e.src,this.phase=e.phase,this.authType=e.authType,this.drm=e.drm,this.streamType=e.streamType,this.streamingOption=yO(wl,e.streaming||{}),this.initPTS=0,this.createMediaEventHandler(),this.bindMediaEvent(),al.info("init ".concat(this.name),e)}createMediaEventHandler(){var t=this;Rl.forEach((e=>{this.videoListeners[e]=function(r){t.emit(e,r)}}))}willFireChangeRatio(t){if(!this.latestTimedKampData)return this.latestTimedKampData={pts:0,dar:t.dar},al.info("initDAR",t.dar),void this.emit(Al.PLAY_CHANGERATIO,t.dar);this.latestTimedKampData.pts<t.pts&&(this.latestTimedKampData.dar.w!==t.dar.w||this.latestTimedKampData.dar.h!==t.dar.h)&&(al.info("changeDAR",t.dar),this.emit(Al.PLAY_CHANGERATIO,t.dar))}setLatestTimedKampData(t){(!this.latestTimedKampData||this.latestTimedKampData.pts<t.pts)&&(this.latestTimedKampData=t)}bindMediaEvent(){if(!this.bindedMediaEvent){this.unBindMediaEvent(),this.bindedMediaEvent=!0;var t=this.videoEl;Rl.forEach((e=>{t.addEventListener(e,this.videoListeners[e])}))}}unBindMediaEvent(){var t=this.videoEl;Rl.forEach((e=>{t.removeEventListener(e,this.videoListeners[e])})),this.bindedMediaEvent=!1}play(){return ip(this,void 0,void 0,(function*(){return yield this.videoEl.play()}))}get paused(){return this.videoEl.paused}isPaused(){return this.videoEl.paused}pause(){this.videoEl.pause()}seekBy(t){this.videoEl.currentTime+=t}getCurrentVarient(){}getVarients(){return[]}changeVarient(t){}getTracks(){}changeTrack(t){}getStats(){return{throughput:0}}getDuraion(){return this.videoEl.duration}isLive(){return this.getDuraion()===1/0}setCurrentTime(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.videoEl.currentTime=t}getCurrentTime(){return this.videoEl.currentTime}getCurrentTimeAsUTC(){return this.videoEl.currentTime+this.initPTS}get buffered(){return this.videoEl.buffered}getBufferRange(){return this.videoEl.buffered}getBufferRangeAsUTC(){return{length:this.videoEl.buffered.length,start:t=>this.videoEl.buffered.start(t)+this.initPTS,end:t=>this.videoEl.buffered.end(t)+this.initPTS}}getSeekableRange(){return this.videoEl.seekable}getSeekableRangeAsUTC(){return{length:this.videoEl.seekable.length,start:t=>this.videoEl.seekable.start(t)+this.initPTS,end:t=>this.videoEl.seekable.end(t)+this.initPTS}}setPlaybackRate(t){this.videoEl.playbackRate=t}getPlaybackRate(){return this.videoEl.playbackRate}stop(){this.destroy()}destroy(){this.unBindMediaEvent(),this.videoEl.pause(),this.videoEl.removeAttribute("src"),this.videoEl.load(),al.info("destroy ".concat(this.name))}}const RO=[],PO=t=>{RO.unshift(t),RO.sort(((t,e)=>e.priority-t.priority))},DO=[{protocol:"mp4",type:"video/mp4"},{protocol:"hls",type:"application/x-mpegURL"},{protocol:"ll_hls",type:"application/x-mpegURL"},{protocol:"dash",type:"application/dash+xml"},{protocol:"ll_dash",type:"application/dash+xml"},{protocol:"webm",type:"video/webm"},{protocol:"npp",type:"application/x-nppURL"},{protocol:"kaps",type:"application/x-kapsURL"}],LO=t=>{if(void 0!==t)return Math.floor(t)};class _O{constructor(t,e,r){this.canSendStart=!1,this.canSendProgress=!1,this.canSendError=!1,this.url=t,this.interval=e,this.events=r,this.checkEvent()}checkEvent(){this.events.forEach((t=>{switch(t.trim()){case"canplay":this.canSendStart=!0;break;case"buffering":case"progress":this.canSendProgress=!0;break;case"error":this.canSendError=!0}}))}saveStats(t){this.kampLog=t,this.kampLog.CURRENT_TIME=LO(this.kampLog.CURRENT_TIME),this.kampLog.BUFFER_START=LO(this.kampLog.BUFFER_START),this.kampLog.BUFFER_END=LO(this.kampLog.BUFFER_END)}start(t){this.canSendStart&&(t.EVENT_TYPE="STARTUP",this.kampLog=t,this.send(this.kampLog))}progress(){if(this.canSendProgress){let t=this;window.clearTimeout(this.intervalID),this.intervalID=window.setTimeout((function e(){window.clearTimeout(t.intervalID),t.kampLog&&(t.kampLog.EVENT_TYPE="PROGRESS",t.send(t.kampLog)),t.intervalID=window.setTimeout(e,t.interval)}),this.interval)}}pause(){window.clearTimeout(this.intervalID)}sendError(t){this.events.indexOf("error")>-1&&(t.EVENT_TYPE="ERROR",this.send(t))}send(t){al.log("[send]",t),function(t,e){if(function(){if(!navigator||"function"!=typeof navigator.sendBeacon)return!1;if(!ms.fromUAHint&&"ios"===ms.os.name&&parseInt(ms.os.version.major)<13)return!1;return!0}())return navigator.sendBeacon(t,e);try{const r=new XMLHttpRequest;return r.open("POST",t,!0),r.setRequestHeader("Accept","*/*"),r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),r.send(e),!0}catch(t){return!1}}(this.url,JSON.stringify(t))}destroy(){this.kampLog=void 0,window.clearTimeout(this.intervalID)}}const IO=Object.values(Al),kO=()=>"2.0.0-rc5";let xO=0;class CO extends wg{constructor(t){super("kamp:"+(++xO).toString()),this.autoFiltering=!0,this.phase=sl.Real,this.authType=ul.COOKIE,this.authAuto=!0,this.streamingOptions=wl,this.metadataLoaded=!1,this.streamType=bl.VOD,this.profiles=[],this.streams={},this.rawProfiles=[],this.rawStreams=[],this.currentProtocol="",this.currentProfile="",this.currentStreamInfo=null,this.isStartLogging=!1,this.startTime=0,this.startDelay=0,this.initSrc=!1,this.kampContents=!1,this.initTimestamp=0,this.player=null,this.setOptions(t),al.info("[kamp init]",Tl,t),this.videoEl=this.selectVideo(t.video||Tl.video),this.kampLog=this.initLog(),this.canPlayProtocols=(()=>{const t=[];return DO.forEach((e=>{let{protocol:r,type:n}=e;-1!==RO.findIndex((t=>t.canPlayType(n)))&&t.push(r)})),t})(),this.setCurrentTimestamp(),al.info("[kamp init]","canPlayProtocol",this.canPlayProtocols)}initLog(){return{VID:"",PLAYER_VERSION:"2.0.0-rc5",IS_LIVE:!1,SRC_URL:"",PROTOCOL:"",PROFILE:"",UUID:gO(),PHASE:this.phase,EVENT_TYPE:"",DEVICE_OS:ms.os.name,BROWSER_NAME:ms.browser.name,BROWSER_VERSION:ms.browser.version.info,BROWSER_VERSION_MAJOR:ms.browser.version.major,BROWSER_VERSION_MINOR:ms.browser.version.minor,BROWSER_VERSION_PATCH:ms.browser.version.patch}}setOptions(t){"boolean"==typeof t.autoFiltering&&(this.autoFiltering=t.autoFiltering),t.phase&&(this.phase=t.phase),this.selectAuthType(t.authType),this.setStreamingOptions(t.streaming)}setStreamingOptions(t){if(this.streamingOptions=yO(this.streamingOptions,t),"ios"===ms.os.name){const t=ms.os.version,e=parseInt(t.major),r=parseInt(t.minor);(e<17||17===e&&r<1)&&(this.streamingOptions.useNativeOnHls=!0)}else"safari"!==ms.browser.name&&(this.streamingOptions.useNativeOnHls=!1)}selectAuthType(t){if(t&&t!==ul.AUTO)return this.authAuto=!1,void(this.authType=t);let e=t===ul.AUTO||this.authAuto;(t||e)&&this.setAuthAuto()}setAuthAuto(){if("ios"!==ms.os.name)return this.authType=ul.QUERY,void(this.authAuto=!1);this.authType=ul.COOKIE,this.authAuto=!0}selectVideo(t){if(t instanceof HTMLVideoElement)return t;const e=document.querySelector(t);if(e instanceof HTMLVideoElement)return e;throw new TypeError("Invalid video")}unbindEvent(){}loadURL(t){return ip(this,void 0,void 0,(function*(){return this.currentSrc=t,this.kampContents=!1,{profiles:[],streams:{}}}))}loadKamp(t,e,r){return ip(this,void 0,void 0,(function*(){al.info("[loadKamp]",t,location.href);const n=rO(this.phase,null===location||void 0===location?void 0:location.href),i=sO(t);let o="".concat(n,"/").concat(i,"/v1/src/").concat(t,"?tid=").concat(r);this.authAuto?o+="&auth_type=mixed":this.authType===ul.QUERY?o+="&auth_type=query":o+="&auth_type=cookie";let a={method:"get",url:o,async:!0,withCredentials:!0};e&&(a.header={"X-Kamp-Auth":"Bearer "+e});const s=yield up(a),u=JSON.parse(s.responseText);if(al.info("[loaded]",u),"status"in u&&"complete"!==u.status&&"service"!==u.status)throw new Error("Do not transcoding vid");this.setMetadata(u),this.kampLog.PHASE=this.phase,this.kampLog.VID=t,this.kampLog.IS_LIVE=this.streamType===bl.LIVE,u.stat&&u.stat.url&&(this.collector=new _O(u.stat.url,u.stat.interval,u.stat.event));const l={profiles:this.getProfiles(),streams:this.getStreams()};return this.kampContents=!0,this.currentSrc="",this.emit(Ol.PLAY_LOADEDKAMPDATA,l),l}))}load(t,e,r){return ip(this,void 0,void 0,(function*(){if(!t)throw new Error("Missing parameter for load");if(t&&!e&&!r)return yield this.loadURL(t);if(!t||!e||!r)throw new Error("Missing parameter for kamp edge");return yield this.loadKamp(t,e,r)}))}getProtocols(){if(!this.isLoadedMetadata())throw new Error("Do not load metadata");return Object.keys(this.streams)}isLoadedMetadata(){return!!this.metadataLoaded&&!!this.metadata}getProfiles(){if(!this.isLoadedMetadata())throw new Error("Do not load metadata");return this.profiles}getStreams(){if(!this.isLoadedMetadata())throw new Error("Do not load metadata");return this.streams}getStream(t,e){if(!this.isLoadedMetadata())throw new Error("Do not load metadata");return this.streams[t][e]}setMetadata(t){if(this.metadataLoaded=!0,this.drm=t.drm,this.rawProfiles=vO(t.profiles),this.rawStreams=vO(t.streams),this.profiles=this.parseProfile(t),this.streams=this.parseStream(t),"uniq_id"in t){this.streamType=bl.LIVE;let e="number"==typeof t.encoding_base_time?t.encoding_base_time:t.ontime;this.metadata={id:t.uniq_id,ontime:e,is_drm:t.is_drm,type:this.streamType,thumbnail:t.thumbnail,profiles:this.rawProfiles,streams:this.rawStreams}}else this.streamType=bl.VOD,this.metadata={id:t.vid,is_drm:t.is_drm,status:t.status,type:this.streamType,thumbnail:t.thumbnail,profiles:this.rawProfiles,streams:this.rawStreams,seeking:vO(t.seeking)};this.streamType!==bl.LIVE||Pp()||delete this.streams.npp,this.setAttributeToVideoEl()}addStream(t,e){const r=[];return e.forEach((e=>{t.name===e.profile&&(e.tag=t.tag,r.push(yO({},e)))})),r}parseProfile(t){const e={},r=[];return t.profiles.filter((t=>t.fps>=1||0===t.video_bps)).filter((t=>"PREVIEW"!==t.name)).forEach((n=>{const i=mO(n);e[i]||(e[i]=Object.assign(Object.assign({},vO(n)),{tag:i}),e[i].streams=this.addStream(e[i],t.streams),r.push(e[i]))})),r}profileListToMap(t){let e={};return t.forEach((t=>{e[t.name]=t})),e}parseStream(t){const e=this.profileListToMap(this.profiles),r=vO(t.streams);let n={};return Array.isArray(r)?(r.forEach((t=>{if(this.autoFiltering&&-1===this.canPlayProtocols.indexOf(t.protocol))return;n[t.protocol]||(n[t.protocol]={});const r=e[t.profile];r&&r.tag&&(n[t.protocol][r.tag]=Object.assign(Object.assign({},t),{tag:r.tag,profile:e[t.profile]}))})),n):n}setAttributeToVideoEl(){if(!this.videoEl)return;const t=this.streamType===bl.LIVE;this.videoEl.setAttribute("kamp-is-live",t.toString()),this.videoEl.isLive=t}isLive(){return!!this.player&&this.player.isLive()}getDefaultProtocol(){return this.streamType===bl.LIVE?this.getDefaultLiveProtocol():this.getDefaultVodProtocol()}getDefaultLiveProtocol(){let t=this.getProtocols();return t.indexOf("hls")>-1&&("safari"===ms.browser.name||"ios"===ms.os.name)?"hls":t.indexOf("kaps")>-1?"kaps":t.indexOf("npp")>-1?"npp":t.indexOf("dash")>-1?"dash":""}getDefaultVodProtocol(){if("msie"===ms.browser.name)return"mp4";let t=this.getProtocols();return t.indexOf("hls")>-1&&("safari"===ms.browser.name||"ios"===ms.os.name)?"hls":t.indexOf("dash")>-1?"dash":"mp4"}getDefaultProfile(t){const e=this.streams[t];if(!e)return"";if(e.adaptive)return"adaptive";for(let t=0,r=this.profiles.length;t<r;t+=1)if(e[this.profiles[t].tag])return this.profiles[t].tag;return""}bindReplayEvent(){var t=this;function e(){t.videoEl&&!t.player&&t.currentSrc&&t.createPlayer(t.currentSrc)}this.videoEl.addEventListener(Al.VIDEO_PLAY,e),this.unBindReplayEvent=function(){t.videoEl.removeEventListener(Al.VIDEO_PLAY,e)}}get paused(){return this.isPaused()}isPaused(){return this.videoEl.paused}pause(){var t;null===(t=this.player)||void 0===t||t.pause()}src(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return ip(this,void 0,void 0,(function*(){if(this.isURL(t)||this.isNPP(t))return al.info("[src] url",t),this.initSrc=!0,this.kampContents=!1,this.currentProtocol="",this.currentProfile="",this.currentStreamInfo=null,yield this.createPlayer(t);const r=t||this.getDefaultProtocol(),n=e||this.getDefaultProfile(r),i=this.getStream(r,n);return al.info("[src] kamp",r,n,i),this.initSrc=!0,this.kampContents=!0,this.currentProtocol=r,this.currentProfile=n,this.currentStreamInfo=i,yield this.createPlayer(i.url)}))}play(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ip(this,void 0,void 0,(function*(){if(!this.currentSrc){const r=t?yield this.src(t,e):yield this.src();return r.play(),r}return this.player?(yield this.player.play(),this.player):this.createPlayer(this.currentSrc,0,!0)}))}isMuted(){return this.getVideoEl().muted}setMute(t){this.getVideoEl().muted=t}get muted(){return this.isMuted()}set muted(t){this.setMute(t)}get volume(){return this.getVolume()}getVolume(){return this.getVideoEl().volume}set volume(t){this.setVolume(t)}setVolume(t){this.getVideoEl().volume=t}seekBy(t){var e;null===(e=this.player)||void 0===e||e.seekBy(t)}getCurrentStream(){return this.currentStreamInfo}getSelectedProfile(){const t=this.currentStreamInfo;if(!t)throw new Error("Do not select profile");const e=t.profile;return{tag:e.tag||"",src:this.currentSrc||"",protocol:this.currentProtocol||"",width:e.width||0,height:e.height||0,video_bps:e.video_bps||0,audio_bps:e.audio_bps||0}}getPlayingProfile(){var t;let e=this.getSelectedProfile(),r=null===(t=this.player)||void 0===t?void 0:t.getCurrentVarient();return r&&(e.tag=r.tag,e.width=r.width,e.height=r.height,e.video_bps=r.video_bps,e.audio_bps=r.audio_bps),e}isURL(t){return/^https?:\/\//.test(t)}isNPP(t){return/^potplayer:\/\//.test(t)}createPlayer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return ip(this,void 0,void 0,(function*(){try{this.currentSrc=t;const i=(n={src:t,drm:this.drm,useNativeOnHls:this.streamingOptions.useNativeOnHls||!1},RO.find((t=>t.canPlay(n))));if(!i)throw new Error("Can not play: "+t);this.resetPlayer(),this.player=yield i.getPlayer({video:this.videoEl,src:t,phase:this.phase,authType:this.authType,drm:this.drm,streamType:this.streamType,streaming:yO(this.streamingOptions,{currentTime:e,autoplay:r||this.streamingOptions.autoplay})}),this.bindVideoEvent(),this.startLogging(t),this.player.on([Al.PLAY_STOP],(t=>{al.log("[player:".concat(t.event,"]"),t),this.resetPlayer()})),(this.streamingOptions.autoplay||r)&&(yield this.player.play())}catch(t){throw t}var n;return this.player}))}isPlay(){return!!this.player}startLogging(t){this.player?(this.player.one("play",(()=>{this.isStartLogging=!1,this.startTime=Date.now()})),this.player.one([Al.VIDEO_TIMEUPDATE],(e=>{!this.isStartLogging&&this.collector&&(this.isStartLogging=!0,this.startDelay=Date.now()-this.startTime,this.kampLog.SRC_URL=t,this.kampLog.EVENT_TYPE="STARTUP_TIME",this.kampLog.VIDEO_STARTUPTIME=this.startDelay,this.saveStats(),this.collector.start(this.kampLog))})),this.player.on([Al.VIDEO_PROGRESS,Al.VIDEO_DURATIONCAHNGE],(()=>{this.saveStats()})),this.player.on(Al.VIDEO_PAUSE,(()=>{this.collector&&this.collector.pause()})),this.player.on(Al.VIDEO_PLAY,(()=>{this.collector&&this.collector.progress()})),this.player.on(Al.VIDEO_ENDED,(()=>{this.collector&&this.collector.destroy()})),this.player.on(Al.PLAY_TIMEDKAMPDATA,(t=>{const e=t.data;if(e&&e.pts){const t=this.getStats(e.pts);this.emit(Ol.KAMPSTATS,t)}}))):al.warn("[kamp]","Do not initialize player")}setCurrentTimestamp(){return ip(this,void 0,void 0,(function*(){const t=yield fetch("https://live-orisa-edge.play.kakao.com/time?iso&ms"),e=yield t.text(),r=new Date(e).getTime();this.initTimestamp=r-Date.now(),al.info("[initTimestamp]",this.initTimestamp)}))}checkDelay(t){var e;if(!this.isLive()||!this.kampContents)return 0;const r=Date.now()+this.initTimestamp,n=Math.floor(t?t/1e3:1e3*this.getCurrentTimeAsUTC());return r-1e3*((null===(e=this.metadata)||void 0===e?void 0:e.ontime)||0)-n}saveStats(){const t=this.getStats();this.kampLog.VIDEO_WIDTH=t.VIDEO_WIDTH,this.kampLog.VIDEO_HEIGHT=t.VIDEO_HEIGHT,this.kampLog.PROTOCOL=t.PROTOCOL,this.kampLog.PROFILE=t.PROFILE,this.kampLog.CURRENT_TIME=t.CURRENT_TIME,this.kampLog.BUFFER_START=t.BUFFER_START,this.kampLog.BUFFER_END=t.BUFFER_END,this.kampLog.PLAY_DELAY=t.PLAY_DELAY,this.collector&&this.collector.saveStats(this.kampLog)}getStats(t){var e;let r=0;if(this.player){r=this.player.getStats().throughput}let n={PROTOCOL:this.currentProtocol,PROFILE:this.currentProfile,CURRENT_TIME:parseFloat(this.getCurrentTimeAsUTC().toFixed(3)),VIDEO_WIDTH:this.videoEl.videoWidth,VIDEO_HEIGHT:this.videoEl.videoHeight,PLAY_DELAY:this.checkDelay(t),VIDEO_STARTUPTIME:this.startDelay,BUFFER_START:0,BUFFER_END:0,NETWORK_THROUGHPUT:r};try{const t=null===(e=this.player)||void 0===e?void 0:e.getBufferRangeAsUTC();t.length>0&&(n.BUFFER_START=parseFloat(t.start(0).toFixed(3)),n.BUFFER_END=parseFloat(t.end(t.length-1).toFixed(3)))}catch(t){}return n}resetPlayer(){this.player&&(this.player.destroy(),this.player=null)}getTracks(){if(this.player)return this.player.getTracks()}getSeeking(){var t;if(!this.isLoadedMetadata())throw new Error("Do not load metadata");return null===(t=this.metadata)||void 0===t?void 0:t.seeking}getThumbnail(){var t;if(!this.isLoadedMetadata())throw new Error("Do not load metadata");return null===(t=this.metadata)||void 0===t?void 0:t.thumbnail}getMetadata(){if(!this.isLoadedMetadata())throw new Error("Do not load metadata");return this.metadata}changeProfile(t,e){if(!this.player)throw new Error("Do not playing");let r=this.getProfiles().filter((e=>e.tag===t))[0];if(!r)throw new Error("Can not find profile - "+t);const n={};r.streams.forEach((t=>{n[t.protocol]=t}));let i=n[e||this.currentProtocol];if(i||(i=r.streams[0]),!this.isLive()&&this.currentProtocol===e&&("hls"===e||"ll_hls"===e||("dash"===e||"ll_dash"===e)&&"AUDIO"!==r.name)){const n=this.player.getVarients();if("adaptive"===t&&i.url===this.currentSrc||n.findIndex((t=>t.tag===r.tag))>-1)return al.info("[changeVarient]",r,i),this.currentProfile=r.tag,this.player.changeVarient(r),void this.emit(Ol.PLAY_CHANGEDPROFILE,{protocol:e,profile:this.currentProfile})}this.currentProfile=r.tag,this.currentProtocol=i.protocol,this.currentStreamInfo=Object.assign(Object.assign({},i),{profile:r});let o=this.getCurrentTime();this.streamType===bl.LIVE&&(o="dash"===this.currentProtocol||"ll_dash"===this.currentProtocol?this.getCurrentTimeAsUTC():this.getCurrentTime()-this.getSeekable().start(0)),al.info("[changedprofile]",r,i,o),this.createPlayer(i.url,o,!this.isPaused()),this.emit(Ol.PLAY_CHANGEDPROFILE,{protocol:this.currentProtocol,profile:this.currentProfile})}changeTrack(t){if(!this.player)throw new Error("");this.player.changeTrack(t)}bindVideoEvent(){this.player&&this.player.on(IO,(t=>{al.log(t.event,this.instanceID,t),t&&t.data?this.emit(t.event,t.data):this.emit(t.event)}))}get width(){return this.videoEl.videoWidth}get height(){return this.videoEl.videoHeight}getResolution(){return{width:this.width,height:this.height}}get throughput(){return this.getThroughput()}getThroughput(){return this.player?this.player.getStats().throughput:NaN}get duraion(){return this.getDuration()}getDuration(){return this.player?this.player.getDuraion():NaN}get currentTime(){return this.getCurrentTime()}getCurrentTime(){return this.player?this.player.getCurrentTime():0}getCurrentTimeAsUTC(){return this.player?this.player.getCurrentTimeAsUTC():0}set currentTime(t){this.setCurrentTime(t)}setCurrentTime(t){var e;null===(e=this.player)||void 0===e||e.setCurrentTime(t)}getVideoEl(){return this.videoEl}get video(){return this.getVideoEl()}get seekable(){return this.getSeekable()}getSeekable(){return this.player?this.player.getSeekableRange():wO()}get buffered(){return this.getBuffered()}getBuffered(){return this.player?this.player.getBufferRange():wO()}set playbackRate(t){this.setPlaybackRate(t)}get playbackRate(){return this.getPlaybackRate()}getPlaybackRate(){return this.player?this.player.getPlaybackRate():1}setPlaybackRate(t){var e;return null===(e=this.player)||void 0===e?void 0:e.setPlaybackRate(t)}getUUID(){return gO()}destroy(){super.destroy(),this.unBindReplayEvent&&this.unBindReplayEvent(),this.resetPlayer()}}kS("Uint16",(function(t){return function(e,r,n){return t(this,e,r,n)}}));const MO=function(t){let{id:e,initData:r,cert:n}=t;"string"==typeof e&&(e=function(t){let e=new ArrayBuffer(2*t.length),r=new Uint16Array(e);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}(e));let i=0,o=new ArrayBuffer(r.byteLength+4+e.byteLength+4+n.byteLength),a=new DataView(o);new Uint8Array(o,i,r.byteLength).set(r),i+=r.byteLength,a.setUint32(i,e.byteLength,!0),i+=4;let s=new Uint16Array(o,i,e.length);return s.set(e),i+=s.byteLength,a.setUint32(i,n.byteLength,!0),i+=4,new Uint8Array(o,i,n.byteLength).set(n),new Uint8Array(o,0,o.byteLength)},UO=function(t,e,r,n,i,o){if(!t.webkitKeys)try{t.webkitSetMediaKeys(new window.WebKitMediaKeys("com.apple.fps.1_0"))}catch(t){return o(new Error("Could not create MediaKeys"))}let a;try{a=t.webkitKeys.createSession("video/mp4",MO({id:e,initData:r,cert:n}))}catch(t){return console.log(t),o(new Error("Could not create key session"))}a.contentId=e,a.addEventListener("webkitkeymessage",(t=>{!function(t,e,r){let n=uO(new Uint8Array(e)),i="token="+t.token+"&provider=kakaotv&payload="+n;fetch(t.license_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i}).then((function(t){if(!t.ok)throw t;return t})).then((function(t){return t.json()})).then((function(t){r(null,hO(t.payload))})).catch((function(t){r(t)}))}(i,t.message,(function(t,e){t?o(t):a.update(new Uint8Array(e))}))})),a.addEventListener("webkitkeyadded",(function(){o(null)})),a.addEventListener("webkitkeyerror",(function(){let t=a.error;o(new Error("KeySession error: code ".concat(t.code,", systemCode ").concat(t.systemCode)))}))},NO=function(t,e,r){let n=t.initData,i=t.target,o=function(t){let e=new TextDecoder("utf-16").decode(t);return e.substring(e.indexOf("skd://")+6)}(n);e.cert_url&&function(t,e){fetch(t).then((function(t){return t.ok?t.arrayBuffer():e(new Error("Could not fetch certificate"))})).then((function(t){e(null,new Uint8Array(t))}))}(e.cert_url,(function(t,a){if(t)return r(t);UO(i,o,n,a,e,(function(t){if(t)return r(t);r()}))}))};class BO extends OO{constructor(t,e){super(t,e),this.setInitPTS=!1,this.enableSetCurrentTime=!1,this.unbindEventTimedmetadata=()=>{},this.setInitPTS=!1,this.setDRMFairPlay(),this.fixSetCurrentTimeForIOS(),this.initVideo(),this.bindEventTimedmetadata()}fixSetCurrentTimeForIOS(){"ios"===ms.os.name?(this.enableSetCurrentTime=!1,this.one(Al.VIDEO_PLAY,(()=>{this.enableSetCurrentTime=!0,this.initSetCurrentTime()}))):this.enableSetCurrentTime=!0}initVideo(){this.streamType===bl.LIVE&&(this.videoEl.setAttribute("__preload",this.videoEl.preload),this.videoEl.setAttribute("preload","none"),this.one(Al.VIDEO_LOADEDMETADATA,(()=>{const t=this.videoEl.getAttribute("__preload");t&&this.videoEl.setAttribute("preload",t)}))),this.on(Al.VIDEO_ERROR,(t=>{const e=t.data.target;if(!(e instanceof HTMLMediaElement))return;const r=e.error;r&&(r.code===r.MEDIA_ERR_SRC_NOT_SUPPORTED?this.emit(Al.ERROR_NOTACCESS,{video_src:this.src,request_url:this.src,response_code:0,handler:this.name}):(r.code,r.MEDIA_ERR_NETWORK),al.log("[native]",t))})),this.bindCurrentTime(),this.loadSrc(),this.initSetCurrentTime()}loadSrc(){this.videoEl.src=this.src}getCurrentTime(){return this.enableSetCurrentTime?this.videoEl.currentTime:this.streamingOption.currentTime||0}setCurrentTime(t){"number"==typeof t&&(this.enableSetCurrentTime?this.videoEl.currentTime=t:this.streamingOption.currentTime=t)}initSetCurrentTime(){if(this.enableSetCurrentTime&&"number"==typeof this.streamingOption.currentTime){const t=this.streamingOption.currentTime;try{Math.abs(this.videoEl.currentTime-t)>1&&(this.videoEl.currentTime=t,al.info("initSetCurrentTime",this.videoEl.currentTime,this.streamingOption.currentTime))}catch(t){}}}bindCurrentTime(){if(this.streamingOption.currentTime){const t=()=>this.initSetCurrentTime();this.one(Al.VIDEO_LOADEDDATA,t),this.one(Al.VIDEO_LOADEDMETADATA,t),this.one(Al.VIDEO_CANPLAY,t),this.initSetCurrentTime()}}bindEventTimedmetadata(){const t=this;let e=0,r=!1;function n(n){if(!n.target)return;const i=n.target;i.cues&&(function(n){const i=n.cues||[],o=t.getCurrentTime();for(let n=0;n<i.length;n+=1){let a=i[n];if(!a._id){if(a._id=""+e,e+=1,a._fire=!1,!a.value||"TKMP"!==a.value.key&&"TXXX"!==a.value.key)continue;r||"TKMP"!==a.value.key||(r=!0,t.willFireChangeRatio(JSON.parse(a.value.data))),a.startTime<=o&&o<=a.endTime?t.parseCueData(a):a.onenter=e=>{if(!e.target)return;const r=e.target;r.onenter=null,t.parseCueData(r)}}}}(i),function(e){const r=e.cues||[],n=[],i=t.getCurrentTime();for(let t=0;t<r.length;t+=1){let e=r[t];e.endTime<i&&e._fire&&n.push(e)}n.forEach((t=>{try{e.removeCue(t)}catch(t){}}))}(i))}function i(t){const e=t.track;e&&"metadata"===e.kind&&(e.mode="hidden",e.addEventListener("cuechange",n))}this.videoEl.textTracks.addEventListener("addtrack",i),this.unbindEventTimedmetadata=function(){t.videoEl.textTracks.removeEventListener("addtrack",i);const e=t.videoEl.textTracks;for(let t=0;t<e.length;t+=1)"hidden"===e[t].mode&&e[t].removeEventListener("cuechange",n)}}parseCueData(t){if(t._fire=!0,t.value)return"TKMP"===t.value.key?this.parseKampCueData(t):"TXXX"===t.value.key?this.parseCustomCueData(t):void 0}parseKampCueData(t){let e;try{e=JSON.parse(t.value.data)}catch(t){}if(!this.setInitPTS&&e.pts){const r=1e6;this.initPTS=e.pts/r-t.startTime,this.setInitPTS=!0,al.info("initPTS",this.initPTS,r)}this.willFireChangeRatio(e),this.setLatestTimedKampData(e),this.emit(Al.PLAY_TIMEDKAMPDATA,e)}parseCustomCueData(t){let e=t.value.data;try{e=JSON.parse(e)}catch(t){}this.emit(Al.PLAY_TIMEDMETADATA,e)}setDRMFairPlay(){this.drm&&"FAIRPLAY"===this.drm.drm_type&&("macos"===ms.os.name&&"safari"===ms.browser.name||"ios"===ms.os.name||"ipados"===ms.os.name)&&function(t,e){let r;if(t instanceof HTMLVideoElement)r=t;else{if("string"!=typeof t)throw new Error("video is not HTMLVideoElement");{let e=document.getElementById(t);if(!(e instanceof HTMLVideoElement))throw new Error("video is not HTMLVideoElement");r=e}}r.eme=r.eme||{},window.WebKitMediaKeys&&r.addEventListener("webkitneedkey",(function(t){!function(t){let e=t.src;e!==t.eme.activeSrc&&(t.eme.activeSrc=e,t.eme.sessions=[])}(r),NO(t,e,(function(t){t&&console.error(t)}))}))}(this.videoEl,this.drm)}play(){return ip(this,void 0,void 0,(function*(){return yield this.videoEl.play().catch((t=>{if("NotAllowedError"===t.name)throw this.emit(Al.ERROR_NOTALLOWED),t}))}))}pause(){this.videoEl.pause()}stop(){this.videoEl.pause()}destroy(){super.destroy(),this.unbindEventTimedmetadata(),al.info("destroy NativePlayer")}}const VO={mp4:"video/mp4",m3u:"application/x-mpegURL",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",webm:"video/webm"};let jO;const FO={name:"NativeHandler",priority:-1,canPlay(t){if(t.type)return FO.canPlayType(t.type);let e=aO(t.src),r=VO[e];return!r||FO.canPlayType(r)},canPlayType(t){jO||(jO=document.createElement("video"));const e=jO.canPlayType(t);return"maybe"===e||"probably"===e},getPlayer:t=>new BO(FO.name,t)};PO(FO);var HO=Et,KO=Bt,YO=I,qO=fn,GO=TypeError,WO=function(t){return function(e,r,n,i){var o=KO(e),a=YO(o),s=qO(o);HO(r);var u=t?s-1:0,l=t?-1:1;if(n<2)for(;;){if(u in a){i=a[u],u+=l;break}if(u+=l,t?u<0:s<=u)throw new GO("Reduce of empty array with no initial value")}for(;t?u>=0:s>u;u+=l)u in a&&(i=r(i,a[u],u,o));return i}},zO={left:WO(!1),right:WO(!0)}.left;ti({target:"Array",proto:!0,forced:!lc&&nt>79&&nt<83||!Xl("reduce")},{reduce:function(t){var e=arguments.length;return zO(this,t,e,e>1?arguments[1]:void 0)}});var XO=rn,JO=hi,$O=M,QO=RangeError,ZO=b,tR=cn,eR=hi,rR=M,nR=ZO((function(t){var e=JO($O(this)),r="",n=XO(t);if(n<0||n===1/0)throw new QO("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(r+=e);return r})),iR=ZO("".slice),oR=Math.ceil,aR=function(t){return function(e,r,n){var i,o,a=eR(rR(e)),s=tR(r),u=a.length,l=void 0===n?" ":eR(n);return s<=u||""===l?a:((o=nR(l,oR((i=s-u)/l.length))).length>i&&(o=iR(o,0,i)),t?a+o:o+a)}},sR={start:aR(!1),end:aR(!0)},uR=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(J),lR=sR.start;ti({target:"String",proto:!0,forced:uR},{padStart:function(t){return lR(this,t,arguments.length>1?arguments[1]:void 0)}});const cR=(t,e)=>{let r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3],r};function hR(t){let e=0;const r=function(t){if(73!==t[0]||68!==t[1]||51!==t[2])return;const e=Number(t[5]).toString(2).padStart(8,"0"),r={unsynchronisation:"1"===e.charAt(0),extendedHeader:"1"===e.charAt(1),experimental:"1"===e.charAt(2),footer:"1"===e.charAt(3)};return{version:{major:t[3],revision:t[4]},flag:r,size:cR(t,6)}}(t);if(e+=10,!r)return;const n=function(t,e){return e.flag.extendedHeader?{size:cR(t,10),flag:""}:{size:0,flag:""}}(t,r);e+=n.size;const i=[],o=r.size-e-(r.flag.footer?10:0);for(;e<o;){const r=fR(t,e);if(!r)break;i.push(r),e+=r.size}return{header:r,extendedHeader:n,frames:i}}function fR(t,e){const r=String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3]),n=cR(t,e+4),i=[Number(t[8]).toString(2).padStart(8,"0"),Number(t[9]).toString(2).padStart(8,"0")];if(n<2)return{id:r,size:n,flags:i,info:"",value:""};const o=e+10,a=t.subarray(o,o+n),{info:s,value:u}=dR(r,n,a);return{id:r,size:n,flags:i,info:s,value:u}}const dR=(t,e,r)=>{if(3!==r[0])return{info:"",value:""};if("TXXX"===t||"TKMP"===t){let t=1;const e=pR(r.subarray(t));t+=e.length+1;return{info:e,value:pR(r.subarray(t))}}return{info:pR(r.subarray(1)),value:""}},pR=t=>{const e=t.length;let r,n,i,o="",a=0;for(;a<e;)if(r=t[a++],0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(r);break;case 12:case 13:n=t[a++],o+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=t[a++],i=t[a++],o+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}return o},gR=["application/dash+xml","video/vnd.mpeg.dash.mpd"],mR=["mpd"],yR=t=>gR.indexOf(t)>-1,vR=(t,e)=>{if(e)return yR(e);let r=aO(t);return mR.indexOf(r)>-1};function ER(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=t.length-1,n=[];for(;r>=0&&n.length<e;){let e=t[r];e._tfinish&&e.trequest&&e.tresponse&&e.trace&&e.trace.length>0&&n.push(e),r--}if(0===n.length)throw new Error("lastRequests is 0");return n}const wR=t=>Math.round(t.reduce(((t,e)=>t+TR(e)),0)/t.length),TR=t=>{const e=(t.tresponse.getTime()-t.trequest.getTime())/1e3,r=(t._tfinish.getTime()-t.trequest.getTime())/1e3,n=8*t.trace.reduce((function(t,e){return t+e.b[0]}),0);return Math.round(n/(r+e))},bR={name:"DashHandler",priority:0,canPlay:t=>!!EO()&&("undefined"!=typeof dashjs&&dashjs?t.drm?("WIDEVINE"===t.drm.drm_type||"PLAYREADY"===t.drm.drm_type)&&vR(t.src,t.type):vR(t.src,t.type):(al.warn("Is not installed : dashjs"),!1)),canPlayType:t=>!!EO()&&(!("undefined"==typeof dashjs||!dashjs)&&yR(t)),getPlayer:t=>new SR(bR.name,t)};PO(bR);class SR extends OO{constructor(t,e){super(t,e),this.initPlayer()}createMediaEventHandler(){var t=this;Rl.forEach((e=>{this.videoListeners[e]=function(r){t.emit(Pl+e,r)}})),Rl.forEach((t=>{this.on(Pl+t,(e=>{this.emit(t,e.data)}))}))}initPlayer(){const t=!!this.streamingOption.customAbrMode,e=this.streamType===bl.LIVE;this.player=dashjs.MediaPlayer().create(),t&&"undefined"!=typeof InsufficientBufferRuleForKamp&&this.player.addABRCustomRule("qualitySwitchRules","InsufficientBufferRuleForKamp",InsufficientBufferRuleForKamp),this.setRequestFilter();const r={debug:{logLevel:dashjs.Debug.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{cacheInitSegments:!e,abr:{ABRStrategy:"abrDynamic",additionalAbrRules:{insufficientBufferRule:!t}},scheduling:{scheduleWhilePaused:!e},buffer:{fastSwitchEnabled:!0,bufferToKeep:this.streamingOption.backBufferTime,stableBufferTime:this.streamingOption.maxBufferTime,bufferTimeAtTopQuality:this.streamingOption.maxBufferTime,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600},trackSwitchMode:{video:"alwaysReplace",audio:"alwaysReplace"},protection:{keepProtectionMediaKeys:!0},delay:{useSuggestedPresentationDelay:!1,liveDelay:this.streamingOption.liveDelay},liveCatchup:{enabled:!1,playbackRate:{min:-.1,max:.1},playbackBufferMin:.5}}};this.streamingOption.debug&&r.debug&&(r.debug.logLevel=dashjs.Debug.LOG_LEVEL_DEBUG,r.debug.dispatchEvent=!0);const n=!!this.streamingOption.lowLatencyMode;al.info("lowLatencyMode=",n),n&&r.streaming&&r.streaming.delay&&(r.streaming.delay.liveDelay=.5),this.player.updateSettings(r),this.player.initialize(),this.bindEvent(),this.setDRMData(),al.info("streamingOption",this.streamingOption),this.player.setAutoPlay(this.streamingOption.autoplay),this.streamingOption.currentTime&&this.streamingOption.currentTime>0?this.player.attachSource(this.src,this.streamingOption.currentTime):this.player.attachSource(this.src),this.setDefaultMainTrack(),this.player.attachView(this.videoEl),this.player.on(dashjs.MediaPlayer.events.PLAYBACK_METADATA_LOADED,(()=>{this.streamingOption.currentTime||this.player.seekToOriginalLive()})),this.player.on(dashjs.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,(()=>{this.emit(Al.ERROR_NOTALLOWED)})),this.player.on(dashjs.MediaPlayer.events.ERROR,(t=>{var e,r;const n=t.error;if(al.error("[dash]",t),"string"!=typeof n&&n.code&&"data"in n&&(n.code===dashjs.MediaPlayer.errors.DOWNLOAD_ERROR_ID_MANIFEST_CODE||n.code===dashjs.MediaPlayer.errors.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE||n.code===dashjs.MediaPlayer.errors.DOWNLOAD_ERROR_ID_CONTENT_CODE)){const t=n.data,i=(null===(e=null==t?void 0:t.response)||void 0===e?void 0:e.status)||-1;if(401===i||403===i||0===i)return void this.emit(Al.ERROR_NOTACCESS,{video_src:this.src,request_url:null===(r=null==t?void 0:t.request)||void 0===r?void 0:r.url,response_code:i,handler:this.name})}}))}setDefaultMainTrack(){this.player.setInitialMediaSettingsFor("video",{role:"main"}),this.player.setInitialMediaSettingsFor("audio",{role:"main"})}setRequestFilter(){let t=this.src.split("?")[1]||"";this.player.extend("RequestModifier",(function(){return{modifyRequestURL:function(e){return dO(e,t)}}}),!0),this.authType===ul.COOKIE&&this.player.setXHRWithCredentialsForType("",!0)}bindEvent(){const t=e=>{if(!e||!("event"in e))return;const r=e.event;if(!r)return;let n=hR(r.messageData);n&&n.frames.forEach((e=>{if("TKMP"!==e.id)return;let r;this.player.off(Dl,t);try{r=JSON.parse(e.info),this.willFireChangeRatio(r)}catch(t){}}))};this.player.on(Dl,t,void 0,{mode:dashjs.MediaPlayer.events.EVENT_MODE_ON_RECEIVE}),this.player.on(Dl,(t=>{if(!t||!("event"in t))return;const e=t.event;if(!e)return;let r=hR(e.messageData);r&&r.frames.forEach((t=>{const e=t.info;let r;try{r=JSON.parse(e)}catch(t){}"TKMP"===t.id?(this.willFireChangeRatio(r),this.setLatestTimedKampData(r),this.emit(Al.PLAY_TIMEDKAMPDATA,r||e)):"TXXX"===t.id&&this.emit(Al.PLAY_TIMEDMETADATA,r||e)}))}));const e=t=>{this.player.off(dashjs.MediaPlayer.events.STREAM_INITIALIZED,e);try{al.info("[manifest parsing]",vO(t.streamInfo.manifestInfo));const e=t.streamInfo.manifestInfo,r=new Date(e.loadedTime).getTime(),n=new Date(e.availableFrom).getTime(),i=e.dvrWindowSize||0;this.initPTS=Math.max((r-n)/1e3-i,0)}catch(t){this.initPTS=this.videoEl.currentTime}al.info("initPTS",this.initPTS,this.videoEl.currentTime)};this.player.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,e)}setDRMData(){this.drm&&(this.setLisenceRequestFilter(this.drm),"PLAYREADY"===this.drm.drm_type?this.setDRMPlayreadyData(this.drm):"WIDEVINE"===this.drm.drm_type&&this.setDRMWidevineData(this.drm))}setLisenceRequestFilter(t){this.player.registerLicenseRequestFilter((function(e){let r;al.log("LICENSE REQUEST",e),r="string"==typeof e.data?new Uint8Array(cO(e.data)):new Uint8Array(e.data);const n=uO(r),i="token="+t.token+"&provider="+t.provider+"&payload="+n;return e.data=i,e.headers={"Content-Type":"application/x-www-form-urlencoded"},Promise.resolve(e)})),this.player.registerLicenseResponseFilter((function(e){const r=lO(e.data),n=JSON.parse(r),i=n.result_code;return al.log("LICENSE response.data",n),"OK"===i&&("PLAYREADY"===t.drm_type?e.data=cO(n.payload):e.data=hO(n.payload).buffer),Promise.resolve(e)}))}setDRMPlayreadyData(t){const e={"com.microsoft.playready":{serverURL:t.license_url,priority:0}};this.player.setProtectionData(e)}setDRMWidevineData(t){ms.isMobile&&(al.info("[setDRMWidevineData]","set max bps in mobile"),this.player.updateSettings({streaming:{abr:{maxBitrate:{audio:-1,video:1200}}}}));const e={"com.widevine.alpha":{serverURL:t.license_url,priority:0}};this.player.setProtectionData(e),this.player.getProtectionController().setRobustnessLevel("SW_SECURE_CRYPTO")}play(){return ip(this,void 0,void 0,(function*(){yield this.__play()}))}__play(){return ip(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{const r=()=>{this.player.off(dashjs.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,n),this.player.off(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,r),t(!0)},n=()=>{this.player.off(dashjs.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,n),this.player.off(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,r),e(new DOMException("play() failed because the user didn't interact with the document first.","NotAllowedError"))};this.player.on(dashjs.MediaPlayer.events.PLAYBACK_NOT_ALLOWED,n),this.player.on(dashjs.MediaPlayer.events.PLAYBACK_PLAYING,r),this.streamingOption.currentTime||this.player.seekToOriginalLive(),this.player.play()}))}))}pause(){this.player.pause()}stop(){this.player.pause()}isPaused(){return this.player.isPaused()}seekBy(t){this.setCurrentTime(this.getCurrentTime()+t)}setCurrentTime(t){if(void 0===t)return;const e=this.getSeekableRange(),r=e.start(0),n=e.end(0);let i=Math.min(Math.max(t,r),n)-r;i=parseFloat(i.toFixed(3)),this.isPaused()?this.player.seek(i):(this.one([Pl+Al.VIDEO_PAUSE,Pl+Al.VIDEO_PLAY],(t=>t.stopPropagation()),{priority:1e4}),this.player.pause(),this.player.seek(i),this.player.play())}getCurrentTimeAsUTC(){return this.videoEl.currentTime}getCurrentTime(){return this.videoEl.currentTime-this.initPTS}getBufferRangeAsUTC(){return this.videoEl.buffered}getBufferRange(){return{length:this.videoEl.buffered.length,start:t=>this.videoEl.buffered.start(t)-this.initPTS,end:t=>this.videoEl.buffered.end(t)-this.initPTS}}getSeekableRangeAsUTC(){return{length:1,start:t=>{if(0!==t)throw new DOMException("Failed to execute 'start' on 'TimeRanges': "+"The index provided (".concat(t,") is greater than the maximum bound (1)."));return this.player.getDVRSeekOffset(0)},end:t=>{if(0!==t)throw new DOMException("Failed to execute 'end' on 'TimeRanges': "+"The index provided (".concat(t,") is greater than the maximum bound (1)."));return this.player.getDVRSeekOffset(this.player.duration())}}}getSeekableRange(){return{length:1,start:t=>{if(0!==t)throw new DOMException("Failed to execute 'start' on 'TimeRanges': "+"The index provided (".concat(t,") is greater than the maximum bound (1)."));return this.player.getDVRSeekOffset(0)-this.initPTS},end:t=>{if(0!==t)throw new DOMException("Failed to execute 'end' on 'TimeRanges': "+"The index provided (".concat(t,") is greater than the maximum bound (1)."));return this.player.getDVRSeekOffset(this.player.duration())-this.initPTS}}}getCurrentVarient(){const t=this.player.getBitrateInfoListFor("video")[this.player.getQualityFor("video")],e=this.player.getBitrateInfoListFor("audio")[this.player.getQualityFor("audio")],r={tag:"",type:"video",width:t.width,height:t.height,video_bps:t.bitrate,audio_bps:e.bitrate};return r.tag=mO(r),r}getVarients(){let t=[];return(this.player.getBitrateInfoListFor("video")||[]).forEach((e=>{const r={tag:"",type:"video",width:e.width,height:e.height,video_bps:e.bitrate,audio_bps:0};r.tag=mO(r),t.push(r)})),(this.player.getBitrateInfoListFor("audio")||[]).forEach((e=>{const r={tag:"",type:"audio",width:0,height:0,video_bps:0,audio_bps:e.bitrate};r.tag=mO(r),t.push(r)})),t}getTracks(){}changeVarient(t){if(al.info("player:changeVarient["+this.instanceID+"]",t),"adaptive"===t.tag)return void this.player.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}});let e=this.player.getQualityFor("video");this.player.getBitrateInfoListFor("video").forEach((r=>{Math.abs(r.width-t.width)<8&&Math.abs(r.height-t.height)<8&&(e=r.qualityIndex)}));let r=this.player.getQualityFor("audio"),n=1e7;this.player.getBitrateInfoListFor("audio").forEach((e=>{const i=Math.abs(e.bitrate-t.audio_bps);i<n&&(n=i,r=e.qualityIndex)})),this.player.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),al.log("currentQualityVideoIndex",e),al.log("currentQualityAudioIndex",r),this.player.setQualityFor("video",e,!1),this.player.setQualityFor("audio",r,!1)}changeTrack(t){}getBandwidthEstimate(){const t=this.player.getDashMetrics(),e=ER(t.getHttpRequests("video"),3),r=ER(t.getHttpRequests("audio"),3);return wR(e)+wR(r)}getStats(){let t=0;try{t=Math.round(1e3*this.player.getAverageThroughput("video"))}catch(t){}return{throughput:t}}destroy(){this.player.reset(),super.destroy()}}const AR=function(){return"windows"===ms.os.name&&(()=>{const{browser:t}=ms,{name:e,version:r}=t,n=parseInt(r.major,10);return"chrome"===e&&n>=53||"firefox"===e&&n>=55||"safari"===e&&n>=11||"msie"===e&&n>=11})()},OR=function(t){return!(!t||0!==t.indexOf("potplayer://play.kakao.com/play/"))},RR=function(t){const e=LR(t);return"true"===e.kaps_test&&e.protocol?e.protocol:"none"},PR=t=>ip(void 0,void 0,void 0,(function*(){let e=(new Date).getTime(),r=t+(-1===t.indexOf("?")?"?t=":"&t=")+e;try{return yield up({url:r}),!0}catch(t){return!1}})),DR=t=>new Promise((e=>{setTimeout(e,t)})),LR=t=>{if("string"!=typeof t)throw new TypeError("source is not string");al.info("kapsSource",t);let e=t.split("?")[1];if(!e)throw new TypeError("source is not valid url");return ap.parse(e)},_R=(t,e)=>ip(void 0,void 0,void 0,(function*(){let{uniqid:r,token:n,phase:i=e}=LR(t);al.log("[kaps] :startKapsServer:","uniqid=".concat(r,", phase=").concat(i));let o=yield((t,e)=>ip(void 0,void 0,void 0,(function*(){al.info("[startKapsServer]");let r=(new Date).getTime(),n="".concat("http://127.0.0.1:7283/kaps/create","?uniqid=").concat(t,"&phase=").concat(e,"&t=").concat(r);try{const t=yield up({url:n});return JSON.parse(t.responseText)}catch(t){return al.error("[startKapsServer]","error",n,t),!1}})))(r,i);if(!o)throw new Error("Do not start kaps server");let a=o.isstart,s=Math.floor(1e10*Math.random()),u="".concat(o.kamplive,"?phase=").concat(i,"&token=").concat(n,"&player_id=").concat(s);al.log("[kaps] :checkStartURL:",a),al.log("[kaps] :resigtURL:",u);let l=yield(c=u,ip(void 0,void 0,void 0,(function*(){let t=(new Date).getTime(),e="".concat(c,"&t=").concat(t);try{return(yield up({url:e})).responseText.trim()}catch(t){throw t}})));var c;if(!l)throw new Error("Do not regist token to kaps server");al.log("[kaps] :manifestURL:",l);let h=yield function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return ip(void 0,void 0,void 0,(function*(){for(let r=0;r<e;r+=1){try{if(yield PR(t))return!0}catch(t){}yield DR(500)}return!1}))}(a);if(!h)throw new Error("Do not start kaps server (timeout)");return l})),IR=["application/x-kapsURL"],kR={name:"KapsDashHandler",priority:2,canPlay:t=>!!AR()&&(!!OR(t.src)&&("dash"===RR(t.src)&&(!("undefined"==typeof dashjs||!dashjs)||(al.warn("Is not installed : dashjs"),!1)))),canPlayType:t=>!("undefined"==typeof dashjs||!dashjs||!AR())&&(t=>IR.indexOf(t)>-1)(t),getPlayer:t=>new xR(kR.name,t)};PO(kR);class xR extends SR{constructor(t,e){super(t,e)}bindStopEvent(){var t=this;function e(){window.clearTimeout(t.stopTimeID),t.stopTimeID=window.setTimeout((function(){t.stop()}),8e3)}this.on(["pause","play","canplay","canplaythrough","playing","progress","timeupdate"],e),this.__unBindStopEvent=function(){window.clearTimeout(t.stopTimeID),t.off(["pause","play","canplay","canplaythrough","playing","progress","timeupdate"],e)}}play(){return ip(this,void 0,void 0,(function*(){this.stat.startTime=Date.now(),this.one("canplaythrough",(()=>{this.stat.startTime&&(this.stat.startDelay=Date.now()-this.stat.startTime,al.info("[start delay]",this.stat.startDelay))}));const t=yield _R(this.src,this.phase);this.bindStopEvent(),this.player.attachSource(t),this.player.isPaused()&&(yield this.player.play())}))}stop(){super.stop(),this.unBindStopEvent(),this.emit("stop")}unBindStopEvent(){this.__unBindStopEvent&&(this.__unBindStopEvent(),this.__unBindStopEvent=void 0)}destroy(){al.log("[destroy]","KapsPlayer"),this.unBindStopEvent(),super.destroy()}}const CR=["video/m3u","video/m3u8","video/hls","application/x-mpegURL","vnd.apple.mpegURL","video/MP2T","application/vnd.apple.mpegurl"],MR=["m3u8","m3u"],UR=t=>CR.indexOf(t)>-1,NR={name:"HlsHandler",priority:0,canPlay:t=>!t.useNativeOnHls&&("undefined"!=typeof Hls&&Hls?!!Hls.isSupported()&&((!t.drm||"WIDEVINE"===t.drm.drm_type)&&((t,e)=>{if(e)return UR(e);let r=aO(t);return MR.indexOf(r)>-1})(t.src,t.type)):(al.warn("Is not installed : hls.js"),!1)),canPlayType:t=>!("undefined"==typeof Hls||!Hls||!Hls.isSupported())&&UR(t),getPlayer:t=>new VR(NR.name,t)};PO(NR);const BR="TimedKampDataTrack";class VR extends OO{constructor(t,e){super(t,e),this.setInitPTS=!1,this.params="",this.loadedManifestParsed=!1,this.unbindEventTimedmetadata=()=>{},this.initPlayer()}initPlayer(){this.params=this.src.split("?")[1]||"";let t=this.setRequestFilter(this.setBufferSetting());if(t=this.setDrmLicenseFilter(t),this.player=new Hls(t),this.player.loadSource(this.src),this.player.attachMedia(this.videoEl),this.streamingOption.currentTime){const t=this.streamingOption.currentTime;this.one(Al.VIDEO_LOADEDMETADATA,(e=>{this.setCurrentTime(t)})),this.setCurrentTime(t)}this.one([Al.VIDEO_PROGRESS,Al.VIDEO_LOADEDDATA],(()=>{if(this.isLive()&&(!this.streamingOption.currentTime||0===this.streamingOption.currentTime))try{const t=this.getSeekableRange(),e=t.end(t.length-1);if(e!==1/0){const t=e-Math.max(this.streamingOption.liveDelay-2,0);this.streamingOption.currentTime=t,this.setCurrentTime(t),al.info("set live currentTime",t)}}catch(t){}})),this.one(Al.VIDEO_DURATIONCAHNGE,(()=>{this.isLive()&&this.pause()})),this.player.on(Hls.Events.ERROR,((t,e)=>{if(e.fatal)switch(e.type){case Hls.ErrorTypes.MEDIA_ERROR:return al.error("[hls]",e.type,"fatal media error encountered, try to recover"),void this.player.recoverMediaError();case Hls.ErrorTypes.NETWORK_ERROR:if((e.details===Hls.ErrorDetails.MANIFEST_LOAD_ERROR||e.details===Hls.ErrorDetails.LEVEL_LOAD_ERROR||e.details===Hls.ErrorDetails.AUDIO_TRACK_LOAD_ERROR)&&e.response&&(401===e.response.code||403===e.response.code||0===e.response.code))return void this.emit(Al.ERROR_NOTACCESS,{video_src:this.src,request_url:e.response.url,response_code:e.response.code,handler:this.name});al.error("[hls]",e.type,e);break;default:al.error("[hls]",e.type,e)}})),this.player.on(Hls.Events.MANIFEST_PARSED,(()=>{this.loadedManifestParsed=!0,this.streamType!==bl.LIVE&&this.player.startLoad(-1)})),this.player.on(Hls.Events.INIT_PTS_FOUND,((t,e)=>{this.setInitPTS||9e4===e.timescale||(this.initPTS=e.initPTS/e.timescale,this.setInitPTS=!0,al.info("initPTS","initpts=",e.initPTS,"timescale=",e.timescale))})),this.bindEventTimedmetadata()}setBufferSetting(){const t=!!this.streamingOption.lowLatencyMode,e=!!this.streamingOption.customAbrMode;al.log("lowLatencyMode=",t),al.log("customAbrMode=",e,"KampAbrController=",typeof KampAbrController);const r={capLevelToPlayerSize:!1,liveDurationInfinity:!0};return r.capLevelToPlayerSize=!1,r.liveDurationInfinity=!0,r.debug=this.streamingOption.debug||!1,r.autoStartLoad=!1,r.maxBufferLength=this.streamingOption.maxBufferTime,r.maxMaxBufferLength=this.streamingOption.maxBufferTime,r.backBufferLength=this.streamingOption.backBufferTime,r.lowLatencyMode=t,t?(this.streamingOption.liveDelay=3,r.liveSyncDuration=this.streamingOption.liveDelay,r.maxLiveSyncPlaybackRate=1.1):r.liveSyncDuration=this.streamingOption.liveDelay,e&&"undefined"!=typeof KampAbrController&&(r.abrController=KampAbrController),r}bindEventTimedmetadata(){const t=this;this.player.on(Hls.Events.FRAG_PARSING_METADATA,(function e(r,n){n.samples.forEach((r=>{if(r.type===Dl){let n,i=hR(r.data);if(!i||0===i.frames.length)return;t.player.off(Hls.Events.FRAG_PARSING_METADATA,e);try{n=JSON.parse(i.frames[0].info),al.info("latestTimedKampData",n.dar),t.willFireChangeRatio(n)}catch(t){}}}))}));let e=0;function r(r){if(!r.target)return;const n=r.target;n.cues&&(function(r){const n=r.cues||[],i=t.getCurrentTime();for(let r=0;r<n.length;r+=1){let o=n[r];if(!o._id){if(o._id=""+e,e+=1,o._fire=!1,!o.value||"TKMP"!==o.value.key&&"TXXX"!==o.value.key)continue;o.startTime<=i&&i<=o.endTime?t.parseCueData(o):o.onenter=e=>{if(!e.target)return;const r=e.target;r.onenter=null,t.parseCueData(r)}}}}(n),function(e){const r=e.cues||[],n=[],i=t.getCurrentTime();for(let t=0;t<r.length;t+=1){let e=r[t];e.endTime<i&&e._fire&&n.push(e)}n.forEach((t=>{try{e.removeCue(t)}catch(t){}}))}(n))}function n(t){const e=t.track;e&&"metadata"===e.kind&&(e.mode="hidden",e.__id=BR,e.addEventListener("cuechange",r))}Array.from(this.videoEl.textTracks).forEach((t=>{t.__id===BR&&t.addEventListener("cuechange",r)})),this.videoEl.textTracks.addEventListener("addtrack",n),this.unbindEventTimedmetadata=function(){t.videoEl.textTracks.removeEventListener("addtrack",n);const e=t.videoEl.textTracks;for(let t=0;t<e.length;t+=1)e[t].__id===BR&&e[t].removeEventListener("cuechange",r)}}parseCueData(t){if(t._fire=!0,t.value)return"TKMP"===t.value.key?this.parseKampCueData(t):"TXXX"===t.value.key?this.parseCustomCueData(t):void 0}parseKampCueData(t){let e;try{e=JSON.parse(t.value.data)}catch(t){}if(!this.setInitPTS&&e.pts){const r=1e6;this.initPTS=e.pts/r-t.startTime,this.setInitPTS=!0,al.info("initPTS",this.initPTS,r)}this.willFireChangeRatio(e),this.setLatestTimedKampData(e),this.emit(Al.PLAY_TIMEDKAMPDATA,e)}parseCustomCueData(t){let e=t.value.data;try{e=JSON.parse(e)}catch(t){}this.emit(Al.PLAY_TIMEDMETADATA,e)}setRequestFilter(t){const e=this;return this.authType===ul.COOKIE?(t.xhrSetup=function(t,r){t.withCredentials=!0,r=dO(r,e.params),t.open("GET",r,!0)},t.fetchSetup=function(t,r){return r.credentials="include",t.url=dO(t.url,e.params),new Request(t.url,r)}):(t.xhrSetup=function(t,r){r=dO(r,e.params),t.open("GET",r,!0)},t.fetchSetup=function(t,r){return t.url=dO(t.url,e.params),new Request(t.url,r)}),t}setDrmLicenseFilter(t){if(!this.drm||"WIDEVINE"!==this.drm.drm_type&&"PLAYREADY"!==this.drm.drm_type)return t;const{token:e,provider:r,drm_type:n}=this.drm;return t.emeEnabled=!0,t.widevineLicenseUrl=this.drm.license_url,t.licenseXhrSetup=(t,n)=>{t.open("POST",n,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.responseType="text",t._send=t.send,t.send=n=>{const i=uO(new Uint8Array(n)),o="token="+e+"&provider="+r+"&payload="+i;t._send(o)}},t.licenseResponseCallback=(t,e)=>{const r=JSON.parse(t.responseText);if("OK"===r.result_code)return"PLAYREADY"===n?cO(r.payload):hO(r.payload).buffer;throw new Error("DRM License Error")},t}isLive(){var t;if(!this.player||!this.player.levels)return!1;const e=this.player.currentLevel;return this.player.levels[e]&&this.player.levels[e].details&&!!(null===(t=this.player.levels[e].details)||void 0===t?void 0:t.live)||!1}play(){return ip(this,void 0,void 0,(function*(){return this.loadedManifestParsed||this.player.loadSource(this.src),this.player.startLoad(-1),yield this.videoEl.play().catch((t=>{throw this.player.stopLoad(),"NotAllowedError"===t.name&&this.emit(Al.ERROR_NOTALLOWED),t}))}))}pause(){this.videoEl.pause(),this.player.stopLoad()}stop(){this.videoEl.pause(),this.player.stopLoad()}getCurrentVarient(){const t=this.player.levels[this.player.currentLevel],e={tag:"",type:t.videoCodec?"video":"audio",width:t.width,height:t.height,video_bps:t.videoCodec?t.bitrate:0,audio_bps:t.audioCodec?t.bitrate:0};return e.tag=mO(e),e}getVarients(){const t=[];return this.player.levels.forEach((e=>{const r={tag:"",type:e.videoCodec?"video":"audio",width:e.width,height:e.height,video_bps:e.videoCodec?e.bitrate:0,audio_bps:e.audioCodec?e.bitrate:0};r.tag=mO(r),t.push(r)})),t}changeVarient(t){al.info("player:changeVarient["+this.instanceID+"]",t),"adaptive"!==t.tag?this.player.levels.forEach(((e,r)=>{mO({width:e.width,height:e.height,video_bps:e.videoCodec?e.bitrate:0,audio_bps:e.audioCodec?e.bitrate:0})===t.tag&&(this.player.currentLevel=r)})):this.player.currentLevel=-1}getSeekableRange(){return{length:this.videoEl.seekable.length,start:t=>this.videoEl.seekable.start(t),end:t=>this.isLive()&&t===this.videoEl.seekable.length-1?this.player.liveSyncPosition||0:this.videoEl.seekable.end(t)}}getSeekableRangeAsUTC(){return{length:this.videoEl.seekable.length,start:t=>this.videoEl.seekable.start(t)+this.initPTS,end:t=>this.isLive()&&t===this.videoEl.seekable.length-1?(this.player.liveSyncPosition||0)+this.initPTS:this.videoEl.seekable.end(t)+this.initPTS}}getBandwidthEstimate(){return Math.round(this.player.bandwidthEstimate)}getStats(){return{throughput:this.getBandwidthEstimate()}}destroy(){this.player&&(this.player.detachMedia(),this.player.destroy()),super.destroy(),this.unbindEventTimedmetadata()}}PO({name:"NppHandler",priority:1,canPlay:t=>{return"undefined"!=typeof Hls&&Hls?!!Hls.isSupported()&&(!!Pp()&&!(!(e=t.src)||0!==e.indexOf("potplayer://play.kakao.com/play/npp"))):(al.warn("Is not installed : hls.js"),!1);var e},canPlayType:t=>!!("undefined"!=typeof Hls&&Hls&&Hls.isSupported()&&Pp())&&(t=>Sp.indexOf(t)>-1)(t),getPlayer:t=>"macos"===ms.os.name&&"safari"===ms.browser.name?new jR("NppNativePlayer",t):new FR("NppHlsPlayer",t)});class jR extends OO{constructor(t,e){super(t,e)}bindStopEvent(){var t=this;function e(){window.clearTimeout(t.stopTimeID),t.stopTimeID=window.setTimeout((function(){t.stop()}),8e3)}this.on(["pause","play","canplay","canplaythrough","playing","timeupdate"],e),this.__unBindStopEvent=function(){window.clearTimeout(t.stopTimeID),t.off(["pause","play","canplay","canplaythrough","playing","timeupdate"],e)}}unBindStopEvent(){this.__unBindStopEvent&&(this.__unBindStopEvent(),this.__unBindStopEvent=void 0)}play(){return ip(this,void 0,void 0,(function*(){const t=yield Ip(this.src,this.phase);return this.bindStopEvent(),this.videoEl.src=t,yield this.videoEl.play()}))}pause(){this.videoEl.pause()}stop(){super.stop(),this.unBindStopEvent(),this.emit("stop")}destroy(){al.log("[destroy]","NppNativePlayer"),this.unBindStopEvent(),super.destroy(),this.videoEl.load()}}class FR extends VR{constructor(t,e){super(t,e)}setBufferSetting(){let t=super.setBufferSetting();return t.autoStartLoad=!0,t}play(){return ip(this,void 0,void 0,(function*(){this.stat.startTime=Date.now(),this.one("canplaythrough",(()=>{this.stat.startTime&&(this.stat.startDelay=Date.now()-this.stat.startTime,al.info("[start delay]",this.stat.startDelay))}));const t=yield Ip(this.src,this.phase);return this.bindStopEvent(),this.player.loadSource(t),yield this.videoEl.play().catch((t=>{throw"NotAllowedError"===t.name&&this.emit(Al.ERROR_NOTALLOWED),t}))}))}bindStopEvent(){var t=this;function e(){window.clearTimeout(t.stopTimeID),t.stopTimeID=window.setTimeout((function(){t.stop()}),8e3)}this.on(["pause","play","canplay","canplaythrough","playing","timeupdate"],e),this.__unBindStopEvent=function(){window.clearTimeout(t.stopTimeID),t.off(["pause","play","canplay","canplaythrough","playing","timeupdate"],e)}}unBindStopEvent(){this.__unBindStopEvent&&(this.__unBindStopEvent(),this.__unBindStopEvent=void 0)}stop(){super.stop(),this.unBindStopEvent(),this.emit("stop")}destroy(){al.log("[destroy]","NppHlsPlayer"),this.unBindStopEvent(),this.player&&(this.player.detachMedia(),this.player.destroy()),super.destroy()}}const HR={name:"KapsHlsHandler",priority:2,canPlay:t=>!!AR()&&(!!OR(t.src)&&("hls"===RR(t.src)&&("undefined"!=typeof Hls&&Hls?!!Hls.isSupported():(al.warn("Is not installed : hls.js"),!1)))),canPlayType:t=>!1,getPlayer:t=>new KR(HR.name,t)};PO(HR);class KR extends VR{constructor(t,e){super(t,e)}setBufferSetting(){let t=super.setBufferSetting();return t.autoStartLoad=!0,t}bindStopEvent(){var t=this;function e(){window.clearTimeout(t.stopTimeID),t.stopTimeID=window.setTimeout((function(){t.stop()}),8e3)}this.on(["pause","play","canplay","canplaythrough","playing","progress","timeupdate"],e),this.__unBindStopEvent=function(){window.clearTimeout(t.stopTimeID),t.off(["pause","play","canplay","canplaythrough","playing","progress","timeupdate"],e)}}play(){return ip(this,void 0,void 0,(function*(){this.stat.startTime=Date.now(),this.one("canplaythrough",(()=>{this.stat.startTime&&(this.stat.startDelay=Date.now()-this.stat.startTime,al.info("[start delay]",this.stat.startDelay))}));const t=yield _R(this.src,this.phase);if(this.params=t.split("?")[1]||"",this.bindStopEvent(),this.player.loadSource(t),this.isPaused())return yield this.videoEl.play().catch((t=>{throw"NotAllowedError"===t.name&&this.emit(Al.ERROR_NOTALLOWED),t}))}))}stop(){super.stop(),this.unBindStopEvent(),this.emit("stop")}unBindStopEvent(){this.__unBindStopEvent&&(this.__unBindStopEvent(),this.__unBindStopEvent=void 0)}destroy(){al.log("[destroy]","KapsPlayer"),this.unBindStopEvent(),super.destroy()}}return t.Events=Ol,t.canPlayNpp=Pp,t.checkForAgentInstallation=function(){return ip(this,void 0,void 0,(function*(){for(let t=0;t<200;t+=1){try{if(yield Mp())return!0}catch(t){}yield Up(3e3)}return!1}))},t.checkLiveAgent=Mp,t.getVersion=kO,t.init=function(t){return new CO(t)},t.logger=al,t.ua=ms,t.util=SO,t}({});
